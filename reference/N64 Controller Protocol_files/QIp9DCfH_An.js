/*1369870603,178130467*/

if (self.CavalryLogger) { CavalryLogger.start_js(["lE871"]); }

__d("AjaxRequest",["ErrorUtils","Keys","URI","UserAgent","XHR","copyProperties"],function(a,b,c,d,e,f){var g=b('ErrorUtils'),h=b('Keys'),i=b('URI'),j=b('UserAgent'),k=b('XHR'),l=b('copyProperties');function m(q,r,s){this.xhr=k.create();if(!(r instanceof i))r=new i(r);if(s&&q=='GET'){r.setQueryData(s);}else this._params=s;this.method=q;this.uri=r;this.xhr.open(q,r);}var n=window.XMLHttpRequest&&('withCredentials' in new XMLHttpRequest());m.supportsCORS=function(){return n;};m.ERROR='ar:error';m.TIMEOUT='ar:timeout';m.PROXY_ERROR='ar:proxy error';m.TRANSPORT_ERROR='ar:transport error';m.SERVER_ERROR='ar:http error';m.PARSE_ERROR='ar:parse error';m._inflight=[];function o(){var q=m._inflight;m._inflight=[];q.forEach(function(r){r.abort();});}function p(q){q.onJSON=q.onError=q.onSuccess=null;clearTimeout(q._timer);if(q.xhr&&q.xhr.readyState<4){q.xhr.abort();q.xhr=null;}m._inflight=m._inflight.filter(function(r){return r&&r!=q&&r.xhr&&r.xhr.readyState<4;});}l(m.prototype,{timeout:60000,streamMode:true,prelude:/^for \(;;\);/,status:null,_eol:-1,_call:function(q){if(this[q])this[q](this);},_parseStatus:function(){var q;try{this.status=this.xhr.status;q=this.xhr.statusText;}catch(r){if(this.xhr.readyState>=4){this.errorType=m.TRANSPORT_ERROR;this.errorText=r.message;}return;}if(this.status===0&&!(/^(file|ftp)/.test(this.uri))){this.errorType=m.TRANSPORT_ERROR;}else if(this.status>=100&&this.status<200){this.errorType=m.PROXY_ERROR;}else if(this.status>=200&&this.status<300){return;}else if(this.status>=300&&this.status<400){this.errorType=m.PROXY_ERROR;}else if(this.status>=400&&this.status<500){this.errorType=m.SERVER_ERROR;}else if(this.status>=500&&this.status<600){this.errorType=m.PROXY_ERROR;}else if(this.status==1223){return;}else if(this.status>=12001&&this.status<=12156){this.errorType=m.TRANSPORT_ERROR;}else{q='unrecognized status code: '+this.status;this.errorType=m.ERROR;}if(!this.errorText)this.errorText=q;},_parseResponse:function(){var q,r=this.xhr.readyState;try{q=this.xhr.responseText||'';}catch(s){if(r>=4){this.errorType=m.ERROR;this.errorText='responseText not available - '+s.message;}return;}while(this.xhr){var t=this._eol+1,u=this.streamMode?q.indexOf('\n',t):q.length;if(u<0&&r==4)u=q.length;if(u<=this._eol)break;var v=q;if(this.streamMode)v=q.substr(t,u-t).replace(/^\s*|\s*$/g,'');if(t===0&&this.prelude)if(this.prelude.test(v))v=v.replace(this.prelude,'');this._eol=u;if(v){try{this.json=JSON.parse(v);}catch(s){var w=(/(<body[\S\s]+?<\/body>)/i).test(q)&&RegExp.$1,x={message:s.message,'char':t,excerpt:((t===0&&w)||v).substr(512)};this.errorType=m.PARSE_ERROR;this.errorText='parse error - '+JSON.stringify(x);return;}g.applyWithGuard(this._call,this,['onJSON']);}}},_onReadyState:function(){var q=this.xhr&&this.xhr.readyState||0;if(this.status==null&&q>=2)this._parseStatus();if(!this.errorType&&this.status!=null)if((q==3&&this.streamMode)||q==4)this._parseResponse();if(this.errorType||q==4){this._time=Date.now()-this._sentAt;this._call(!this.errorType?'onSuccess':'onError');p(this);}},send:function(q){this.xhr.onreadystatechange=function(){g.applyWithGuard(this._onReadyState,this,arguments);}.bind(this);var r=this.timeout;if(r)this._timer=setTimeout((function(){this.errorType=m.TIMEOUT;this.errorText='timeout';this._time=Date.now()-this._sentAt;this._call('onError');p(this);}).bind(this),r,false);m._inflight.push(this);if(this.method=='POST')this.xhr.setRequestHeader('Content-Type','application/x-www-form-urlencoded');this._sentAt=Date.now();this.xhr.send(q?i.implodeQuery(q):'');},abort:function(){p(this);},toString:function(){var q='[AjaxRequest readyState='+this.xhr.readyState;if(this.errorType)q+=' errorType='+this.errorType+' ('+this.errorText+')';return q+']';},toJSON:function(){var q={json:this.json,status:this.status,errorType:this.errorType,errorText:this.errorText,time:this._time};if(this.errorType)q.uri=this.uri;for(var r in q)if(q[r]==null)delete q[r];return q;}});if(window.addEventListener&&j.firefox())window.addEventListener('keydown',function(event){if(event.keyCode===h.ESC)event.prevent();},false);if(window.attachEvent)window.attachEvent('onunload',o);e.exports=m;});
__d("FBAjaxRequest",["AjaxRequest","copyProperties","XHR"],function(a,b,c,d,e,f){var g=b('AjaxRequest'),h=b('copyProperties'),i=b('XHR');function j(k,l,m){m=h(i.getAsyncParams(k),m);var n=new g(k,l,m);n.streamMode=false;var o=n._call;n._call=function(p){if(p=='onJSON'&&this.json){if(this.json.error){this.errorType=g.SERVER_ERROR;this.errorText='AsyncResponse error: '+this.json.error;}this.json=this.json.payload;}o.apply(this,arguments);};n.ajaxReqSend=n.send;n.send=function(p){this.ajaxReqSend(h(p,m));};return n;}e.exports=j;});
__d("CallbackManagerController",["ErrorUtils","copyProperties"],function(a,b,c,d,e,f){var g=b('ErrorUtils'),h=b('copyProperties'),i=function(j){this._pendingIDs=[];this._allRequests=[undefined];this._callbackArgHandler=j;};h(i.prototype,{executeOrEnqueue:function(j,k,l){l=l||{};var m=this._attemptCallback(k,j,l);if(m)return 0;this._allRequests.push({fn:k,request:j,options:l});var n=this._allRequests.length-1;this._pendingIDs.push(n);return n;},unsubscribe:function(j){delete this._allRequests[j];},reset:function(){this._allRequests=[];},getRequest:function(j){return this._allRequests[j];},runPossibleCallbacks:function(){var j=this._pendingIDs;this._pendingIDs=[];var k=[];j.forEach(function(l){var m=this._allRequests[l];if(!m)return;if(this._callbackArgHandler(m.request,m.options)){k.push(l);}else this._pendingIDs.push(l);}.bind(this));k.forEach(function(l){var m=this._allRequests[l];delete this._allRequests[l];this._attemptCallback(m.fn,m.request,m.options);}.bind(this));},_attemptCallback:function(j,k,l){var m=this._callbackArgHandler(k,l);if(m){var n={ids:k};g.applyWithGuard(j,n,m);}return !!m;}});e.exports=i;});
__d("deferred",[],function(a,b,c,d,e,f){var g=0,h=1,i=2,j=4,k='callbacks',l='errbacks',m='cancelbacks',n='completeCallbacks',o=[],p=o.slice,q=o.unshift;function r(y,z){return y?p.call(y,z):o;}function s(y,z){return z<y.length?r(y,z):o;}function t(){this.$Deferred0=g;}t.prototype.addCallback=function(y,z){return this.$Deferred1(h,this.$Deferred2(k),y,z,s(arguments,2));};t.prototype.removeCallback=function(y,z){return this.$Deferred3(this.$Deferred2(k),y,z);};t.prototype.addCompleteCallback=function(y,z){return this.$Deferred1(null,this.$Deferred2(n),y,z,s(arguments,2));};t.prototype.removeCompleteCallback=function(y,z){return this.$Deferred3(this.$Deferred2(n),y,z);};t.prototype.addErrback=function(y,z){return this.$Deferred1(i,this.$Deferred2(l),y,z,s(arguments,2));};t.prototype.removeErrback=function(y,z){return this.$Deferred3(this.$Deferred2(l),y,z);};t.prototype.addCancelback=function(y,z){return this.$Deferred1(j,this.$Deferred2(m),y,z,s(arguments,2));};t.prototype.removeCancelback=function(y,z){return this.$Deferred3(this.$Deferred2(m),y,z);};t.prototype.getStatus=function(){return this.$Deferred0;};t.prototype.setStatus=function(y){var z;this.$Deferred0=y;this.callbackArgs=r(arguments,1);if(y===i){z=l;}else if(y===h){z=k;}else if(y===j)z=m;if(z)this.$Deferred4(this[z],this.callbackArgs);this.$Deferred4(this[n],this.callbackArgs);return this;};t.prototype.setTimeout=function(y){if(this.timeout)this.clearTimeout();this.$Deferred5=this.$Deferred5||this.fail.bind(this);this.timeout=window.setTimeout(this.$Deferred5,y);};t.prototype.clearTimeout=function(){window.clearTimeout(this.timeout);delete this.timeout;};t.prototype.succeed=function(){return this.$Deferred6(h,arguments);};t.prototype.fail=function(){return this.$Deferred6(i,arguments);};t.prototype.cancel=function(){delete this[k];delete this[l];return this.$Deferred6(j,arguments);};t.prototype.$Deferred6=function(y,z){q.call(z,y);return this.setStatus.apply(this,z);};t.prototype.$Deferred2=function(y){return this[y]||(this[y]=[]);};t.prototype.then=function(y,z,aa,ba){var ca=new t(),y,da,ea,fa=r(arguments,0);if(typeof fa[0]==='function')y=fa.shift();if(typeof fa[0]==='function')da=fa.shift();if(typeof fa[0]==='function')ea=fa.shift();var ga=fa.shift();if(y){var ha=[this.$Deferred7,this,ca,'succeed',y,ga].concat(fa);this.addCallback.apply(this,ha);}else this.addCallback(ca.succeed,ca);if(da){var ia=[this.$Deferred7,this,ca,'fail',da,ga].concat(fa);this.addErrback.apply(this,ia);}else this.addErrback(ca.fail,ca);if(ea){var ja=[this.$Deferred7,this,ca,'cancel',ea,ga].concat(fa);this.addCancelback.apply(this,ja);}else this.addCancelback(ca.cancel,ca);return ca;};t.prototype.$Deferred1=function(y,z,aa,ba,ca){var da=this.getStatus();if((!y&&da!==g)||da===y){aa.apply(ba||this,ca.concat(this.callbackArgs));}else z.push(aa,ba,ca);return this;};t.prototype.$Deferred3=function(y,z,aa){for(var ba=0;ba<y.length;ba+=3)if(y[ba]===z&&(!aa||y[ba+1]===aa)){y.splice(ba,3);if(aa)break;ba-=3;}return this;};t.prototype.pipe=function(y){this.addCallback(y.succeed,y).addErrback(y.fail,y).addCancelback(y.cancel,y);};t.prototype.$Deferred4=function(y,z){for(var aa=0;aa<(y||o).length;aa+=3)y[aa].apply(y[aa+1]||this,(y[aa+2]||o).concat(z));};t.prototype.$Deferred7=function(y,z,aa,ba){var ca=r(arguments,4),da=aa.apply(ba,ca);if(da instanceof t){da.pipe(y);}else y[z](da);};var u=t,v=u&&u.prototype?u.prototype:u;function w(y){t.call(this);this.completed=0;this.list=[];if(y){y.forEach(this.waitFor,this);this.startWaiting();}}for(var x in u)if(u.hasOwnProperty(x))w[x]=u[x];w.prototype=Object.create(v);w.prototype.constructor=w;w.prototype.startWaiting=function(){this.waiting=true;this.checkDeferreds();return this;};w.prototype.waitFor=function(y){this.list.push(y);this.checkDeferreds();y.addCompleteCallback(this.deferredComplete,this);return this;};w.prototype.createWaitForDeferred=function(){var y=new t();this.waitFor(y);return y;};w.prototype.createWaitForCallback=function(){var y=this.createWaitForDeferred();return y.succeed.bind(y);};w.prototype.deferredComplete=function(){this.completed++;if(this.completed===this.list.length)this.checkDeferreds();};w.prototype.checkDeferreds=function(){if(!this.waiting||this.completed!==this.list.length)return;var y=false,z=false,aa=[g];for(var ba=0,ca=this.list.length;ba<ca;ba++){var da=this.list[ba];aa.push([da].concat(da.callbackArgs));if(da.getStatus()===i){y=true;}else if(da.getStatus()===j)z=true;}if(y){aa[0]=i;this.fail.apply(this,aa);}else if(z){aa[0]=j;this.cancel.apply(this,aa);}else{aa[0]=h;this.succeed.apply(this,aa);}};f.Deferred=t;f.DeferredList=w;f.Deferred.toArray=r;f.Deferred.STATUS_UNKNOWN=g;f.Deferred.STATUS_SUCCEEDED=h;f.Deferred.STATUS_CANCELED=j;f.Deferred.STATUS_FAILED=i;});
__d("KeyedCallbackManager",["CallbackManagerController","deferred","ErrorUtils","copyProperties"],function(a,b,c,d,e,f){var g=b('CallbackManagerController'),h=b('deferred').Deferred,i=b('ErrorUtils'),j=b('copyProperties'),k=function(){this._resources={};this._controller=new g(this._constructCallbackArg.bind(this));};j(k.prototype,{executeOrEnqueue:function(l,m){if(!(l instanceof Array)){var n=l,o=m;l=[l];m=function(p){o(p[n]);};}l=l.filter(function(p){var q=(p!==null&&p!==undefined);if(!q)i.applyWithGuard(function(){throw new Error('KeyedCallbackManager.executeOrEnqueue: key '+JSON.stringify(p)+' is invalid');});return q;});return this._controller.executeOrEnqueue(l,m);},deferredExecuteOrEnqueue:function(l){var m=new h();this.executeOrEnqueue(l,m.succeed.bind(m));return m;},unsubscribe:function(l){this._controller.unsubscribe(l);},reset:function(){this._controller.reset();this._resources={};},getUnavailableResources:function(l){var m=this._controller.getRequest(l),n=[];if(m)n=m.request.filter(function(o){return !this._resources[o];}.bind(this));return n;},getUnavailableResourcesFromRequest:function(l){var m=Array.isArray(l)?l:[l];return m.filter(function(n){if(n!==null&&n!==undefined)return !this._resources[n];},this);},addResourcesAndExecute:function(l){j(this._resources,l);this._controller.runPossibleCallbacks();},setResource:function(l,m){this._resources[l]=m;this._controller.runPossibleCallbacks();},getResource:function(l){return this._resources[l];},getAllResources:function(){return this._resources;},dumpResources:function(){var l={};for(var m in this._resources){var n=this._resources[m];if(typeof n==='object')n=j({},n);l[m]=n;}return l;},_constructCallbackArg:function(l){var m={};for(var n=0;n<l.length;n++){var o=l[n],p=this._resources[o];if(typeof p=='undefined')return false;m[o]=p;}return [m];}});e.exports=k;});
__d("BaseAsyncLoader",["KeyedCallbackManager","copyProperties"],function(a,b,c,d,e,f){var g=b('KeyedCallbackManager'),h=b('copyProperties'),i={};function j(l,m,n){var o=new g(),p=false,q=[];function r(){if(!q.length||p)return;p=true;t.defer();}function s(w){p=false;w.forEach(o.unsubscribe.bind(o));r();}function t(){var w={},x=[];q=q.filter(function(z){var aa=o.getUnavailableResources(z);if(aa.length){aa.forEach(function(ba){w[ba]=true;});x.push(z);return true;}return false;});var y=Object.keys(w);if(y.length){n(l,y,x,u.curry(x),v.curry(x));}else p=false;}function u(w,x){var y=x.payload[m]||x.payload;o.addResourcesAndExecute(y);s(w);}function v(w){s(w);}return {get:function(w,x){var y=o.executeOrEnqueue(w,x),z=o.getUnavailableResources(y);if(z.length){q.push(y);r();}},getCachedKeys:function(){return Object.keys(o.getAllResources());},getNow:function(w){return o.getResource(w)||null;},set:function(w){o.addResourcesAndExecute(w);}};}function k(l,m){throw ('BaseAsyncLoader can\'t be instantiated');}h(k.prototype,{_getLoader:function(){if(!i[this._endpoint])i[this._endpoint]=j(this._endpoint,this._type,this.send);return i[this._endpoint];},get:function(l,m){return this._getLoader().get(l,m);},getCachedKeys:function(){return this._getLoader().getCachedKeys();},getNow:function(l){return this._getLoader().getNow(l);},reset:function(){i[this._endpoint]=null;},set:function(l){this._getLoader().set(l);}});e.exports=k;});
__d("AjaxLoader",["copyProperties","FBAjaxRequest","BaseAsyncLoader"],function(a,b,c,d,e,f){var g=b('copyProperties'),h=b('FBAjaxRequest'),i=b('BaseAsyncLoader');function j(k,l){this._endpoint=k;this._type=l;}g(j.prototype,i.prototype);j.prototype.send=function(k,l,m,n,o){var p=new h('GET',k,{ids:l});p.onJSON=function(q){n({payload:q.json});};p.onError=o;p.send();};e.exports=j;});
__d("ChannelConstants",[],function(a,b,c,d,e,f){var g='channel/',h={ON_SHUTDOWN:g+'shutdown',ON_INVALID_HISTORY:g+'invalid_history',ON_CONFIG:g+'config',ON_ENTER_STATE:g+'enter_state',ON_EXIT_STATE:g+'exit_state',OK:'ok',ERROR:'error',ERROR_MAX:'error_max',ERROR_MISSING:'error_missing',ERROR_MSG_TYPE:'error_msg_type',ERROR_SHUTDOWN:'error_shutdown',ERROR_STALE:'error_stale',SYS_OWNER:'sys_owner',SYS_NONOWNER:'sys_nonowner',SYS_ONLINE:'sys_online',SYS_OFFLINE:'sys_offline',SYS_TIMETRAVEL:'sys_timetravel',HINT_AUTH:'shutdown auth',HINT_CONN:'shutdown conn',HINT_DISABLED:'shutdown disabled',HINT_INVALID_STATE:'shutdown invalid state',HINT_MAINT:'shutdown maint',HINT_UNSUPPORTED:'shutdown unsupported',reason_Unknown:0,reason_AsyncError:1,reason_TooLong:2,reason_Refresh:3,reason_RefreshDelay:4,reason_UIRestart:5,reason_NeedSeq:6,reason_PrevFailed:7,reason_IFrameLoadGiveUp:8,reason_IFrameLoadRetry:9,reason_IFrameLoadRetryWorked:10,reason_PageTransitionRetry:11,reason_IFrameLoadMaxSubdomain:12,reason_NoChannelInfo:13,reason_NoChannelHost:14,getArbiterType:function(i){return g+'message:'+i;}};e.exports=h;});
__d("ShortProfiles",["ArbiterMixin","AjaxLoader","Env","FBAjaxRequest","JSLogger","copyProperties"],function(a,b,c,d,e,f){var g=b('ArbiterMixin'),h=b('AjaxLoader'),i=b('Env'),j=b('FBAjaxRequest'),k=b('JSLogger'),l=b('copyProperties'),m='/ajax/chat/user_info.php',n='/ajax/chat/user_info_all.php',o=new h(m,'profiles'),p=false,q=k.create('short_profiles');function r(){if(!p){q.log('fetch_all');p=true;var u=new j('GET',n,{viewer:i.user});u.onJSON=function(v){o.set(v.json);t.inform('updated');};u.send();}}function s(u){return JSON.parse(JSON.stringify(u));}var t={};l(t,g,{get:function(u,v){this.getMulti([u],function(w){v(w[u],u);});},getMulti:function(u,v){function w(x){v(s(x));}o.get(u,w);},getNow:function(u){return s(o.getNow(u)||null);},getNowUnsafe:function(u){return o.getNow(u)||null;},getCachedProfileIDs:function(){return o.getCachedKeys();},hasAll:function(){return p;},fetchAll:function(){r();},set:function(u,v){var w={};w[u]=v;this.setMulti(w);},setMulti:function(u){o.set(s(u));}});e.exports=t;});
__d("ClickTTIIdentifiers",[],function(a,b,c,d,e,f){var g={types:{TIMELINE_SEE_LIKERS:'timeline:seelikes'},getUserActionID:function(h){return '{"ua_id":"'+h+'"}';}};e.exports=g;});
__d("ExecutionEnvironment",[],function(a,b,c,d,e,f){var g=typeof window!=='undefined',h={canUseDOM:g,canUseWorkers:typeof Worker!=='undefined',isInWorker:!g,global:new Function('return this;')()};e.exports=h;});
__d("ReactCurrentOwner",[],function(a,b,c,d,e,f){var g={current:null};e.exports=g;});
__d("CSSProperty",[],function(a,b,c,d,e,f){var g={fillOpacity:true,fontWeight:true,opacity:true,orphans:true,zIndex:true,zoom:true},h={isUnitlessNumber:g};e.exports=h;});
__d("dangerousStyleValue",["CSSProperty"],function(a,b,c,d,e,f){var g=b('CSSProperty');function h(i,j){var k=j==null||typeof j==='boolean'||j==='';if(k)return '';var l=isNaN(j);if(l||j===0||g.isUnitlessNumber[i])return ''+j;return j+'px';}e.exports=h;});
__d("throwIf",[],function(a,b,c,d,e,f){var g=function(h,i){if(h)throw new Error(i);};e.exports=g;});
__d("escapeTextForBrowser",["throwIf"],function(a,b,c,d,e,f){var g=b('throwIf'),h,i={"&":"&amp;",">":"&gt;","<":"&lt;","\"":"&quot;","'":"&#x27;","/":"&#x2f;"};function j(l){return i[l];}var k=function(l){var m=typeof l,n=m==='object';if(l===''||n){return '';}else if(m==='string'){return l.replace(/[&><"'\/]/g,j);}else return (''+l).replace(/[&><"'\/]/g,j);};e.exports=k;});
__d("memoizeStringOnly",[],function(a,b,c,d,e,f){function g(h){var i={};return function(j){if(i.hasOwnProperty(j)){return i[j];}else return i[j]=h.call(this,j);};}e.exports=g;});
__d("CSSPropertyOperations",["dangerousStyleValue","escapeTextForBrowser","hyphenate","memoizeStringOnly"],function(a,b,c,d,e,f){var g=b('dangerousStyleValue'),h=b('escapeTextForBrowser'),i=b('hyphenate'),j=b('memoizeStringOnly'),k=j(function(m){return h(i(m));}),l={createMarkupForStyles:function(m){var n='';for(var o in m){if(!m.hasOwnProperty(o))continue;var p=m[o];if(p!=null){n+=k(o)+':';n+=g(o,p)+';';}}return n||null;},setValueForStyles:function(m,n){var o=m.style;for(var p in n){if(!n.hasOwnProperty(p))continue;var q=n[p];o[p]=g(p,q);}}};e.exports=l;});
__d("Danger",["ExecutionEnvironment","throwIf"],function(a,b,c,d,e,f){var g=b('ExecutionEnvironment'),h=b('throwIf'),i,j,k,l,m={};function n(t){var u=t.tagName;return m[u]||(m[u]=document.createElement(u));}function o(t,u,v){if(v){if(v.nextSibling){return t.insertBefore(u,v.nextSibling);}else return t.appendChild(u);}else return t.insertBefore(u,t.firstChild);}function p(t,u,v){var w,x=u.length;for(var y=0;y<x;y++)w=o(t,u[0],w||v);}function q(t,u,v){var w=n(t);w.innerHTML=u;var x=w.childNodes,y=v?t.childNodes[v-1]:null;p(t,x,y);}function r(t,u){var v=t.parentNode,w=n(v);w.innerHTML=u;var x=w.childNodes;v.replaceChild(x[0],t);}var s={dangerouslyInsertMarkupAt:q,dangerouslyReplaceNodeWithMarkup:r};e.exports=s;});
__d("insertNodeAt",[],function(a,b,c,d,e,f){function g(h,i,j){var k=h.childNodes,l=h.childNodes[j];if(l===i)return i;if(i.parentNode)i.parentNode.removeChild(i);if(j>=k.length){h.appendChild(i);}else h.insertBefore(i,k[j]);return i;}e.exports=g;});
__d("keyOf",[],function(a,b,c,d,e,f){var g=function(h){var i;for(i in h){if(!h.hasOwnProperty(i))continue;return i;}return null;};e.exports=g;});
__d("DOMChildrenOperations",["Danger","insertNodeAt","keyOf","throwIf"],function(a,b,c,d,e,f){var g=b('Danger'),h=b('insertNodeAt'),i=b('keyOf'),j=b('throwIf'),k,l=i({moveFrom:null}),m=i({insertMarkup:null}),n=i({removeAt:null}),o=function(u,v){var w,x,y;for(var z=0;z<v.length;z++){x=v[z];if(l in x){w=w||[];y=x.moveFrom;w[y]=u.childNodes[y];}else if(n in x){w=w||[];y=x.removeAt;w[y]=u.childNodes[y];}}return w;},p=function(u,v){for(var w=0;w<v.length;w++){var x=v[w];if(x)u.removeChild(v[w]);}},q=function(u,v,w){var x,y,z=-1,aa;for(var ba=0;ba<v.length;ba++){aa=v[ba];if(l in aa){x=w[aa.moveFrom];y=aa.finalIndex;h(u,x,y);}else if(!(n in aa))if(m in aa){y=aa.finalIndex;var ca=aa.insertMarkup;g.dangerouslyInsertMarkupAt(u,ca,y);}}},r=function(u,v){var w=o(u,v);if(w)p(u,w);q(u,v,w);},s=function(u,v,w){u.childNodes[v].nodeValue=w;},t={dangerouslyReplaceNodeWithMarkup:g.dangerouslyReplaceNodeWithMarkup,manageChildren:r,setTextNodeValueAtIndex:s};e.exports=t;});
__d("DOMProperty",["invariant"],function(a,b,c,d,e,f){var g=b('invariant'),h={isStandardName:{},getAttributeName:{},getPropertyName:{},getMutationMethod:{},mustUseAttribute:{},mustUseProperty:{},hasBooleanValue:{},hasSideEffects:{},isCustomAttribute:RegExp.prototype.test.bind(/^(data|aria)-[a-z_][a-z\d_.\-]*$/)},i=1,j=2,k=4,l=8,m={accept:null,action:null,ajaxify:i,allowFullScreen:i|k,alt:null,autoComplete:null,autoplay:k,cellPadding:null,cellSpacing:null,checked:j|k,className:j,colSpan:null,contentEditable:null,controls:j|k,data:null,dir:null,disabled:j|k,enctype:null,height:null,href:null,htmlFor:null,method:null,multiple:j|k,name:null,poster:null,preload:null,placeholder:null,rel:null,required:k,role:i,scrollLeft:j,scrollTop:j,selected:j|k,spellCheck:null,src:null,style:null,tabIndex:null,target:null,title:null,type:null,value:j|l,width:null,wmode:i,cx:j,cy:j,d:j,fill:j,fx:j,fy:j,points:j,r:j,stroke:j,strokeLinecap:j,strokeWidth:j,transform:j,x:j,x1:j,x2:j,version:j,viewBox:j,y:j,y1:j,y2:j,spreadMethod:j,offset:j,stopColor:j,stopOpacity:j,gradientUnits:j,gradientTransform:j},n={className:'class',htmlFor:'for',strokeLinecap:'stroke-linecap',strokeWidth:'stroke-width',stopColor:'stop-color',stopOpacity:'stop-opacity'},o={autoComplete:'autocomplete',spellCheck:'spellcheck'},p={className:function(t,u){t.className=u||'';}};for(var q in m){h.isStandardName[q]=true;h.getAttributeName[q]=n[q]||q.toLowerCase();h.getPropertyName[q]=o[q]||q;var r=p[q];if(r)h.getMutationMethod[q]=r;var s=m[q];h.mustUseAttribute[q]=s&i;h.mustUseProperty[q]=s&j;h.hasBooleanValue[q]=s&k;h.hasSideEffects[q]=s&l;g(!h.mustUseAttribute[q]||!h.mustUseProperty[q]);g(h.mustUseProperty[q]||!h.hasSideEffects[q]);}e.exports=h;});
__d("DOMPropertyOperations",["DOMProperty","escapeTextForBrowser","memoizeStringOnly"],function(a,b,c,d,e,f){var g=b('DOMProperty'),h=b('escapeTextForBrowser'),i=b('memoizeStringOnly'),j=i(function(l){return h(l)+'="';}),k={createMarkupForProperty:function(l,m){if(g.isStandardName[l]){if(m==null||g.hasBooleanValue[l]&&!m)return '';var n=g.getAttributeName[l];return j(n)+h(m)+'"';}else if(g.isCustomAttribute(l)){if(m==null)return '';return j(l)+h(m)+'"';}else return null;},setValueForProperty:function(l,m,n){if(g.isStandardName[m]){var o=g.getMutationMethod[m];if(o){o(l,n);}else if(g.mustUseAttribute[m]){if(g.hasBooleanValue[m]&&!n){l.removeAttribute(g.getAttributeName[m]);}else l.setAttribute(g.getAttributeName[m],n);}else{var p=g.getPropertyName[m];if(!g.hasSideEffects[m]||l[p]!==n)l[p]=n;}}else if(g.isCustomAttribute(m))l.setAttribute(m,n);}};e.exports=k;});
__d("BrowserEnv",[],function(a,b,c,d,e,f){var g={currentScrollLeft:0,currentScrollTop:0,browserInfo:null,refreshAuthoritativeScrollValues:function(){g.currentScrollLeft=document.body.scrollLeft+document.documentElement.scrollLeft;g.currentScrollTop=document.body.scrollTop+document.documentElement.scrollTop;}};e.exports=g;});
__d("keyMirror",["throwIf"],function(a,b,c,d,e,f){var g=b('throwIf'),h='NOT_OBJECT_ERROR',i=function(j){var k={},l;g(!(j instanceof Object)||Array.isArray(j),h);for(l in j){if(!j.hasOwnProperty(l))continue;k[l]=l;}return k;};e.exports=i;});
__d("EventConstants",["keyMirror"],function(a,b,c,d,e,f){var g=b('keyMirror'),h=g({bubbled:null,captured:null}),i=g({topBlur:null,topChange:null,topClick:null,topDOMCharacterDataModified:null,topDoubleClick:null,topFocus:null,topKeyDown:null,topKeyPress:null,topKeyUp:null,topMouseDown:null,topMouseMove:null,topMouseOut:null,topMouseOver:null,topMouseUp:null,topMouseWheel:null,topScroll:null,topSubmit:null,topTouchCancel:null,topTouchEnd:null,topTouchMove:null,topTouchStart:null}),j={topLevelTypes:i,PropagationPhases:h};e.exports=j;});
__d("PooledClass",[],function(a,b,c,d,e,f){var g=function(o){var p=this;if(p.instancePool.length){var q=p.instancePool.pop();p.call(q,o);return q;}else return new p(o);},h=function(o,p){var q=this;if(q.instancePool.length){var r=q.instancePool.pop();q.call(r,o,p);return r;}else return new q(o,p);},i=function(o,p,q,r,s){var t=this;if(t.instancePool.length){var u=t.instancePool.pop();t.call(u,o,p,q,r,s);return u;}else return new t(o,p,q,r,s);},j=function(o){var p=this;if(o.destructor)o.destructor();if(p.instancePool.length<p.poolSize)p.instancePool.push(o);},k=10,l=g,m=function(o,p){var q=o;q.instancePool=[];q.getPooled=p||l;if(!q.poolSize)q.poolSize=k;q.release=j;return q;},n={addPoolingTo:m,oneArgumentPooler:g,twoArgumentPooler:h,fiveArgumentPooler:i};e.exports=n;});
__d("TouchEventUtils",[],function(a,b,c,d,e,f){var g={extractSingleTouch:function(h){var i=h.touches,j=h.changedTouches,k=i&&i.length>0,l=j&&j.length>0;return !k&&l?j[0]:k?i[0]:h;}};e.exports=g;});
__d("AbstractEvent",["BrowserEnv","PooledClass","TouchEventUtils","throwIf"],function(a,b,c,d,e,f){var g=b('BrowserEnv'),h=b('PooledClass'),i=b('TouchEventUtils'),j=b('throwIf'),k,l=20;function m(n,o,p,q,r){this.type=n;this.abstractTargetID=o||'';this.originatingTopLevelEventType=p;this.nativeEvent=q;this.data=r;this.target=q&&q.target;this._dispatchListeners=null;this._dispatchIDs=null;this.isPropagationStopped=false;}m.poolSize=l;m.prototype.destructor=function(){this.target=null;this._dispatchListeners=null;this._dispatchIDs=null;};h.addPoolingTo(m,h.fiveArgumentPooler);m.prototype.stopPropagation=function(){this.isPropagationStopped=true;if(this.nativeEvent.stopPropagation)this.nativeEvent.stopPropagation();this.nativeEvent.cancelBubble=true;};m.prototype.preventDefault=function(){m.preventDefaultOnNativeEvent(this.nativeEvent);};m.preventDefaultOnNativeEvent=function(n){if(n.preventDefault){n.preventDefault();}else n.returnValue=false;};m.normalizeScrollDataFromTarget=function(n){return {scrollTop:n.scrollTop,scrollLeft:n.scrollLeft,clientWidth:n.clientWidth,clientHeight:n.clientHeight,scrollHeight:n.scrollHeight,scrollWidth:n.scrollWidth};};m.normalizeMouseWheelData=function(n){var o=0,p=0,q=0;if(n.wheelDelta)o=n.wheelDelta/120;if(n.detail)o=-n.detail/3;q=o;if(n.axis!==undefined&&n.axis===n.HORIZONTAL_AXIS){q=0;p=-o;}if(n.wheelDeltaY!==undefined)q=n.wheelDeltaY/120;if(n.wheelDeltaX!==undefined)p=-n.wheelDeltaX/120;return {delta:o,deltaX:p,deltaY:q};};m.isNativeClickEventRightClick=function(n){return n.which?n.which===3:n.button?n.button===2:false;};m.normalizePointerData=function(n){return {globalX:m.eventPageX(n),globalY:m.eventPageY(n),rightMouseButton:m.isNativeClickEventRightClick(n)};};m.normalizeDragEventData=function(n,o,p,q,r){return {globalX:o,globalY:p,startX:q,startY:r};};m.eventPageY=function(n){var o=i.extractSingleTouch(n);if(o){return o.pageY;}else if(typeof n.pageY!=='undefined'){return n.pageY;}else return n.clientY+g.currentPageScrollTop;};m.eventPageX=function(n){var o=i.extractSingleTouch(n);if(o){return o.pageX;}else if(typeof n.pageX!=='undefined'){return n.pageX;}else return n.clientX+g.currentPageScrollLeft;};m.persistentCloneOf=function(n){return new m(n.type,n.abstractTargetID,n.originatingTopLevelEventType,n.nativeEvent,n.data,n.target);};e.exports=m;});
__d("CallbackRegistry",[],function(a,b,c,d,e,f){var g={},h={putListener:function(i,j,k){var l=g[j]||(g[j]={});l[i]=k;},getListener:function(i,j){var k=g[j];return k&&k[i];},deleteListener:function(i,j){var k=g[j];if(k)delete k[i];},__purge:function(){g={};}};e.exports=h;});
__d("EventPluginUtils",["EventConstants","AbstractEvent","invariant"],function(a,b,c,d,e,f){var g=b('EventConstants'),h=b('AbstractEvent'),i=b('invariant'),j=g.topLevelTypes;function k(x){return x===j.topMouseUp||x===j.topTouchEnd||x===j.topTouchCancel;}function l(x){return x===j.topMouseMove||x===j.topTouchMove;}function m(x){return x===j.topMouseDown||x===j.topTouchStart;}function n(x,y){var z=h.eventPageX(y),aa=h.eventPageY(y);x.pageX=z;x.pageY=aa;}function o(x,y){var z=h.eventPageX(y),aa=h.eventPageY(y);return Math.pow(Math.pow(z-x.pageX,2)+Math.pow(aa-x.pageY,2),.5);}var p;function q(x,y){var z=x._dispatchListeners,aa=x._dispatchIDs;if(Array.isArray(z)){var ba;for(ba=0;ba<z.length&&!x.isPropagationStopped;ba++)y(x,z[ba],aa[ba]);}else if(z)y(x,z,aa);}function r(x,y,z){y(x,z);}function s(x,y){q(x,y);x._dispatchListeners=null;x._dispatchIDs=null;}function t(x){var y=x._dispatchListeners,z=x._dispatchIDs;if(Array.isArray(y)){var aa;for(aa=0;aa<y.length&&!x.isPropagationStopped;aa++)if(y[aa](x,z[aa]))return z[aa];}else if(y)if(y(x,z))return z;return null;}function u(x){var y=x._dispatchListeners,z=x._dispatchIDs;i(!Array.isArray(y));var aa=y?y(x,z):null;x._dispatchListeners=null;x._dispatchIDs=null;return aa;}function v(x){return !!x._dispatchListeners;}var w={isEndish:k,isMoveish:l,isStartish:m,storePageCoordsIn:n,eventDistance:o,executeDispatchesInOrder:s,executeDispatchesInOrderStopAtTrue:t,executeDirectDispatch:u,hasDispatches:v,executeDispatch:r};e.exports=w;});
__d("accumulate",["throwIf"],function(a,b,c,d,e,f){var g=b('throwIf'),h='INVALID_ACCUM_ARGS';function i(j,k){var l=j==null,m=k===null;if(m){return j;}else if(l){return k;}else{var n=Array.isArray(j),o=Array.isArray(k);if(n){return j.concat(k);}else if(o){return [j].concat(k);}else return [j,k];}}e.exports=i;});
__d("forEachAccumulated",[],function(a,b,c,d,e,f){var g=function(h,i,j){if(Array.isArray(h)){h.forEach(i,j);}else if(h)i.call(j,h);};e.exports=g;});
__d("EventPropagators",["CallbackRegistry","EventConstants","accumulate","forEachAccumulated"],function(a,b,c,d,e,f){var g=b('CallbackRegistry'),h=b('EventConstants'),i=b('accumulate'),j=b('forEachAccumulated'),k=g.getListener,l=h.PropagationPhases,m={InstanceHandle:null,injectInstanceHandle:function(w){m.InstanceHandle=w;},validate:function(){var w=!m.InstanceHandle||!m.InstanceHandle.traverseTwoPhase||!m.InstanceHandle.traverseEnterLeave;if(w)throw new Error('InstanceHandle not injected before use!');}};function n(w,x,y){var z=x.type.phasedRegistrationNames[y];return k(w,z);}function o(w,x,y){var z=x?l.bubbled:l.captured,aa=n(w,y,z);if(aa){y._dispatchListeners=i(y._dispatchListeners,aa);y._dispatchIDs=i(y._dispatchIDs,w);}}function p(w){if(w&&w.type.phasedRegistrationNames)m.InstanceHandle.traverseTwoPhase(w.abstractTargetID,o,w);}function q(w,x,y){if(y&&y.type.registrationName){var z=k(w,y.type.registrationName);if(z){y._dispatchListeners=i(y._dispatchListeners,z);y._dispatchIDs=i(y._dispatchIDs,w);}}}function r(w){if(w&&w.type.registrationName)q(w.abstractTargetID,null,w);}function s(w){j(w,p);}function t(w,x,y,z){m.InstanceHandle.traverseEnterLeave(y,z,q,w,x);}function u(w){j(w,r);}var v={accumulateTwoPhaseDispatches:s,accumulateDirectDispatches:u,accumulateEnterLeaveDispatches:t,injection:m};e.exports=v;});
__d("mergeHelpers",["keyMirror","throwIf"],function(a,b,c,d,e,f){var g=b('keyMirror'),h=b('throwIf'),i=36,j=g({MERGE_ARRAY_FAIL:null,MERGE_CORE_FAILURE:null,MERGE_TYPE_USAGE_FAILURE:null,MERGE_DEEP_MAX_LEVELS:null,MERGE_DEEP_NO_ARR_STRATEGY:null}),k=function(m){return typeof m!=='object'||m===null;},l={MAX_MERGE_DEPTH:i,isTerminal:k,normalizeMergeArg:function(m){return m===undefined||m===null?{}:m;},checkMergeArrayArgs:function(m,n){h(!Array.isArray(m)||!Array.isArray(n),j.MERGE_CORE_FAILURE);},checkMergeObjectArgs:function(m,n){l.checkMergeObjectArg(m);l.checkMergeObjectArg(n);},checkMergeObjectArg:function(m){h(k(m)||Array.isArray(m),j.MERGE_CORE_FAILURE);},checkMergeLevel:function(m){h(m>=i,j.MERGE_DEEP_MAX_LEVELS);},checkArrayStrategy:function(m){h(m!==undefined&&!(m in l.ArrayStrategies),j.MERGE_DEEP_NO_ARR_STRATEGY);},ArrayStrategies:g({Clobber:true,IndexByIndex:true}),ERRORS:j};e.exports=l;});
__d("mergeInto",["mergeHelpers"],function(a,b,c,d,e,f){var g=b('mergeHelpers'),h=g.checkMergeObjectArg;function i(j,k){h(j);if(k!=null){h(k);for(var l in k){if(!k.hasOwnProperty(l))continue;j[l]=k[l];}}}e.exports=i;});
__d("merge",["mergeInto"],function(a,b,c,d,e,f){var g=b('mergeInto'),h=function(i,j){var k={};g(k,i);g(k,j);return k;};e.exports=h;});
__d("EventPluginHub",["AbstractEvent","CallbackRegistry","EventPluginUtils","EventPropagators","ExecutionEnvironment","accumulate","forEachAccumulated","keyMirror","merge","throwIf"],function(a,b,c,d,e,f){var g=b('AbstractEvent'),h=b('CallbackRegistry'),i=b('EventPluginUtils'),j=b('EventPropagators'),k=b('ExecutionEnvironment'),l=b('accumulate'),m=b('forEachAccumulated'),n=b('keyMirror'),o=b('merge'),p=b('throwIf'),q=h.deleteListener,r=n({DOUBLE_REGISTER:null,DOUBLE_ENQUEUE:null,DEPENDENCY_ERROR:null}),s={injectInstanceHandle:function(ea){j.injection.injectInstanceHandle(ea);},EventPluginOrder:null,injectEventPluginOrder:function(ea){s.EventPluginOrder=ea;s._recomputePluginsList();},plugins:[],injectEventPluginsByName:function(ea){s.pluginsByName=o(s.pluginsByName,ea);s._recomputePluginsList();},pluginsByName:{},_recomputePluginsList:function(){var ea=function(ha,ia){var ja=s.EventPluginOrder.indexOf(ha);p(ja===-1,r.DEPENDENCY_ERROR+ha);if(!s.plugins[ja]){s.plugins[ja]=ia;for(var ka in ia.abstractEventTypes){var la=ia.abstractEventTypes[ka];w(la,ia);}}};if(s.EventPluginOrder){var fa=s.pluginsByName;for(var ga in fa)ea(ga,fa[ga]);}}},t={},u=[],v=[];function w(ea,fa){var ga,ha=ea.phasedRegistrationNames;if(ha){for(ga in ha){if(!ha.hasOwnProperty(ga))continue;t[ha[ga]]=fa;u.push(ha[ga]);}}else if(ea.registrationName){t[ea.registrationName]=fa;u.push(ea.registrationName);}}function x(ea){if(ea.type.registrationName){return t[ea.type.registrationName];}else for(var fa in ea.type.phasedRegistrationNames){if(!ea.type.phasedRegistrationNames.hasOwnProperty(fa))continue;var ga=t[ea.type.phasedRegistrationNames[fa]];if(ga)return ga;}return null;}var y=function(ea){var fa;for(fa=0;fa<u.length;fa++)q(ea,u[fa]);},z=function(ea,fa,ga,ha){var ia,ja=s.plugins,ka=ja.length;for(var la=0;la<ka;la++){var ma=ja[la],na=ma&&ma.extractAbstractEvents(ea,fa,ga,ha);if(na)ia=l(ia,na);}return ia;},aa=function(ea){if(ea)v=l(v,ea);},ba=function(ea){if(ea){var fa=x(ea),ga=fa&&fa.executeDispatch;i.executeDispatchesInOrder(ea,ga||i.executeDispatch);g.release(ea);}},ca=function(){var ea=v;v=null;m(ea,ba);},da={registrationNames:t,registrationNamesArr:u,putListener:h.putListener,getListener:h.getListener,deleteAllListeners:y,extractAbstractEvents:z,enqueueAbstractEvents:aa,processAbstractEventQueue:ca,injection:s};if(k.canUseDOM)window.EventPluginHub=da;e.exports=da;});
__d("EventListener",["Event"],function(a,b,c,d,e,f){var g=b('Event'),h={listen:g.listen,capture:function(i,j,k){if(!i.addEventListener){return;}else i.addEventListener(j,k,true);}};e.exports=h;});
__d("NormalizedEventListener",["EventListener"],function(a,b,c,d,e,f){var g=b('EventListener');function h(k){var l=k||window.event,m='target' in l,n=l.target||l.srcElement||window,o=(n.nodeType===3)?n.parentNode:n;if(!m||l.target!==o)l.target=o;return l;}function i(k){return function(l){k(h(l));};}var j={listen:function(k,l,m){g.listen(k,l,i(m));},capture:function(k,l,m){g.capture(k,l,i(m));}};e.exports=j;});
__d("isEventSupported",["ExecutionEnvironment"],function(a,b,c,d,e,f){var g=b('ExecutionEnvironment'),h;if(g.canUseDOM)h=document.createElement('div');function i(j,k){if(!h||(k&&!h.addEventListener))return false;var l=document.createElement('div'),m='on'+j,n=m in l;if(!n){l.setAttribute(m,'');n=typeof l[m]==='function';if(typeof l[m]!=='undefined')l[m]=undefined;l.removeAttribute(m);}l=null;return n;}e.exports=i;});
__d("ReactEvent",["BrowserEnv","EventConstants","EventPluginHub","ExecutionEnvironment","NormalizedEventListener","invariant","isEventSupported"],function(a,b,c,d,e,f){var g=b('BrowserEnv'),h=b('EventConstants'),i=b('EventPluginHub'),j=b('ExecutionEnvironment'),k=b('NormalizedEventListener'),l=b('invariant'),m=b('isEventSupported'),n=i.registrationNames,o=h.topLevelTypes,p=k.listen,q=k.capture,r=false,s,t;function u(ea,fa,ga){p(ga,fa,da.TopLevelCallbackCreator.createTopLevelCallback(ea));}function v(ea,fa,ga){q(ga,fa,da.TopLevelCallbackCreator.createTopLevelCallback(ea));}function w(){p(window,'scroll',function(ea){if(ea.target===window)g.refreshAuthoritativeScrollValues();});}function x(){p(window,'resize',function(ea){if(ea.target===window)g.refreshAuthoritativeScrollValues();});}function y(ea){l(!r);var fa=document;w();x();u(o.topMouseOver,'mouseover',fa);u(o.topMouseDown,'mousedown',fa);u(o.topMouseUp,'mouseup',fa);u(o.topMouseMove,'mousemove',fa);u(o.topMouseOut,'mouseout',fa);u(o.topClick,'click',fa);u(o.topDoubleClick,'dblclick',fa);u(o.topMouseWheel,'mousewheel',fa);if(ea){u(o.topTouchStart,'touchstart',fa);u(o.topTouchEnd,'touchend',fa);u(o.topTouchMove,'touchmove',fa);u(o.topTouchCancel,'touchcancel',fa);}u(o.topKeyUp,'keyup',fa);u(o.topKeyPress,'keypress',fa);u(o.topKeyDown,'keydown',fa);u(o.topChange,'change',fa);u(o.topDOMCharacterDataModified,'DOMCharacterDataModified',fa);u(o.topMouseWheel,'DOMMouseScroll',fa);if(m('scroll',true)){v(o.topScroll,'scroll',fa);}else u(o.topScroll,'scroll',window);if(m('focus',true)){v(o.topFocus,'focus',fa);v(o.topBlur,'blur',fa);}else if(m('focusin')){u(o.topFocus,'focusin',fa);u(o.topBlur,'focusout',fa);}}function z(ea,fa,ga,ha){var ia=i.extractAbstractEvents(ea,fa,ga,ha);i.enqueueAbstractEvents(ia);i.processAbstractEventQueue();}function aa(ea){l(j.canUseDOM);da.TopLevelCallbackCreator.setEnabled(ea);}function ba(){return da.TopLevelCallbackCreator.isEnabled();}function ca(ea,fa){l(j.canUseDOM);if(!r){da.TopLevelCallbackCreator=fa;y(ea);r=true;}}var da={TopLevelCallbackCreator:null,handleTopLevel:z,setEnabled:aa,isEnabled:ba,ensureListening:ca,registrationNames:n,putListener:i.putListener,getListener:i.getListener,deleteAllListeners:i.deleteAllListeners,trapBubbledEvent:u,trapCapturedEvent:v};e.exports=da;});
__d("getDOMNodeID",[],function(a,b,c,d,e,f){function g(h){if(h.getAttributeNode){var i=h.getAttributeNode('id');return i&&i.value||'';}else return h.id||'';}e.exports=g;});
__d("ReactInstanceHandles",["getDOMNodeID","invariant"],function(a,b,c,d,e,f){var g=b('getDOMNodeID'),h=b('invariant'),i='.',j=i.length,k=100;function l(r,s){return r.charAt(s)===i||s===r.length;}function m(r){return r===''||(r.charAt(0)===i&&r.charAt(r.length-1)!==i);}function n(r){var s=g(r);return s&&s.charAt(0)===i;}function o(r){return r?r.substr(0,r.lastIndexOf(i)):'';}function p(r,s,t,u,v,w){r=r||'';s=s||'';h(r!==s);var x=q.getFirstCommonAncestorID(r,s),y=x===s;h(y||x===r);var z=0,aa=y?o:q.nextDescendantID;for(var ba=r;;ba=aa(ba,s)){if((!v||ba!==r)&&(!w||ba!==s))t(ba,y,u);if(ba===s)break;h(z++<k);}}var q={separator:i,getFirstReactDOM:function(r){var s=r;while(s&&s.parentNode!==s){if(n(s))return s;s=s.parentNode;}return null;},findComponentRoot:function(r,s){var t=r.firstChild;while(t){if(s===t.id){return t;}else if(s.indexOf(t.id)===0)return q.findComponentRoot(t,s);t=t.nextSibling;}},getFirstCommonAncestorID:function(r,s){var t=Math.min(r.length,s.length);if(t===0)return '';var u=0;for(var v=0;v<=t;v++)if(l(r,v)&&l(s,v)){u=v;}else if(r.charAt(v)!==s.charAt(v))break;var w=r.substr(0,u);h(m(w));return w;},getReactRootID:function(r){return '.reactRoot['+r+']';},getReactRootIDFromNodeID:function(r){var s=/\.reactRoot\[[^\]]+\]/.exec(r);return s&&s[0];},traverseEnterLeave:function(r,s,t,u,v){var w=q.getFirstCommonAncestorID(r,s);if(w!==r)p(r,w,t,u,false,true);if(w!==s)p(w,s,t,v,true,false);},traverseTwoPhase:function(r,s,t){if(r){p('',r,s,t,true,false);p(r,'',s,t,false,true);}},nextDescendantID:function(r,s){h(m(r)&&m(s));var t=q.getFirstCommonAncestorID(r,s);h(t===r);if(r===s)return r;var u=r.length+j;for(var v=u;v<s.length;v++)if(l(s,v))break;return s.substr(0,v);}};e.exports=q;});
__d("ReactEventTopLevelCallback",["ExecutionEnvironment","ReactEvent","ReactInstanceHandles","getDOMNodeID"],function(a,b,c,d,e,f){var g=b('ExecutionEnvironment'),h=b('ReactEvent'),i=b('ReactInstanceHandles'),j=b('getDOMNodeID'),k=true,l={setEnabled:function(m){k=!!m;},isEnabled:function(){return k;},createTopLevelCallback:function(m){return function(n){if(!k)return;var o=i.getFirstReactDOM(n.target)||g.global,p=j(o),event=n,q=o;h.handleTopLevel(m,event,p,q);};}};e.exports=l;});
__d("ReactMount",["ReactEvent","ReactInstanceHandles","ReactEventTopLevelCallback","$"],function(a,b,c,d,e,f){var g=b('ReactEvent'),h=b('ReactInstanceHandles'),i=b('ReactEventTopLevelCallback'),j=b('$'),k=0,l={},m={};function n(p){return p.firstChild&&p.firstChild.id;}var o={totalInstantiationTime:0,totalInjectionTime:0,useTouchEvents:false,scrollMonitor:function(p,q){q();},prepareTopLevelEvents:function(p){g.ensureListening(o.useTouchEvents,p);},renderComponent:function(p,q){var r=l[n(q)];if(r){var s=p.props;o.scrollMonitor(q,function(){r.replaceProps(s);});return r;}o.prepareTopLevelEvents(i);var t=o.registerContainer(q);l[t]=p;p.mountComponentIntoNode(t,q);return p;},createComponentRenderer:function(p){return function(q){return o.renderComponent(p,q);};},constructAndRenderComponent:function(p,q,r){return o.renderComponent(p(q),r);},constructAndRenderComponentByID:function(p,q,r){return o.constructAndRenderComponent(p,q,j(r));},registerContainer:function(p){var q=n(p);if(q)q=h.getReactRootIDFromNodeID(q);if(!q)q=h.getReactRootID(k++);m[q]=p;return q;},unmountAndReleaseReactRootNode:function(p){var q=n(p),r=l[q];r.unmountComponentFromNode(p);delete l[q];delete m[q];},findReactContainerForID:function(p){var q=h.getReactRootIDFromNodeID(p);return m[q];},findReactRenderedDOMNodeSlow:function(p){var q=o.findReactContainerForID(p);return h.findComponentRoot(q,p);}};e.exports=o;});
__d("ReactDOMNodeCache",["ReactMount"],function(a,b,c,d,e,f){var g=b('ReactMount'),h={},i={purgeEntireCache:function(){h={};return h;},getCachedNodeByID:function(j){return h[j]||(h[j]=document.getElementById(j)||g.findReactRenderedDOMNodeSlow(j));}};e.exports=i;});
__d("getTextContentAccessor",["ExecutionEnvironment"],function(a,b,c,d,e,f){var g=b('ExecutionEnvironment'),h=null;function i(){if(!h&&g.canUseDOM)h='innerText' in document.createElement('div')?'innerText':'textContent';return h;}e.exports=i;});
__d("ReactDOMIDOperations",["CSSPropertyOperations","DOMChildrenOperations","DOMPropertyOperations","ReactDOMNodeCache","getTextContentAccessor","invariant"],function(a,b,c,d,e,f){var g=b('CSSPropertyOperations'),h=b('DOMChildrenOperations'),i=b('DOMPropertyOperations'),j=b('ReactDOMNodeCache'),k=b('getTextContentAccessor'),l=b('invariant'),m={content:'`content` must be set using `updateTextContentByID()`.',dangerouslySetInnerHTML:'`dangerouslySetInnerHTML` must be set using `updateInnerHTMLByID()`.',style:'`style` must be set using `updateStylesByID()`.'},n=k()||'NA',o={updatePropertyByID:function(p,q,r){var s=j.getCachedNodeByID(p);l(!m.hasOwnProperty(q));i.setValueForProperty(s,q,r);},updatePropertiesByID:function(p,q){for(var r in q){if(!q.hasOwnProperty(r))continue;o.updatePropertiesByID(p,r,q[r]);}},updateStylesByID:function(p,q){var r=j.getCachedNodeByID(p);g.setValueForStyles(r,q);},updateInnerHTMLByID:function(p,q){var r=j.getCachedNodeByID(p);r.innerHTML=(q&&q.__html||'').replace(/^ /g,'&nbsp;');},updateTextContentByID:function(p,q){var r=j.getCachedNodeByID(p);r[n]=q;},dangerouslyReplaceNodeWithMarkupByID:function(p,q){var r=j.getCachedNodeByID(p);h.dangerouslyReplaceNodeWithMarkup(r,q);j.purgeEntireCache();},manageChildrenByParentID:function(p,q){var r=j.getCachedNodeByID(p);h.manageChildren(r,q);j.purgeEntireCache();},setTextNodeValueAtIndexByParentID:function(p,q,r){var s=j.getCachedNodeByID(p);h.setTextNodeValueAtIndex(s,q,r);}};e.exports=o;});
__d("ReactOwner",["invariant"],function(a,b,c,d,e,f){var g=b('invariant'),h={isValidOwner:function(i){return !!(i&&typeof i.attachRef==='function'&&typeof i.detachRef==='function');},addComponentAsRefTo:function(i,j,k){g(h.isValidOwner(k));k.attachRef(j,i);},removeComponentAsRefFrom:function(i,j,k){g(h.isValidOwner(k));if(k.refs[j]===i)k.detachRef(j);},Mixin:{attachRef:function(i,j){g(j.isOwnedBy(this));var k=this.refs||(this.refs={});k[i]=j;},detachRef:function(i){delete this.refs[i];}}};e.exports=h;});
__d("ReactInputSelection",[],function(a,b,c,d,e,f){function g(){try{return document.activeElement;}catch(i){}}var h={hasSelectionCapabilities:function(i){return i&&((i.nodeName==='INPUT'&&i.type==='text')||i.nodeName==='TEXTAREA'||i.contentEditable==='true');},getSelectionInformation:function(){var i=g();return {focusedElem:i,selectionRange:h.hasSelectionCapabilities(i)?h.getSelection(i):null};},restoreSelection:function(i){var j=g(),k=i.focusedElem,l=i.selectionRange;if(j!==k&&document.getElementById(k.id)){if(h.hasSelectionCapabilities(k))h.setSelection(k,l);k.focus();}},getSelection:function(i){var j;if(i.contentEditable==='true'&&window.getSelection){j=window.getSelection().getRangeAt(0);var k=j.commonAncestorContainer;if(k&&k.nodeType===3)k=k.parentNode;if(k!==i){return {start:0,end:0};}else return {start:j.startOffset,end:j.endOffset};}if(!document.selection)return {start:i.selectionStart,end:i.selectionEnd};j=document.selection.createRange();if(j.parentElement()!==i)return {start:0,end:0};var l=i.value.length;if(i.nodeName==='INPUT'){return {start:-j.moveStart('character',-l),end:-j.moveEnd('character',-l)};}else{var m=j.duplicate();m.moveToElementText(i);m.setEndPoint('StartToEnd',j);var n=l-m.text.length;m.setEndPoint('StartToStart',j);return {start:l-m.text.length,end:n};}},setSelection:function(i,j){var k,l=j.start,m=j.end;if(typeof m==='undefined')m=l;if(document.selection){if(i.tagName==='TEXTAREA'){var n=(i.value.slice(0,l).match(/\r/g)||[]).length,o=(i.value.slice(l,m).match(/\r/g)||[]).length;l-=n;m-=n+o;}k=i.createTextRange();k.collapse(true);k.moveStart('character',l);k.moveEnd('character',m-l);k.select();}else if(i.contentEditable==='true'){if(i.childNodes.length===1){k=document.createRange();k.setStart(i.childNodes[0],l);k.setEnd(i.childNodes[0],m);var p=window.getSelection();p.removeAllRanges();p.addRange(k);}}else{i.selectionStart=l;i.selectionEnd=Math.min(m,i.value.length);i.focus();}}};e.exports=h;});
__d("mixInto",[],function(a,b,c,d,e,f){var g=function(h,i){var j;for(j in i){if(!i.hasOwnProperty(j))continue;h.prototype[j]=i[j];}};e.exports=g;});
__d("ReactOnDOMReady",["PooledClass","mixInto"],function(a,b,c,d,e,f){var g=b('PooledClass'),h=b('mixInto');function i(j){this._queue=j||null;}h(i,{enqueue:function(j,k){this._queue=this._queue||[];this._queue.push({component:j,callback:k});},notifyAll:function(){var j=this._queue;if(j){this._queue=null;for(var k=0,l=j.length;k<l;k++){var m=j[k].component,n=j[k].callback;n.call(m,m.getDOMNode());}j.length=0;}},reset:function(){this._queue=null;},destructor:function(){this.reset();}});g.addPoolingTo(i);e.exports=i;});
__d("Transaction",["throwIf"],function(a,b,c,d,e,f){var g=b('throwIf'),h='DUAL_TRANSACTION',i='MISSING_TRANSACTION',j={reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers();if(!this.wrapperInitData){this.wrapperInitData=[];}else this.wrapperInitData.length=0;if(!this.timingMetrics)this.timingMetrics={};this.timingMetrics.methodInvocationTime=0;if(!this.timingMetrics.wrapperInitTimes){this.timingMetrics.wrapperInitTimes=[];}else this.timingMetrics.wrapperInitTimes.length=0;if(!this.timingMetrics.wrapperCloseTimes){this.timingMetrics.wrapperCloseTimes=[];}else this.timingMetrics.wrapperCloseTimes.length=0;this._isInTransaction=false;},_isInTransaction:false,getTransactionWrappers:null,isInTransaction:function(){return !!this._isInTransaction;},perform:function(l,m,n,o,p,q,r,s){g(this.isInTransaction(),h);var t=Date.now(),u=null,v;try{this.initializeAll();v=l.call(m,n,o,p,q,r,s);}catch(w){u=w;}finally{var x=Date.now();this.methodInvocationTime+=(x-t);try{this.closeAll();}catch(y){u=u||y;}}if(u)throw u;return v;},initializeAll:function(){this._isInTransaction=true;var l=this.transactionWrappers,m=this.timingMetrics.wrapperInitTimes,n=null;for(var o=0;o<l.length;o++){var p=Date.now(),q=l[o];try{this.wrapperInitData[o]=q.initialize?q.initialize.call(this):null;}catch(r){n=n||r;this.wrapperInitData[o]=k.OBSERVED_ERROR;}finally{var s=m[o],t=Date.now();m[o]=(s||0)+(t-p);}}if(n)throw n;},closeAll:function(){g(!this.isInTransaction(),i);var l=this.transactionWrappers,m=this.timingMetrics.wrapperCloseTimes,n=null;for(var o=0;o<l.length;o++){var p=l[o],q=Date.now(),r=this.wrapperInitData[o];try{if(r!==k.OBSERVED_ERROR)p.close&&p.close.call(this,r);}catch(s){n=n||s;}finally{var t=Date.now(),u=m[o];m[o]=(u||0)+(t-q);}}this.wrapperInitData.length=0;this._isInTransaction=false;if(n)throw n;}},k={Mixin:j,OBSERVED_ERROR:{}};e.exports=k;});
__d("ReactReconcileTransaction",["ExecutionEnvironment","PooledClass","ReactEvent","ReactInputSelection","ReactOnDOMReady","Transaction","mixInto"],function(a,b,c,d,e,f){var g=b('ExecutionEnvironment'),h=b('PooledClass'),i=b('ReactEvent'),j=b('ReactInputSelection'),k=b('ReactOnDOMReady'),l=b('Transaction'),m=b('mixInto'),n={initialize:j.getSelectionInformation,close:j.restoreSelection},o={initialize:function(){var t=i.isEnabled();i.setEnabled(false);return t;},close:function(t){i.setEnabled(t);}},p={initialize:function(){this.reactOnDOMReady.reset();},close:function(){this.reactOnDOMReady.notifyAll();}},q=[n,o,p];function r(){this.reinitializeTransaction();this.reactOnDOMReady=k.getPooled(null);}var s={getTransactionWrappers:function(){if(g.canUseDOM){return q;}else return [];},getReactOnDOMReady:function(){return this.reactOnDOMReady;},destructor:function(){k.release(this.reactOnDOMReady);this.reactOnDOMReady=null;}};m(r,l.Mixin);m(r,s);h.addPoolingTo(r);e.exports=r;});
__d("ReactComponent",["ExecutionEnvironment","ReactCurrentOwner","ReactDOMIDOperations","ReactMount","ReactOwner","ReactReconcileTransaction","invariant","keyMirror","merge"],function(a,b,c,d,e,f){var g=b('ExecutionEnvironment'),h=b('ReactCurrentOwner'),i=b('ReactDOMIDOperations'),j=b('ReactMount'),k=b('ReactOwner'),l=b('ReactReconcileTransaction'),m=b('invariant'),n=b('keyMirror'),o=b('merge'),p='{owner}',q=n({MOUNTED:null,UNMOUNTED:null}),r='You are passing a dynamic array of children. You should set the '+'property "key" to a string that uniquely identifies each child.',s=false;function t(z){return z==null||typeof z==='boolean';}function u(z,aa,ba){if(x.isValidComponent(aa)){var ca=aa.props.key;aa._key=(z?z+':':'')+(ca||(''+ba));}}function v(z){for(var aa=0;aa<z.length;aa++){var ba=z[aa];if(t(ba))return false;u('',ba,aa);}return true;}function w(z,aa,ba){for(var ca=0;ca<aa.length;ca++){var da=aa[ca];if(t(da))continue;u(z,da,ca);ba.push(da);}}var x={isValidComponent:function(z){return !!(z&&typeof z.mountComponentIntoNode==='function'&&typeof z.receiveProps==='function');},LifeCycle:q,DOMIDOperations:i,ReactReconcileTransaction:l,setDOMOperations:function(z){x.DOMIDOperations=z;},setReactReconcileTransaction:function(z){x.ReactReconcileTransaction=z;},Mixin:{getDOMNode:function(){m(g.canUseDOM);m(this._lifeCycleState===q.MOUNTED);var z=this._rootNode;if(!z){z=document.getElementById(this._rootNodeID);if(!z)z=j.findReactRenderedDOMNodeSlow(this._rootNodeID);this._rootNode=z;}return z;},setProps:function(z){this.replaceProps(o(this.props,z));},replaceProps:function(z){var aa=x.ReactReconcileTransaction.getPooled();aa.perform(this.receiveProps,this,z,aa);x.ReactReconcileTransaction.release(aa);},construct:function(z,aa){this.props=z||{};this.props[p]=h.current;this._lifeCycleState=q.UNMOUNTED;if(arguments.length<2)return;if(arguments.length===2){var ba=typeof aa;if(aa==null||ba==='string'||ba==='number'){this.props.children=aa;return;}if(Array.isArray(aa)&&v(aa)){this.props.children=aa;return;}}var ca=null;for(var da=1;da<arguments.length;da++){var ea=arguments[da];if(Array.isArray(ea)){if(ea.length===0)continue;if(ca===null)ca=[];w(da-1,ea,ca);}else if(!t(ea)){if(x.isValidComponent(ea))ea._key=ea.props.key||(''+(da-1));if(ca===null)ca=[];ca.push(ea);}}this.props.children=ca;},mountComponent:function(z,aa){m(this._lifeCycleState===q.UNMOUNTED);var ba=this.props;if(ba.ref!=null)k.addComponentAsRefTo(this,ba.ref,ba[p]);this._rootNodeID=z;this._lifeCycleState=q.MOUNTED;},unmountComponent:function(){m(this._lifeCycleState===q.MOUNTED);var z=this.props;if(z.ref!=null)k.removeComponentAsRefFrom(this,z.ref,z[p]);this._rootNode=null;this._rootNodeID=null;this._lifeCycleState=q.UNMOUNTED;},receiveProps:function(z,aa){m(this._lifeCycleState===q.MOUNTED);var ba=this.props;if(z[p]!==ba[p]||z.ref!==ba.ref){if(ba.ref!=null)k.removeComponentAsRefFrom(this,ba.ref,ba[p]);if(z.ref!=null)k.addComponentAsRefTo(this,z.ref,z[p]);}},mountComponentIntoNode:function(z,aa){var ba=x.ReactReconcileTransaction.getPooled();ba.perform(this._mountComponentIntoNode,this,z,aa,ba);x.ReactReconcileTransaction.release(ba);},_mountComponentIntoNode:function(z,aa,ba){var ca=Date.now(),da=this.mountComponent(z,ba);j.totalInstantiationTime+=(Date.now()-ca);var ea=Date.now(),fa=aa.parentNode;if(fa){var ga=aa.nextSibling;fa.removeChild(aa);aa.innerHTML=da;if(ga){fa.insertBefore(aa,ga);}else fa.appendChild(aa);}else aa.innerHTML=da;j.totalInjectionTime+=(Date.now()-ea);},unmountComponentFromNode:function(z){this.unmountComponent();while(z.lastChild)z.removeChild(z.lastChild);},isOwnedBy:function(z){return this.props[p]===z;}}};function y(z){console&&emptyFunction&&false;}x.Mixin.update=function(z){y('this.update() is deprecated. Use this.setProps()');this.setProps(z);};x.Mixin.updateAll=function(z){y('this.updateAll() is deprecated. Use this.replaceProps()');this.replaceProps(z);};e.exports=x;});
__d("joinClasses",[],function(a,b,c,d,e,f){function g(h){if(!h)h='';var i,j=arguments.length;if(j>1)for(var k=1;k<j;k++){i=arguments[k];i&&(h+=' '+i);}return h;}e.exports=g;});
__d("ReactPropTransferer",["emptyFunction","joinClasses","merge"],function(a,b,c,d,e,f){var g=b('emptyFunction'),h=b('joinClasses'),i=b('merge');function j(m){return function(n,o,p){if(!n.hasOwnProperty(o)){n[o]=p;}else n[o]=m(n[o],p);};}var k={ref:g,className:j(h),style:j(i)},l={TransferStrategies:k,Mixin:{transferPropsTo:function(m){var n={};for(var o in m.props)if(m.props.hasOwnProperty(o))n[o]=m.props[o];for(var p in this.props){if(!this.props.hasOwnProperty(p))continue;var q=k[p];if(q){q(n,p,this.props[p]);}else if(!n.hasOwnProperty(p))n[p]=this.props[p];}m.props=n;return m;}}};e.exports=l;});
__d("ReactCompositeComponent",["ReactComponent","ReactCurrentOwner","ReactOwner","ReactPropTransferer","invariant","keyMirror","merge","mixInto"],function(a,b,c,d,e,f){var g=b('ReactComponent'),h=b('ReactCurrentOwner'),i=b('ReactOwner'),j=b('ReactPropTransferer'),k=b('invariant'),l=b('keyMirror'),m=b('merge'),n=b('mixInto'),o=l({DEFINE_ONCE:null,DEFINE_MANY:null,OVERRIDE_BASE:null}),p={mixins:o.DEFINE_MANY,props:o.DEFINE_ONCE,getInitialState:o.DEFINE_ONCE,render:o.DEFINE_ONCE,componentWillMount:o.DEFINE_MANY,componentDidMount:o.DEFINE_MANY,componentWillReceiveProps:o.DEFINE_MANY,shouldComponentUpdate:o.DEFINE_ONCE,componentWillUpdate:o.DEFINE_MANY,componentDidUpdate:o.DEFINE_MANY,componentWillUnmount:o.DEFINE_MANY,updateComponent:o.OVERRIDE_BASE},q={displayName:function(x,y){x.displayName=y;},mixins:function(x,y){if(y)for(var z=0;z<y.length;z++)r(x,y[z]);},props:function(x,y){x.propDeclarations=y;}};function r(x,y){var z=x.prototype;for(var aa in y){if(!y.hasOwnProperty(aa))continue;var ba=y[aa],ca=p[aa];if(u.hasOwnProperty(aa))k(ca===o.OVERRIDE_BASE);if(ca!=null)k(!ba||!ba.__reactAutoBind);if(z.hasOwnProperty(aa))k(ca===o.DEFINE_MANY);if(q.hasOwnProperty(aa)){q[aa](x,ba);}else if(ba&&ba.__reactAutoBind){if(!z.__reactAutoBindMap)z.__reactAutoBindMap={};z.__reactAutoBindMap[aa]=ba.__reactAutoBind;}else if(z.hasOwnProperty(aa)){z[aa]=s(z[aa],ba);}else z[aa]=ba;}}function s(x,y){return function z(aa,ba,ca,da,ea,fa){k(typeof fa==='undefined');x.call(this,aa,ba,ca,da,ea);y.call(this,aa,ba,ca,da,ea);};}var t=l({MOUNTING:null,UNMOUNTING:null,RECEIVING_PROPS:null,RECEIVING_STATE:null}),u={construct:function(x,y){g.Mixin.construct.apply(this,arguments);this.state=null;this._pendingState=null;this._compositeLifeCycleState=null;},mountComponent:function(x,y){g.Mixin.mountComponent.call(this,x,y);this._lifeCycleState=g.LifeCycle.UNMOUNTED;this._compositeLifeCycleState=t.MOUNTING;if(this.constructor.propDeclarations)this._assertValidProps(this.props);if(this.__reactAutoBindMap)this._bindAutoBindMethods();this.state=this.getInitialState?this.getInitialState():null;this._pendingState=null;if(this.componentWillMount){this.componentWillMount();if(this._pendingState){this.state=this._pendingState;this._pendingState=null;}}if(this.componentDidMount)y.getReactOnDOMReady().enqueue(this,this.componentDidMount);this._renderedComponent=this._renderValidatedComponent();this._compositeLifeCycleState=null;this._lifeCycleState=g.LifeCycle.MOUNTED;return this._renderedComponent.mountComponent(x,y);},unmountComponent:function(){this._compositeLifeCycleState=t.UNMOUNTING;if(this.componentWillUnmount)this.componentWillUnmount();this._compositeLifeCycleState=null;g.Mixin.unmountComponent.call(this);this._renderedComponent.unmountComponent();this._renderedComponent=null;if(this.refs)this.refs=null;},receiveProps:function(x,y){if(this.constructor.propDeclarations)this._assertValidProps(x);g.Mixin.receiveProps.call(this,x,y);this._compositeLifeCycleState=t.RECEIVING_PROPS;if(this.componentWillReceiveProps)this.componentWillReceiveProps(x,y);this._compositeLifeCycleState=t.RECEIVING_STATE;var z=this._pendingState||this.state;this._pendingState=null;this._receivePropsAndState(x,z,y);this._compositeLifeCycleState=null;},setState:function(x){this.replaceState(m(this._pendingState||this.state,x));},replaceState:function(x){var y=this._compositeLifeCycleState;k(this._lifeCycleState===g.LifeCycle.MOUNTED||y===t.MOUNTING);k(y!==t.RECEIVING_STATE&&y!==t.UNMOUNTING);this._pendingState=x;if(y!==t.MOUNTING&&y!==t.RECEIVING_PROPS){this._compositeLifeCycleState=t.RECEIVING_STATE;var z=this._pendingState;this._pendingState=null;var aa=g.ReactReconcileTransaction.getPooled();aa.perform(this._receivePropsAndState,this,this.props,z,aa);g.ReactReconcileTransaction.release(aa);this._compositeLifeCycleState=null;}},_receivePropsAndState:function(x,y,z){if(!this.shouldComponentUpdate||this.shouldComponentUpdate(x,y)){this._performComponentUpdate(x,y,z);}else{this.props=x;this.state=y;}},_performComponentUpdate:function(x,y,z){var aa=this.props,ba=this.state;if(this.componentWillUpdate)this.componentWillUpdate(x,y,z);this.props=x;this.state=y;this.updateComponent(z);if(this.componentDidUpdate)z.getReactOnDOMReady().enqueue(this,this.componentDidUpdate.bind(this,aa,ba));},updateComponent:function(x){var y=this._renderedComponent,z=this._renderValidatedComponent();if(y.constructor===z.constructor){if(!z.props.isStatic)y.receiveProps(z.props,x);}else{var aa=this._rootNodeID,ba=y._rootNodeID;y.unmountComponent();var ca=z.mountComponent(aa,x);g.DOMIDOperations.dangerouslyReplaceNodeWithMarkupByID(ba,ca);this._renderedComponent=z;}},forceUpdate:function(){var x=g.ReactReconcileTransaction.getPooled();x.perform(this._performComponentUpdate,this,this.props,this.state,x);g.ReactReconcileTransaction.release(x);},_renderValidatedComponent:function(){h.current=this;var x=this.render();h.current=null;k(g.isValidComponent(x));return x;},_assertValidProps:function(x){var y=this.constructor.propDeclarations,z=this.constructor.displayName;for(var aa in y){var ba=y[aa];if(ba)ba(x,aa,z);}},_bindAutoBindMethods:function(){for(var x in this.__reactAutoBindMap){if(!this.__reactAutoBindMap.hasOwnProperty(x))continue;var y=this.__reactAutoBindMap[x];this[x]=this._bindAutoBindMethod(y);}},_bindAutoBindMethod:function(x){var y=this,z=false;function aa(ba,ca,da,ea,fa,ga){k(typeof ga==='undefined');if(y._lifeCycleState===g.LifeCycle.MOUNTED){return x.call(y,ba,ca,da,ea,fa);}else if(!z)z=true;}return aa;}},v=function(){};n(v,g.Mixin);n(v,i.Mixin);n(v,j.Mixin);n(v,u);var w={LifeCycle:t,Base:v,createClass:function(x){var y=function(){};y.prototype=new v();y.prototype.constructor=y;r(y,x);k(y.prototype.render);var z=function(aa,ba){var ca=new y();ca.construct.apply(ca,arguments);return ca;};z.componentConstructor=y;z.originalSpec=x;return z;},autoBind:function(x){function y(){k(false);}y.__reactAutoBind=x;return y;}};e.exports=w;});
__d("ReactMultiChild",["ReactComponent"],function(a,b,c,d,e,f){var g=b('ReactComponent');function h(k,l){return k&&l&&k.constructor===l.constructor;}var i={enqueueMarkupAt:function(k,l){this.domOperations=this.domOperations||[];this.domOperations.push({insertMarkup:k,finalIndex:l});},enqueueMove:function(k,l){this.domOperations=this.domOperations||[];this.domOperations.push({moveFrom:k,finalIndex:l});},enqueueUnmountChildByName:function(k,l){if(g.isValidComponent(l)){this.domOperations=this.domOperations||[];this.domOperations.push({removeAt:l._domIndex});l.unmountComponent&&l.unmountComponent();delete this._renderedChildren[k];}},processChildDOMOperationsQueue:function(){if(this.domOperations){g.DOMIDOperations.manageChildrenByParentID(this._rootNodeID,this.domOperations);this.domOperations=null;}},unmountMultiChild:function(){var k=this._renderedChildren;for(var l in k)if(k.hasOwnProperty(l)&&k[l]){var m=k[l];m.unmountComponent&&m.unmountComponent();}this._renderedChildren=null;},mountMultiChild:function(k,l){var m='',n=0;for(var o in k){var p=k[o];if(k.hasOwnProperty(o)&&p){m+=p.mountComponent(this._rootNodeID+'.'+o,l);p._domIndex=n;n++;}}this._renderedChildren=k;this.domOperations=null;return m;},updateMultiChild:function(k,l){if(!k&&!this._renderedChildren){return;}else if(k&&!this._renderedChildren){this._renderedChildren={};}else if(!k&&this._renderedChildren)k={};var m=this._rootNodeID+'.',n=null,o=0,p=0,q=0;for(var r in k){if(!k.hasOwnProperty(r))continue;var s=this._renderedChildren[r],t=k[r];if(h(s,t)){if(n){this.enqueueMarkupAt(n,p-o);n=null;}o=0;if(s._domIndex<q)this.enqueueMove(s._domIndex,p);q=Math.max(s._domIndex,q);!t.props.isStatic&&s.receiveProps(t.props,l);s._domIndex=p;}else{if(s){this.enqueueUnmountChildByName(r,s);q=Math.max(s._domIndex,q);}if(t){this._renderedChildren[r]=t;var u=t.mountComponent(m+r,l);n=n?n+u:u;o++;t._domIndex=p;}}p=t?p+1:p;}if(n)this.enqueueMarkupAt(n,p-o);for(var v in this._renderedChildren){if(!this._renderedChildren.hasOwnProperty(v))continue;var w=this._renderedChildren[v];if(w&&!k[v])this.enqueueUnmountChildByName(v,w);}this.processChildDOMOperationsQueue();}},j={Mixin:i};e.exports=j;});
__d("ReactTextComponent",["ReactComponent","escapeTextForBrowser","mixInto"],function(a,b,c,d,e,f){var g=b('ReactComponent'),h=b('escapeTextForBrowser'),i=b('mixInto'),j=function(k){this.construct({text:k});};i(j,g.Mixin);i(j,{mountComponent:function(k){g.Mixin.mountComponent.call(this,k);return ('<span id="'+k+'">'+h(this.props.text)+'</span>');},receiveProps:function(k,l){if(k.text!==this.props.text){this.props.text=k.text;g.DOMIDOperations.updateTextContentByID(this._rootNodeID,k.text);}}});e.exports=j;});
__d("flattenChildren",["ReactTextComponent","escapeTextForBrowser","throwIf"],function(a,b,c,d,e,f){var g=b('ReactTextComponent'),h=b('escapeTextForBrowser'),i=b('throwIf'),j='INVALID_CHILD',k='You have two children with identical keys. Make sure that you set the '+'"key" property to a unique value such as a row ID.',l='0',m=function(o,p,q){var r,s;if(Array.isArray(p)){for(var t=0;t<p.length;t++){var u=p[t];r=u&&(u._key||(u.props&&u.props.key));s=r?h(r):(''+t);m(o,u,q+':'+s);}}else{var v=typeof p,w=q==='',x=w?l:q;if(p===null||p===undefined||v==='boolean'){o[x]=null;}else if(p.mountComponentIntoNode){o[x]=p;}else if(v==='object'){i(p&&p.nodeType===1,j);for(r in p)if(p.hasOwnProperty(r)){s=h(r);m(o,p[r],q+':'+s);}}else if(v==='string'){o[x]=new g(p);}else if(v==='number')o[x]=new g(''+p);}};function n(o){if(o===null||o===undefined)return o;var p={};m(p,o,'');return p;}e.exports=n;});
__d("ReactNativeComponent",["CSSPropertyOperations","DOMPropertyOperations","ReactComponent","ReactEvent","ReactMultiChild","escapeTextForBrowser","flattenChildren","invariant","keyOf","merge","mixInto"],function(a,b,c,d,e,f){var g=b('CSSPropertyOperations'),h=b('DOMPropertyOperations'),i=b('ReactComponent'),j=b('ReactEvent'),k=b('ReactMultiChild'),l=b('escapeTextForBrowser'),m=b('flattenChildren'),n=b('invariant'),o=b('keyOf'),p=b('merge'),q=b('mixInto'),r=j.putListener,s=j.registrationNames,t={string:true,number:true},u=o({content:null}),v=o({dangerouslySetInnerHTML:null}),w=o({style:null});function x(z){if(!z)return;var aa=z.children!=null?1:0,ba=z.content!=null?1:0,ca=z.dangerouslySetInnerHTML!=null?1:0;n(aa+ba+ca<=1);n(z.style==null||typeof z.style==='object');}function y(z,aa){this._tagOpen='<'+z+' ';this._tagClose=aa?'':'</'+z+'>';this.tagName=z.toUpperCase();}y.Mixin={mountComponent:function(z,aa){i.Mixin.mountComponent.call(this,z,aa);x(this.props);return (this._createOpenTagMarkup()+this._createContentMarkup(aa)+this._tagClose);},_createOpenTagMarkup:function(){var z=this.props,aa=this._tagOpen;for(var ba in z){if(!z.hasOwnProperty(ba))continue;var ca=z[ba];if(ca==null)continue;if(s[ba]){r(this._rootNodeID,ba,ca);}else{if(ba===w){if(ca)ca=z.style=p(z.style);ca=g.createMarkupForStyles(ca);}var da=h.createMarkupForProperty(ba,ca);if(da)aa+=' '+da;}}return aa+' id="'+this._rootNodeID+'">';},_createContentMarkup:function(z){var aa=this.props.dangerouslySetInnerHTML;if(aa!=null){if(aa.__html!=null)return aa.__html;}else{var ba=this.props.content!=null?this.props.content:t[typeof this.props.children]?this.props.children:null,ca=ba!=null?null:this.props.children;if(ba!=null){return l(ba);}else if(ca!=null)return this.mountMultiChild(m(ca),z);}return '';},receiveProps:function(z,aa){n(this._rootNodeID);x(z);i.Mixin.receiveProps.call(this,z,aa);this._updateDOMProperties(z);this._updateDOMChildren(z,aa);this.props=z;},_updateDOMProperties:function(z){var aa=this.props;for(var ba in z){var ca=z[ba],da=aa[ba];if(!z.hasOwnProperty(ba)||ca===da)continue;if(ba===w){if(ca)ca=z.style=p(ca);var ea;for(var fa in ca){if(!ca.hasOwnProperty(fa))continue;if(!da||da[fa]!==ca[fa]){if(!ea)ea={};ea[fa]=ca[fa];}}if(ea)i.DOMIDOperations.updateStylesByID(this._rootNodeID,ea);}else if(ba===v){var ga=da&&da.__html,ha=ca&&ca.__html;if(ga!==ha)i.DOMIDOperations.updateInnerHTMLByID(this._rootNodeID,ca);}else if(ba===u){i.DOMIDOperations.updateTextContentByID(this._rootNodeID,''+ca);}else if(s[ba]){r(this._rootNodeID,ba,ca);}else i.DOMIDOperations.updatePropertyByID(this._rootNodeID,ba,ca);}},_updateDOMChildren:function(z,aa){var ba=typeof this.props.content,ca=this.props.content==null||ba==='boolean',da=typeof z.content,ea=z.content==null||da==='boolean',fa=!ca?this.props.content:t[typeof this.props.children]?this.props.children:null,ga=!ea?z.content:t[typeof z.children]?z.children:null,ha=fa!=null?null:this.props.children,ia=ga!=null?null:z.children;if(ga!=null){var ja=ha!=null&&ia==null;if(ja)this.updateMultiChild(null,aa);if(fa!==ga)i.DOMIDOperations.updateTextContentByID(this._rootNodeID,''+ga);}else{var ka=fa!=null&&ga==null;if(ka)i.DOMIDOperations.updateTextContentByID(this._rootNodeID,'');this.updateMultiChild(m(z.children),aa);}},unmountComponent:function(){i.Mixin.unmountComponent.call(this);this.unmountMultiChild();j.deleteAllListeners(this._rootNodeID);}};q(y,i.Mixin);q(y,y.Mixin);q(y,k.Mixin);e.exports=y;});
__d("objMapKeyVal",[],function(a,b,c,d,e,f){function g(h,i,j){if(!h)return null;var k=0,l={};for(var m in h)if(h.hasOwnProperty(m))l[m]=i.call(j,m,h[m],k++);return l;}e.exports=g;});
__d("ReactDOM",["ReactNativeComponent","mergeInto","objMapKeyVal"],function(a,b,c,d,e,f){var g=b('ReactNativeComponent'),h=b('mergeInto'),i=b('objMapKeyVal');function j(m,n){var o=function(){};o.prototype=new g(m,n);o.prototype.constructor=o;return function(p,q){var r=new o();r.construct.apply(r,arguments);return r;};}var k=i({a:false,abbr:false,address:false,audio:false,b:false,body:false,br:true,button:false,code:false,col:true,colgroup:false,dd:false,div:false,section:false,dl:false,dt:false,em:false,embed:true,fieldset:false,footer:false,form:false,h1:false,h2:false,h3:false,h4:false,h5:false,h6:false,header:false,hr:true,i:false,iframe:false,img:true,input:true,label:false,legend:false,li:false,line:false,nav:false,object:false,ol:false,optgroup:false,option:false,p:false,param:true,pre:false,select:false,small:false,source:false,span:false,sub:false,sup:false,strong:false,table:false,tbody:false,td:false,textarea:false,tfoot:false,th:false,thead:false,time:false,title:false,tr:false,u:false,ul:false,video:false,wbr:false,circle:false,g:false,path:false,polyline:false,rect:false,svg:false,text:false},j),l={injectComponentClasses:function(m){h(k,m);}};k.injection=l;e.exports=k;});
__d("ReactDOMForm",["ReactCompositeComponent","ReactDOM","ReactEvent","EventConstants"],function(a,b,c,d,e,f){var g=b('ReactCompositeComponent'),h=b('ReactDOM'),i=b('ReactEvent'),j=b('EventConstants'),k=h.form,l=g.createClass({render:function(){return this.transferPropsTo(k(null,this.props.children));},componentDidMount:function(m){i.trapBubbledEvent(j.topLevelTypes.topSubmit,'submit',m);}});e.exports=l;});
__d("DefaultEventPluginOrder",["keyOf"],function(a,b,c,d,e,f){var g=b('keyOf'),h=[g({ResponderEventPlugin:null}),g({SimpleEventPlugin:null}),g({TapEventPlugin:null}),g({EnterLeaveEventPlugin:null}),g({AnalyticsEventPlugin:null})];e.exports=h;});
__d("EnterLeaveEventPlugin",["EventPropagators","ExecutionEnvironment","AbstractEvent","EventConstants","ReactInstanceHandles","getDOMNodeID","keyOf"],function(a,b,c,d,e,f){var g=b('EventPropagators'),h=b('ExecutionEnvironment'),i=b('AbstractEvent'),j=b('EventConstants'),k=b('ReactInstanceHandles'),l=b('getDOMNodeID'),m=b('keyOf'),n=j.topLevelTypes,o=k.getFirstReactDOM,p={mouseEnter:{registrationName:m({onMouseEnter:null})},mouseLeave:{registrationName:m({onMouseLeave:null})}},q=function(s,t,u,v){if(s===n.topMouseOver&&(t.relatedTarget||t.fromElement))return;if(s!==n.topMouseOut&&s!==n.topMouseOver)return null;var w,x;if(s===n.topMouseOut){w=o(t.relatedTarget||t.toElement)||h.global;x=v;}else{w=v;x=h.global;}if(x===w)return;var y=x?l(x):'',z=w?l(w):'',aa=i.getPooled(p.mouseLeave,y,s,t),ba=i.getPooled(p.mouseEnter,z,s,t);g.accumulateEnterLeaveDispatches(aa,ba,y,z);return [aa,ba];},r={abstractEventTypes:p,extractAbstractEvents:q};e.exports=r;});
__d("SimpleEventPlugin",["AbstractEvent","EventConstants","EventPropagators","keyOf"],function(a,b,c,d,e,f){var g=b('AbstractEvent'),h=b('EventConstants'),i=b('EventPropagators'),j=b('keyOf'),k=h.topLevelTypes,l={abstractEventTypes:{mouseDown:{phasedRegistrationNames:{bubbled:j({onMouseDown:true}),captured:j({onMouseDownCapture:true})}},mouseUp:{phasedRegistrationNames:{bubbled:j({onMouseUp:true}),captured:j({onMouseUpCapture:true})}},mouseMove:{phasedRegistrationNames:{bubbled:j({onMouseMove:true}),captured:j({onMouseMoveCapture:true})}},doubleClick:{phasedRegistrationNames:{bubbled:j({onDoubleClick:true}),captured:j({onDoubleClickCapture:true})}},click:{phasedRegistrationNames:{bubbled:j({onClick:true}),captured:j({onClickCapture:true})}},mouseWheel:{phasedRegistrationNames:{bubbled:j({onMouseWheel:true}),captured:j({onMouseWheelCapture:true})}},touchStart:{phasedRegistrationNames:{bubbled:j({onTouchStart:true}),captured:j({onTouchStartCapture:true})}},touchEnd:{phasedRegistrationNames:{bubbled:j({onTouchEnd:true}),captured:j({onTouchEndCapture:true})}},touchCancel:{phasedRegistrationNames:{bubbled:j({onTouchCancel:true}),captured:j({onTouchCancelCapture:true})}},touchMove:{phasedRegistrationNames:{bubbled:j({onTouchMove:true}),captured:j({onTouchMoveCapture:true})}},keyUp:{phasedRegistrationNames:{bubbled:j({onKeyUp:true}),captured:j({onKeyUpCapture:true})}},keyPress:{phasedRegistrationNames:{bubbled:j({onKeyPress:true}),captured:j({onKeyPressCapture:true})}},keyDown:{phasedRegistrationNames:{bubbled:j({onKeyDown:true}),captured:j({onKeyDownCapture:true})}},focus:{phasedRegistrationNames:{bubbled:j({onFocus:true}),captured:j({onFocusCapture:true})}},blur:{phasedRegistrationNames:{bubbled:j({onBlur:true}),captured:j({onBlurCapture:true})}},scroll:{phasedRegistrationNames:{bubbled:j({onScroll:true}),captured:j({onScrollCapture:true})}},change:{phasedRegistrationNames:{bubbled:j({onChange:true}),captured:j({onChangeCapture:true})}},submit:{phasedRegistrationNames:{bubbled:j({onSubmit:true}),captured:j({onSubmitCapture:true})}},DOMCharacterDataModified:{phasedRegistrationNames:{bubbled:j({onDOMCharacterDataModified:true}),captured:j({onDOMCharacterDataModifiedCapture:true})}}},executeDispatch:function(m,n,o){var p=n(m,o);if(p===false){m.stopPropagation();m.preventDefault();}},extractAbstractEvents:function(m,n,o,p){var q,r=l.topLevelTypesToAbstract[m];if(!r)return null;switch(m){case k.topMouseWheel:q=g.normalizeMouseWheelData(n);break;case k.topScroll:q=g.normalizeScrollDataFromTarget(p);break;case k.topClick:case k.topDoubleClick:case k.topChange:case k.topDOMCharacterDataModified:case k.topMouseDown:case k.topMouseUp:case k.topMouseMove:case k.topTouchMove:case k.topTouchStart:case k.topTouchEnd:q=g.normalizePointerData(n);break;default:q=null;}var s=g.getPooled(r,o,m,n,q);i.accumulateTwoPhaseDispatches(s);return s;}};l.topLevelTypesToAbstract={topMouseDown:l.abstractEventTypes.mouseDown,topMouseUp:l.abstractEventTypes.mouseUp,topMouseMove:l.abstractEventTypes.mouseMove,topClick:l.abstractEventTypes.click,topDoubleClick:l.abstractEventTypes.doubleClick,topMouseWheel:l.abstractEventTypes.mouseWheel,topTouchStart:l.abstractEventTypes.touchStart,topTouchEnd:l.abstractEventTypes.touchEnd,topTouchMove:l.abstractEventTypes.touchMove,topTouchCancel:l.abstractEventTypes.touchCancel,topKeyUp:l.abstractEventTypes.keyUp,topKeyPress:l.abstractEventTypes.keyPress,topKeyDown:l.abstractEventTypes.keyDown,topFocus:l.abstractEventTypes.focus,topBlur:l.abstractEventTypes.blur,topScroll:l.abstractEventTypes.scroll,topChange:l.abstractEventTypes.change,topSubmit:l.abstractEventTypes.submit,topDOMCharacterDataModified:l.abstractEventTypes.DOMCharacterDataModified};e.exports=l;});
__d("ReactDefaultInjection",["ReactDOM","ReactDOMForm","DefaultEventPluginOrder","EnterLeaveEventPlugin","EventPluginHub","ReactInstanceHandles","SimpleEventPlugin"],function(a,b,c,d,e,f){var g=b('ReactDOM'),h=b('ReactDOMForm'),i=b('DefaultEventPluginOrder'),j=b('EnterLeaveEventPlugin'),k=b('EventPluginHub'),l=b('ReactInstanceHandles'),m=b('SimpleEventPlugin');function n(){k.injection.injectEventPluginOrder(i);k.injection.injectInstanceHandle(l);k.injection.injectEventPluginsByName({SimpleEventPlugin:m,EnterLeaveEventPlugin:j});g.injection.injectComponentClasses({form:h});}e.exports={inject:n};});
__d("React",["ReactCompositeComponent","ReactComponent","ReactDOM","ReactMount","ReactDefaultInjection"],function(a,b,c,d,e,f){var g=b('ReactCompositeComponent'),h=b('ReactComponent'),i=b('ReactDOM'),j=b('ReactMount'),k=b('ReactDefaultInjection');k.inject();var l={DOM:i,initializeTouchEvents:function(m){j.useTouchEvents=m;},autoBind:g.autoBind,createClass:g.createClass,createComponentRenderer:j.createComponentRenderer,constructAndRenderComponent:j.constructAndRenderComponent,constructAndRenderComponentByID:j.constructAndRenderComponentByID,renderComponent:j.renderComponent,unmountAndReleaseReactRootNode:j.unmountAndReleaseReactRootNode,isValidComponent:h.isValidComponent};e.exports=l;});
__d("TrackingNodes",[],function(a,b,c,d,e,f){var g={types:{USER_NAME:2,LIKE_LINK:5,UNLIKE_LINK:6,ATTACHMENT:15,SHARE_LINK:17,USER_MESSAGE:18,SOURCE:21,BLINGBOX:22,VIEW_ALL_COMMENTS:24,COMMENT:25,COMMENT_LINK:26,SMALL_ACTOR_PHOTO:27,XBUTTON:29,HIDE_LINK:30,REPORT_SPAM_LINK:31,HIDE_ALL_LINK:32,ADD_COMMENT_BOX:34,UFI:36,DROPDOWN_BUTTON:55,UNHIDE_LINK:71},TYPE_TO_CHAR_SHIFT_VAL:57,encodeTrackingInfo:function(h,i){var j=String.fromCharCode(h+g.TYPE_TO_CHAR_SHIFT_VAL);if(i)j+=String.fromCharCode(48+Math.min(i,10)-1);return j;},decodeTrackingInfo:function(h){return h.charCodeAt(0)-g.TYPE_TO_CHAR_SHIFT_VAL;},getTrackingInfo:function(h,i){return '{"tn":"'+g.encodeTrackingInfo(h,i)+'"}';}};e.exports=g;});
__d("NumberFormat",["Env"],function(a,b,c,d,e,f){var g=b('Env'),h=/(\d{3})(?=\d)/g,i=10000,j=function(l){return (''+l).split('').reverse().join('');},k={formatIntegerWithDelimiter:function(l,m){if((g.locale=='nb_NO'||g.locale=='nn_NO')&&(Math.abs(l)<i))return l.toString();var n=j(l);return j(n.replace(h,'$1'+m));}};e.exports=k;});
__d("UFIBlingItem.react",["React","NumberFormat","cx","joinClasses"],function(a,b,c,d,e,f){var g=b('React'),h=b('NumberFormat'),i=b('cx'),j=b('joinClasses'),k=g.createClass({displayName:'UFIBlingItem',render:function(){var l=j(this.props.className,this.props.iconClassName,"UFIBlingBoxSprite"),m=h.formatIntegerWithDelimiter(this.props.count,this.props.contextArgs.numberdelimiter||',');return (g.DOM.span(null,[g.DOM.i({className:l},null),g.DOM.span({className:"UFIBlingBoxText"},m)]));}});e.exports=k;});
__d("UFIConstants",[],function(a,b,c,d,e,f){var g={COMMENT_LIKE:'fa-type:comment-like',COMMENT_SET_SPAM:'fa-type:mark-spam',DELETE_COMMENT:'fa-type:delete-comment',LIVE_DELETE_COMMENT:'fa-type:live-delete-comment',LIKE_ACTION:'fa-type:like',REMOVE_PREVIEW:'fa-type:remove-preview',CONFIRM_COMMENT_REMOVAL:'fa-type:confirm-remove',TRANSLATE_COMMENT:'fa-type:translate-comment',SUBSCRIBE_ACTION:'fa-type:subscribe',GIFT_SUGGESTION:'fa-type:gift-suggestion',UNDO_DELETE_COMMENT:'fa-type:undo-delete-comment'},h={DELETED:'status:deleted',SPAM:'status:spam',SPAM_DISPLAY:'status:spam-display',LIVE_DELETED:'status:live-deleted',FAILED_ADD:'status:failed-add',FAILED_EDIT:'status:failed-edit',PENDING_EDIT:'status:pending-edit',PENDING_UNDO_DELETE:'status:pending-undo-delete'},i={MOBILE:1,SMS:3,EMAIL:4},j={PROFILE:0,NEWS_FEED:1,OBJECT:2,MOBILE:3,EMAIL:4,PROFILE_APROVAL:10,TICKER:12,NONE:13,INTERN:14,ADS:15,PHOTOS_SNOWLIFT:17},k={UNKNOWN:0,INITIAL_SERVER:1,LIVE_SEND:2,USER_ACTION:3,COLLAPSED_UFI:4,ENDPOINT_LIKE:10,ENDPOINT_COMMENT_LIKE:11,ENDPOINT_ADD_COMMENT:12,ENDPOINT_EDIT_COMMENT:13,ENDPOINT_DELETE_COMMENT:14,ENDPOINT_UNDO_DELETE_COMMENT:15,ENDPOINT_COMMENT_SPAM:16,ENDPOINT_REMOVE_PREVIEW:17,ENDPOINT_ID_COMMENT_FETCH:18,ENDPOINT_COMMENT_FETCH:19,ENDPOINT_TRANSLATE_COMMENT:20,ENDPOINT_BAN:21,ENDPOINT_SUBSCRIBE:22},l=50,m=.6,n=420,o=5,p=80;e.exports={UFIActionType:g,UFIStatus:h,UFISourceType:i,UFIFeedbackSourceType:j,UFIPayloadSourceType:k,defaultPageSize:l,commentTruncationLength:n,commentTruncationPercent:m,commentTruncationMaxLines:o,attachmentTruncationLength:p};});
__d("UFIBlingBox.react",["React","UFIBlingItem.react","UFIConstants","cx","tx"],function(a,b,c,d,e,f){var g=b('React'),h=b('UFIBlingItem.react'),i=b('UFIConstants'),j=b('cx'),k=b('tx'),l=g.createClass({displayName:'UFIBlingBox',render:function(){var m=[],n='';if(this.props.likes){m.push(h({count:this.props.likes,className:((m.length>0?"mls":'')),iconClassName:"UFIBlingBoxLikeIcon",contextArgs:this.props.contextArgs},null));n+=(this.props.likes==1)?"1 like":k._("{count} likes",{count:this.props.likes});n+=' ';}if(this.props.comments){m.push(h({count:this.props.comments,className:((m.length>0?"mls":'')),iconClassName:"UFIBlingBoxCommentIcon",contextArgs:this.props.contextArgs},null));n+=(this.props.comments==1)?"1 comment":k._("{count} comments",{count:this.props.comments});n+=' ';}if(this.props.reshares){m.push(h({count:this.props.reshares,className:((m.length>0?"mls":'')),iconClassName:"UFIBlingBoxReshareIcon",contextArgs:this.props.contextArgs},null));n+=(this.props.reshares==1)?"1 share":k._("{count} shares",{count:this.props.reshares});}var o=g.DOM.a({className:"UFIBlingBox uiBlingBox feedbackBling",href:this.props.permalink,'data-ft':this.props['data-ft'],'aria-label':n},m);if(this.props.comments<i.defaultPageSize){o.props.onClick=this.props.onClick;o.props.rel='ignore';}return o;}});e.exports=l;});
__d("UFICentralUpdates",["Arbiter","ChannelConstants","LiveTimer","ShortProfiles","UFIConstants","copyProperties","tx"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('ChannelConstants'),i=b('LiveTimer'),j=b('ShortProfiles'),k=b('UFIConstants'),l=b('copyProperties'),m=b('tx'),n=0,o={},p={},q={},r={},s=[];g.subscribe(h.getArbiterType('live-data'),function(x,y){if(y&&y.obj){var z=y.obj,aa=z.comments||[];aa.forEach(function(ba){ba.timestamp.text="a few seconds ago";});w.handleUpdate(k.UFIPayloadSourceType.LIVE_SEND,z);}});function t(){if(!n){var x=q,y=o,z=p,aa=r;q={};o={};p={};r={};if(Object.keys(x).length)v('feedback-id-changed',x);if(Object.keys(y).length)v('feedback-updated',y);if(Object.keys(z).length)v('comments-updated',z);if(Object.keys(aa).length)v('instance-updated',aa);s.pop();}}function u(){if(s.length){return s[s.length-1];}else return k.UFIPayloadSourceType.UNKNOWN;}function v(event,x){w.inform(event,{updates:x,payloadSource:u()});}var w=l(new g(),{handleUpdate:function(x,y){if(Object.keys(y).length)this.synchronizeInforms(function(){s.push(x);var z=l({payloadsource:u()},y);this.inform('update-feedback',z);this.inform('update-comment-lists',z);this.inform('update-comments',z);this.inform('update-actions',z);(y.profiles||[]).forEach(function(aa){j.set(aa.id,aa);});if(y.servertime)i.restart(y.servertime);}.bind(this));},didUpdateFeedback:function(x){o[x]=true;t();},didUpdateComment:function(x){p[x]=true;t();},didUpdateFeedbackID:function(x,y){q[x]=y;t();},didUpdateInstanceState:function(x,y){if(!r[x])r[x]={};r[x][y]=true;t();},synchronizeInforms:function(x){n++;try{x();}catch(y){throw y;}finally{n--;t();}}});e.exports=w;});
__d("randomInt",["invariant"],function(a,b,c,d,e,f){var g=b('invariant');function h(i,j){var k=arguments.length;g(k>0&&k<=2);if(k===1){j=i;i=0;}g(j>i);var l=this.random||Math.random;return Math.floor(i+l()*(j-i));}e.exports=h;});
__d("ClientIDs",["randomInt"],function(a,b,c,d,e,f){var g=b('randomInt'),h={},i={getNewClientID:function(){var j=Date.now(),k=j+':'+(g(0,4294967295)+1);h[k]=true;return k;},isExistingClientID:function(j){return !!h[j];}};e.exports=i;});
__d("ImmutableObject",["keyMirror","merge","mergeInto","mergeHelpers","throwIf"],function(a,b,c,d,e,f){var g=b('keyMirror'),h=b('merge'),i=b('mergeInto'),j=b('mergeHelpers'),k=b('throwIf'),l=j.checkMergeObjectArgs,m=j.isTerminal,n,o;n=g({INVALID_MAP_SET_ARG:null});o=function(q){i(this,q);};o.set=function(q,r){k(!(q instanceof o),n.INVALID_MAP_SET_ARG);var s=new o(q);i(s,r);return s;};o.setField=function(q,r,s){var t={};t[r]=s;return o.set(q,t);};o.setDeep=function(q,r){k(!(q instanceof o),n.INVALID_MAP_SET_ARG);return p(q,r);};function p(q,r){l(q,r);var s={},t=Object.keys(q);for(var u=0;u<t.length;u++){var v=t[u];if(!r.hasOwnProperty(v)){s[v]=q[v];}else if(m(q[v])||m(r[v])){s[v]=r[v];}else s[v]=p(q[v],r[v]);}var w=Object.keys(r);for(u=0;u<w.length;u++){var x=w[u];if(q.hasOwnProperty(x))continue;s[x]=r[x];}return (q instanceof o||r instanceof o)?new o(s):s;}e.exports=o;});
__d("debounceAcrossTransitions",["debounce"],function(a,b,c,d,e,f){var g=b('debounce');function h(i,j,k){return g(i,j,k,true);}e.exports=h;});
__d("MercuryServerDispatcher",["AsyncRequest","FBAjaxRequest","Env","JSLogger","Run","areObjectsEqual","copyProperties","debounceAcrossTransitions"],function(a,b,c,d,e,f){var g=b('AsyncRequest'),h=b('FBAjaxRequest'),i=b('Env'),j=b('JSLogger'),k=b('Run'),l=b('areObjectsEqual'),m=b('copyProperties'),n=b('debounceAcrossTransitions'),o={},p=j.create('mercury_dispatcher'),q=false,r={IMMEDIATE:'immediate',IDEMPOTENT:'idempotent',BATCH_SUCCESSIVE:'batch-successive',BATCH_SUCCESSIVE_UNIQUE:'batch-successive-unique',BATCH_SUCCESSIVE_PIGGYBACK_ON_ERROR:'batch-successive-piggyback-retry',BATCH_DEFERRED_MULTI:'batch-deferred-multi',BATCH_CONDITIONAL:'batch-conditional',registerEndpoints:function(v){for(var w in v){var x=v[w],y=x.request_user_id||i.user;if(!o[w])o[w]={};if(!o[w][y])o[w][y]={};o[w][y]=new s(w,x);}},trySend:function(v,w,x,y){y=y||i.user;if(v=='/ajax/mercury/client_reliability.php'&&!o[v][y])o[v][y]=o[v][undefined];o[v][y].trySend(w,x);}};function s(v,w){var x=w.mode||r.IMMEDIATE;switch(x){case r.IMMEDIATE:case r.IDEMPOTENT:case r.BATCH_SUCCESSIVE:case r.BATCH_SUCCESSIVE_UNIQUE:case r.BATCH_SUCCESSIVE_PIGGYBACK_ON_ERROR:case r.BATCH_DEFERRED_MULTI:case r.BATCH_CONDITIONAL:break;default:throw new Error('Invalid MercuryServerDispatcher mode '+x);}this._endpoint=v;this._mode=x;this._requestUserID=w.request_user_id;this._combineData=w.batch_function;this._combineDataIf=w.batch_if;this._batchSizeLimit=w.batch_size_limit;this._batches=[];this._handler=w.handler;this._errorHandler=w.error_handler;this._transportErrorHandler=w.transport_error_handler||w.error_handler;this._connectionRetries=w.connection_retries||0;this._timeoutHandler=w.timeout_handler;this._timeout=w.timeout;this._serverDialogCancelHandler=w.server_dialog_cancel_handler||w.error_handler;this._deferredSend=n(this._batchSend,0,this);if(this._batchSizeLimit)k.onUnload(function(){p.bump('unload_batches_count_'+u(this._batches.length));}.bind(this));}m(s.prototype,{_inFlight:0,_handler:null,_errorHandler:null,_transportErrorHandler:null,_timeoutHandler:null,_timeout:null,_serverDialogCancelHandler:null,_combineData:null,trySend:function(v,w){if(q)return;if(typeof v=='undefined')v=null;var x=w||this._mode;if(x==r.IMMEDIATE){this._send(v);}else if(x==r.IDEMPOTENT){if(!this._inFlight)this._send(v);}else if(x==r.BATCH_SUCCESSIVE||x==r.BATCH_SUCCESSIVE_UNIQUE){if(!this._inFlight){this._send(v);}else this._batchData(v);}else if(x==r.BATCH_CONDITIONAL){var y=this._batches[0]&&this._batches[0].getData();if(this._inFlight&&(this._combineDataIf(this._pendingRequestData,v)||this._combineDataIf(y,v))){this._batchData(v);}else this._send(v);}else if(x==r.BATCH_DEFERRED_MULTI){this._batchData(v);this._deferredSend();}else if(x==r.BATCH_SUCCESSIVE_PIGGYBACK_ON_ERROR){this._batchData(v);if(!this._inFlight)this._batchSend();}},_send:function(v){this._inFlight++;this._pendingRequestData=m({},v);if(this._requestUserID!=i.user)v.request_user_id=this._requestUserID;p.log('send',{endpoint:this._endpoint,data:v,inflight_count:this._inFlight});var w=null;if(i.worker_context){w=new h('POST',this._endpoint,v);w.onError=function(x){x.getPayload=function(){return x.errorText;};x.getRequest=function(){var y=x;x.getData=function(){return v;};return y;};x.getError=function(){return x.errorText;};x.getErrorDescription=function(){return x.errorText;};x.isTransient=function(){return false;};this._handleError(x);}.bind(this);w.onJSON=function(x){x.getPayload=function(){return x.json;};x.getRequest=function(){return w;};this._handleResponse(x);}.bind(this);w.getData=function(){return v;};w.send();}else{w=new g(this._endpoint).setData(v).setOption('retries',this._connectionRetries).setHandler(this._handleResponse.bind(this)).setErrorHandler(this._handleError.bind(this)).setTransportErrorHandler(this._handleTransportError.bind(this)).setServerDialogCancelHandler(this._handleServerDialogCancel.bind(this)).setAllowCrossPageTransition(true);if(this._timeout&&this._timeoutHandler)w.setTimeoutHandler(this._timeout,this._handleTimeout.bind(this));w.send();}},_batchData:function(v,w){if(this._mode==r.BATCH_SUCCESSIVE_UNIQUE&&typeof this._pendingRequestData!='undefined'&&l(v,this._pendingRequestData)){return;}else{var x=this._batches.length-1;if(x>=0&&!this._hasReachedBatchLimit(this._batches[x])){w?this._batches[x].combineWithOlder(v,this._combineData):this._batches[x].combineWith(v,this._combineData);}else{this._batches.push(new t(v));p.bump('batches_count_'+u(this._batches.length));}p.debug('batch',{endpoint:this._endpoint,batches:this._batches,batch_limit:this._batchSizeLimit});}},_hasReachedBatchLimit:function(v){return this._batchSizeLimit&&v.getSize()>=this._batchSizeLimit;},_batchSend:function(){if(this._batches[0]){this._send(this._batches[0].getData());this._batches.shift();}},_handleResponse:function(v){this._inFlight--;p.log('response',{endpoint:this._endpoint,inflight_count:this._inFlight});var w=v.getPayload();q=w&&w.kill_chat;if(q)p.log('killswitch_enabled',{endpoint:this._endpoint,inflight_count:this._inFlight});if(w&&w.error_payload){if(this._errorHandler)this._errorHandler(v);}else this._handler&&this._handler(w,v.getRequest());if(this._mode==r.BATCH_SUCCESSIVE||this._mode==r.BATCH_SUCCESSIVE_UNIQUE||this._mode==r.BATCH_SUCCESSIVE_PIGGYBACK_ON_ERROR||this._mode==r.BATCH_CONDITIONAL)this._batchSend();delete this._pendingRequestData;},_postErrorHandler:function(){p.error('error',{endpoint:this._endpoint,inflight_count:this._inFlight-1});this._inFlight--;var v=this._mode;if(v==r.BATCH_SUCCESSIVE||v==r.BATCH_SUCCESSIVE_UNIQUE||v==r.BATCH_CONDITIONAL){this._batchSend();}else if(v==r.BATCH_SUCCESSIVE_PIGGYBACK_ON_ERROR)if(this._batches[0]){this._batchData(this._pendingRequestData,true);this._batchSend();}else this._batchData(this._pendingRequestData,true);delete this._pendingRequestData;},_handleError:function(v){this._errorHandler&&this._errorHandler(v);this._postErrorHandler();},_handleTransportError:function(v){this._transportErrorHandler&&this._transportErrorHandler(v);this._postErrorHandler();},_handleTimeout:function(v){this._timeoutHandler&&this._timeoutHandler(v);this._postErrorHandler();},_handleServerDialogCancel:function(v){this._serverDialogCancelHandler&&this._serverDialogCancelHandler(v);this._postErrorHandler();}});function t(v){this._data=v;this._size=1;}m(t.prototype,{getData:function(){return this._data;},getSize:function(){return this._size;},combineWith:function(v,w){this._data=w(this._data,v);this._size++;},combineWithOlder:function(v,w){this._data=w(v,this._data);this._size++;}});function u(v){if(v===1){return 'equals1';}else if(v>=2&&v<=3){return 'between2and3';}else return 'over4';}e.exports=r;});
__d("UFIFeedbackTargets",["ClientIDs","KeyedCallbackManager","UFICentralUpdates","UFIConstants","copyProperties"],function(a,b,c,d,e,f){var g=b('ClientIDs'),h=b('KeyedCallbackManager'),i=b('UFICentralUpdates'),j=b('UFIConstants'),k=b('copyProperties'),l=new h();function m(v){var w={};v.forEach(function(x){var y=k({},x);delete y.commentlist;delete y.commentcount;w[x.entidentifier]=y;i.didUpdateFeedback(x.entidentifier);});l.addResourcesAndExecute(w);}function n(v){for(var w=0;w<v.length;w++){var x=v[w];switch(x.actiontype){case j.UFIActionType.LIKE_ACTION:p(x);break;case j.UFIActionType.SUBSCRIBE_ACTION:q(x);break;case j.UFIActionType.GIFT_SUGGESTION:r(x);break;}}}function o(v){for(var w=0;w<v.length;w++){var x=v[w];if(x.orig_ftentidentifier)t(x.orig_ftentidentifier,x.ftentidentifier);}}function p(v){var w=s(v);if(w){v.hasviewerliked=!!v.hasviewerliked;if(v.clientid&&g.isExistingClientID(v.clientid)&&v.hasviewerliked!=w.hasviewerliked)return;w.likecount=v.likecount||0;w.likesentences=v.likesentences;if(v.actorid==w.actorforpost){w.hasviewerliked=v.hasviewerliked;}else if(v.hasviewerliked!=w.hasviewerliked){w.likesentences={current:v.likesentences.alternate,alternate:v.likesentences.current};if(w.hasviewerliked){w.likecount++;}else w.likecount--;}if(v.actorid!=w.actorforpost)w.likesentences.isunseen=true;m([w]);}}function q(v){var w=s(v);if(w){v.hasviewersubscribed=!!v.hasviewersubscribed;if(v.clientid&&g.isExistingClientID(v.clientid)&&v.hasviewersubscribed!=w.hasviewersubscribed)return;if(v.actorid==w.actorforpost)w.hasviewersubscribed=v.hasviewersubscribed;m([w]);}}function r(v){var w=s(v);if(!w)return;if(v.clientid&&g.isExistingClientID(v.clientid)&&v.hasviewerliked!=w.hasviewerliked)return;w.giftdata=v.giftdata;m([w]);}function s(v){if(v.orig_entidentifier)t(v.orig_entidentifier,v.entidentifier);return l.getResource(v.entidentifier);}function t(v,w){var x=l.getResource(v);if(x){l.setResource(v,null);x.entidentifier=w;l.setResource(w,x);i.didUpdateFeedbackID(v,w);}}var u={getFeedbackTarget:function(v,w){var x=l.executeOrEnqueue(v,w),y=l.getUnavailableResources(x);if(!y.length)return;}};i.subscribe('update-feedback',function(v,w){var x=w.feedbacktargets;if(x&&x.length)m(x);});i.subscribe('update-actions',function(v,w){if(w.actions&&w.actions.length)n(w.actions);});i.subscribe('update-comments',function(v,w){if(w.comments&&w.comments.length)o(w.comments);});e.exports=u;});
__d("UFIInstanceState",["UFICentralUpdates"],function(a,b,c,d,e,f){var g=b('UFICentralUpdates'),h={};function i(k){if(!h[k])h[k]={};}var j={getKeyForInstance:function(k,l){i(k);return h[k][l];},updateState:function(k,l,m){i(k);h[k][l]=m;g.didUpdateInstanceState(k,l);},updateStateField:function(k,l,m,n){var o=this.getKeyForInstance(k,l)||{};o[m]=n;this.updateState(k,l,o);}};e.exports=j;});
__d("UFIComments",["ClientIDs","ImmutableObject","JSLogger","KeyedCallbackManager","MercuryServerDispatcher","UFICentralUpdates","UFIConstants","UFIFeedbackTargets","UFIInstanceState","URI","keyMirror","merge","randomInt","throwIf"],function(a,b,c,d,e,f){var g=b('ClientIDs'),h=b('ImmutableObject'),i=b('JSLogger'),j=b('KeyedCallbackManager'),k=b('MercuryServerDispatcher'),l=b('UFICentralUpdates'),m=b('UFIConstants'),n=b('UFIFeedbackTargets'),o=b('UFIInstanceState'),p=b('URI'),q=b('keyMirror'),r=b('merge'),s=b('randomInt'),t=b('throwIf'),u=q({INVALID_COMMENT_TYPE:null}),v=i.create('UFIComments'),w={},x={},y={},z={},aa={},ba='unavailable_comment_key';function ca(xa){return xa in aa?aa[xa]:xa;}function da(xa){if(!x[xa])x[xa]=new j();return x[xa];}function ea(xa){if(x[xa])x[xa].reset();}function fa(xa,ya){xa.forEach(function(za){var ab=za.ftentidentifier,bb=za.parentcommentid||ab;n.getFeedbackTarget(ab,function(cb){var db=m.UFIPayloadSourceType,eb=za.clientid,fb=false,gb=r({},za);if(eb){delete gb.clientid;fb=g.isExistingClientID(eb);if(fb&&aa[eb])return;}if(ya===db.LIVE_SEND&&za.parentcommentid&&y[bb]===undefined)return;if((ya===db.LIVE_SEND)||(ya===db.USER_ACTION)||(ya===db.ENDPOINT_ADD_COMMENT)||(ya===db.ENDPOINT_EDIT_COMMENT))gb.isunseen=true;if(ya===db.ENDPOINT_COMMENT_FETCH||ya===db.ENDPOINT_ID_COMMENT_FETCH)gb.fromfetch=true;var hb=da(bb),ib=hb.getAllResources(),jb={};for(var kb in ib){var lb=ib[kb];jb[lb]=kb;}if(fb){if(w[eb].ufiinstanceid)o.updateStateField(w[eb].ufiinstanceid,'locallycomposed',za.id,true);gb.ufiinstanceid=w[eb].ufiinstanceid;aa[eb]=za.id;w[za.id]=w[eb];delete w[eb];l.didUpdateComment(eb);if(eb in jb){jb[za.id]=jb[eb];var mb=jb[eb];hb.setResource(mb,za.id);}}if(!jb[za.id]){var nb=y[bb]||0;jb[za.id]=nb;y[bb]=nb+1;na(bb);hb.setResource(nb,za.id);}if(za.status===m.UFIStatus.FAILED_ADD)z[bb]=z[bb]+1;var ob=jb[za.id],pb=y[bb];gb.replycount=(y[za.id]||0)-(z[za.id]||0);var qb=ga(ob,pb);if(za.parentcommentid&&w[za.parentcommentid]){gb.permalink=p(cb.permalink).addQueryData({comment_id:w[za.parentcommentid].legacyid,reply_comment_id:za.legacyid,total_comments:pb}).toString();}else gb.permalink=p(cb.permalink).addQueryData({comment_id:za.legacyid,offset:qb,total_comments:pb}).toString();wa.setComment(za.id,new h(gb));l.didUpdateComment(za.id);l.didUpdateFeedback(ab);});});}function ga(xa,ya){return Math.floor((ya-xa-1)/m.defaultPageSize)*m.defaultPageSize;}function ha(xa){for(var ya=0;ya<xa.length;ya++){var za=xa[ya];switch(za.actiontype){case m.UFIActionType.COMMENT_LIKE:ka(za);break;case m.UFIActionType.DELETE_COMMENT:oa(za);break;case m.UFIActionType.LIVE_DELETE_COMMENT:pa(za);break;case m.UFIActionType.UNDO_DELETE_COMMENT:qa(za);break;case m.UFIActionType.REMOVE_PREVIEW:ra(za);break;case m.UFIActionType.COMMENT_SET_SPAM:sa(za);break;case m.UFIActionType.CONFIRM_COMMENT_REMOVAL:ta(za);break;case m.UFIActionType.TRANSLATE_COMMENT:la(za);break;}}}function ia(xa,ya){if(!ya)return;var za=ya.range,ab=ya.values;if(!za){v.error('nullrange',{target:xa,commentList:ya});return;}var bb={};for(var cb=0;cb<za.length;cb++)bb[za.offset+cb]=ab[cb]||ba;da(xa).addResourcesAndExecute(bb);if(ya.count!==undefined){y[xa]=ya.count;z[xa]=0;}var db=ya.ftentidentifier||xa;l.didUpdateFeedback(db);}function ja(xa){xa.forEach(function(ya){y[ya.entidentifier]=ya.commentcount;z[ya.entidentifier]=0;l.didUpdateFeedback(ya.entidentifier);});}function ka(xa){var ya=wa.getComment(xa.commentid);if(ya){var za={},ab=xa.clientid&&g.isExistingClientID(xa.clientid);if(!ab){za.hasviewerliked=xa.viewerliked;za.likecount=xa.likecount;}za.likeconfirmhash=s(0,1024);va(xa.commentid,za);}}function la(xa){var ya=xa.commentid,za=wa.getComment(xa.commentid);if(za)va(ya,{translatedtext:xa.translatedtext});}function ma(xa){var ya={reportLink:xa.reportLink,commenterIsFOF:xa.commenterIsFOF,userIsMinor:xa.userIsMinor};if(xa.undoData)ya.undoData=xa.undoData;return ya;}function na(xa,ya){if(xa){if(ya!==undefined){var za=(z[xa]||0)+(ya?1:-1);z[xa]=Math.max(za,0);}var ab=wa.getComment(xa);if(ab){var bb={replycount:wa.getDisplayedCommentCount(xa)};va(xa,bb);}}}function oa(xa){var ya=wa.getComment(xa.commentid);if(ya.status!==m.UFIStatus.DELETED){var za=ya.parentcommentid||ya.ftentidentifier;if(ya.status===m.UFIStatus.FAILED_ADD){na(za);}else na(za,true);}ua(ya,m.UFIStatus.DELETED);}function pa(xa){var ya=wa.getComment(xa.commentid);if(ya&&ya.status!==m.UFIStatus.DELETED)ua(ya,m.UFIStatus.LIVE_DELETED);}function qa(xa){var ya=wa.getComment(xa.commentid);if(ya.status===m.UFIStatus.DELETED){var za=ya.parentcommentid||ya.ftentidentifier;na(za,false);}ua(ya,m.UFIStatus.PENDING_UNDO_DELETE);}function ra(xa){va(xa.commentid,{attachment:null});}function sa(xa){var ya=wa.getComment(xa.commentid),za=xa.shouldHideAsSpam?m.UFIStatus.SPAM_DISPLAY:null;ua(ya,za);}function ta(xa){va(xa.commentid,ma(xa));}function ua(xa,ya){va(xa.id,{priorstatus:xa.status,status:ya});}function va(xa,ya){var za=wa.getComment(xa)||new h({});wa.setComment(xa,h.set(za,ya));l.didUpdateComment(za.id);l.didUpdateFeedback(za.ftentidentifier);}var wa={getComments:function(xa){var ya={};for(var za=0;za<xa.length;za++)ya[xa[za]]=wa.getComment(xa[za]);return ya;},getComment:function(xa){return w[ca(xa)];},setComment:function(xa,ya){w[ca(xa)]=ya;},resetFeedbackTarget:function(xa){var ya=da(xa),za=ya.getAllResources();for(var ab in za){var bb=za[ab];delete w[ca(bb)];}ea(xa);},getCommentsInRange:function(xa,ya,za,ab){var bb=da(xa);n.getFeedbackTarget(xa,function(cb){var db=[];for(var eb=0;eb<ya.length;eb++)db.push(ya.offset+eb);var fb=function(lb){var mb=[],nb=ya.offset,ob=ya.offset+ya.length-1;for(var pb=0;pb<ya.length;pb++){var qb=cb.isranked?ob-pb:nb+pb;if(lb[qb]!=ba){var rb=this.getComment(lb[qb]);if(rb)mb.push(rb);}}ab(mb);},gb=bb.getUnavailableResourcesFromRequest(db);if(gb.length){var hb=Math.min.apply(Math,gb),ib=Math.max.apply(Math,gb),jb=hb,kb=ib-hb+1;k.trySend('/ajax/ufi/comment_fetch.php',{ft_ent_identifier:cb.entidentifier,viewas:za,source:null,offset:jb,length:kb});}else bb.deferredExecuteOrEnqueue(db).addCallback(fb,this);}.bind(this));},getRepliesInRanges:function(xa,ya,za){var ab={},bb={},cb={},db=false;n.getFeedbackTarget(xa,function(eb){for(var fb in ya){var gb=da(fb),hb=ya[fb],ib=[];for(var jb=0;jb<hb.length;jb++)ib.push(hb.offset+jb);ab[fb]=gb.executeOrEnqueue(ib,function(tb){var ub=[];for(var vb=0;vb<hb.length;vb++){var wb=hb.offset+vb;if(tb[wb]!=ba){var xb=this.getComment(tb[wb]);if(xb)ub.push(xb);}}bb[fb]=ub;}.bind(this));cb[fb]=gb.getUnavailableResources(ab[fb]);if(cb[fb].length){db=true;gb.unsubscribe(ab[fb]);}}if(!db){za(bb);}else{var kb=[],lb=[],mb=[];for(var nb in cb){var ob=cb[nb];if(ob.length){var pb=Math.min.apply(Math,ob),qb=Math.max.apply(Math,ob),rb=pb,sb=qb-pb+1;kb.push(nb);lb.push(rb);mb.push(sb);}}k.trySend('/ajax/ufi/reply_fetch.php',{ft_ent_identifier:eb.entidentifier,parent_comment_ids:kb,source:null,offsets:lb,lengths:mb});}}.bind(this));return ab;},getCommentCount:function(xa){return y[xa]||0;},getDeletedCount:function(xa){return z[xa]||0;},getDisplayedCommentCount:function(xa){return (y[xa]||0)-(z[xa]||0);},_dump:function(){var xa={_comments:w,_commentList:x,_commentCounts:y,_deletedCounts:z,_localIDMap:aa};return JSON.stringify(xa);}};k.registerEndpoints({'/ajax/ufi/comment_fetch.php':{mode:k.IMMEDIATE,handler:l.handleUpdate.bind(l,m.UFIPayloadSourceType.ENDPOINT_COMMENT_FETCH)},'/ajax/ufi/reply_fetch.php':{mode:k.IMMEDIATE,handler:l.handleUpdate.bind(l,m.UFIPayloadSourceType.ENDPOINT_COMMENT_FETCH)}});l.subscribe('update-comments',function(xa,ya){if(ya.comments&&ya.comments.length)fa(ya.comments,ya.payloadsource);});l.subscribe('update-actions',function(xa,ya){if(ya.actions&&ya.actions.length)ha(ya.actions);});l.subscribe('update-comment-lists',function(xa,ya){var za=ya.commentlists;if(za&&Object.keys(za).length)if(!za.comments&&!za.replies){for(var ab in za)ia(ab,za[ab]);}else{if(za.comments)for(var bb in za.comments)for(var cb in za.comments[bb])ia(bb,za.comments[bb][cb]);if(za.replies)for(var db in za.replies)ia(db,za.replies[db]);}});l.subscribe('update-feedback',function(xa,ya){var za=ya.feedbacktargets;if(za&&za.length)ja(za);});e.exports=wa;});
__d("UFILikeLink.react",["React","TrackingNodes","tx"],function(a,b,c,d,e,f){var g=b('React'),h=b('TrackingNodes'),i=b('tx'),j=g.createClass({displayName:'UFILikeLink',render:function(){var k=this.props.likeAction?"Like":"Unlike",l=h.getTrackingInfo(this.props.likeAction?h.types.LIKE_LINK:h.types.UNLIKE_LINK),m=this.props.likeAction?"Like this":"Unlike this";return (g.DOM.a({className:"UFILikeLink",href:"#",role:"button",'aria-live':"polite",title:m,onClick:this.props.onClick,'data-ft':l},k));}});e.exports=j;});
__d("UFISubscribeLink.react",["React","tx"],function(a,b,c,d,e,f){var g=b('React'),h=b('tx'),i=g.createClass({displayName:'UFISubscribeLink',render:function(){var j=this.props.subscribeAction?"Follow Post":"Unfollow Post",k=this.props.subscribeAction?"Get notified when someone comments":"Stop getting notified when someone comments";return (g.DOM.a({className:"UFISubscribeLink",href:"#",role:"button",'aria-live':"polite",title:k,onClick:this.props.onClick},j));}});e.exports=i;});
__d("ProfileBrowserLink",["URI"],function(a,b,c,d,e,f){var g=b('URI'),h='/ajax/browser/dialog/',i='/browse/',j=function(l,m,n){return new g(l+m).setQueryData(n);},k={constructPageURI:function(l,m){return j(i,l,m);},constructDialogURI:function(l,m){return j(h,l,m);}};e.exports=k;});
__d("ProfileBrowserTypes",[],function(a,b,c,d,e,f){var g={LIKES:'likes',GROUP_MESSAGE_VIEWERS:'group_message_viewers',MUTUAL_FRIENDS:'mutual_friends'};e.exports=g;});
__d("fbt",["copyProperties","substituteTokens"],function(a,b,c,d,e,f){var g=b('copyProperties'),h=b('substituteTokens'),i=function(){};i._=function(j,k){var l={};for(var m=0;m<k.length;m++)g(l,k[m][1]);return h(j,l);};i.param=function(j,k){var l={};l[j]=k;return [null,l];};e.exports=i;});
__d("UFITimelineBlingBox.react",["ProfileBrowserLink","ProfileBrowserTypes","React","UFIBlingItem.react","URI","cx","fbt"],function(a,b,c,d,e,f){var g=b('ProfileBrowserLink'),h=b('ProfileBrowserTypes'),i=b('React'),j=b('UFIBlingItem.react'),k=b('URI'),l=b('cx'),m=b('fbt'),n=i.createClass({displayName:'UFITimelineBlingBox',render:function(){var o=[];if(this.props.likes&&this.props.enableShowLikes){var p=this._getProfileBrowserURI(),q="See who likes this",r=i.DOM.a({ajaxify:p.dialog,className:((o.length>0?"mls":'')),'data-ft':this.props['data-ft'],'data-gt':this.props['data-gt'],'data-hover':"tooltip",'data-tooltip-alignh':"right",'data-tooltip-uri':this._getLikeToolTipURI(),href:p.page,rel:"dialog",role:"button",title:q},j({contextArgs:this.props.contextArgs,count:this.props.likes,iconClassName:"UFIBlingBoxTimelineLikeIcon"},null));o.push(r);}if(this.props.comments&&this.props.enableShowComments){var s="Show comments",t=i.DOM.a({'aria-label':s,className:((o.length>0?"mls":'')),'data-ft':this.props['data-ft'],'data-hover':"tooltip",'data-tooltip-alignh':"right",href:"#",onClick:this.props.commentOnClick},j({contextArgs:this.props.contextArgs,count:this.props.comments,iconClassName:"UFIBlingBoxTimelineCommentIcon"},null));o.push(t);}if(this.props.reshares){var u="Show shares",v=this._getShareViewURI(),w=i.DOM.a({ajaxify:v.dialog,'aria-label':u,className:((o.length>0?"mls":'')),'data-ft':this.props['data-ft'],'data-hover':"tooltip",'data-tooltip-alignh':"right",href:v.page,rel:"async"},j({contextArgs:this.props.contextArgs,count:this.props.reshares,iconClassName:"UFIBlingBoxTimelineReshareIcon"},null));o.push(w);}return (i.DOM.span(null,o));},_getLikeToolTipURI:function(){if(this.props.feedbackFBID){var o=new k('/ajax/timeline/likestooltip.php').setQueryData({obj_fbid:this.props.feedbackFBID});return o.toString();}else return null;},_getProfileBrowserURI:function(){if(this.props.feedbackFBID){var o=h.LIKES,p={id:this.props.feedbackFBID},q=g.constructDialogURI(o,p),r=g.constructPageURI(o,p),s={dialog:q.toString(),page:r.toString()};return s;}},_getShareViewURI:function(){if(this.props.feedbackFBID){var o=new k('/ajax/shares/view').setQueryData({target_fbid:this.props.feedbackFBID}),p=new k('/shares/view').setSubdomain('www').setQueryData({id:this.props.feedbackFBID}),q={dialog:o.toString(),page:p.toString()};return q;}}});e.exports=n;});
__d("UFIUserActions",["AsyncResponse","ClientIDs","ImmutableObject","JSLogger","Nectar","UFICentralUpdates","UFIComments","UFIConstants","UFIFeedbackTargets","MercuryServerDispatcher","collectDataAttributes","copyProperties","tx"],function(a,b,c,d,e,f){var g=b('AsyncResponse'),h=b('ClientIDs'),i=b('ImmutableObject'),j=b('JSLogger'),k=b('Nectar'),l=b('UFICentralUpdates'),m=b('UFIComments'),n=b('UFIConstants'),o=b('UFIFeedbackTargets'),p=b('MercuryServerDispatcher'),q=b('collectDataAttributes'),r=b('copyProperties'),s=b('tx'),t=j.create('UFIUserActions'),u={BAN:'ban',UNDO_BAN:'undo_ban'},v={changeCommentLike:function(ja,ka,la){var ma=m.getComment(ja);if(ma.hasviewerliked!=ka){var na=w(la.target),oa=ka?1:-1,pa={commentid:ja,actiontype:n.UFIActionType.COMMENT_LIKE,viewerliked:ka,likecount:ma.likecount+oa};l.handleUpdate(n.UFIPayloadSourceType.USER_ACTION,{actions:[pa]});p.trySend('/ajax/ufi/comment_like.php',r({comment_id:ja,legacy_id:ma.legacyid,like_action:ka,ft_ent_identifier:ma.ftentidentifier,source:la.source,client_id:h.getNewClientID()},na));}},addComment:function(ja,ka,la,ma){o.getFeedbackTarget(ja,function(na){var oa=w(ma.target),pa=h.getNewClientID();if(!na.actorforpost)return;var qa={ftentidentifier:ja,body:{text:ka},author:na.actorforpost,id:pa,islocal:true,ufiinstanceid:ma.ufiinstanceid,likecount:0,hasviewerliked:false,parentcommentid:ma.replyid,timestamp:{time:Date.now(),text:"a few seconds ago"}},ra={actiontype:n.UFIActionType.SUBSCRIBE_ACTION,actorid:na.actorforpost,hasviewersubscribed:true,entidentifier:ja};l.handleUpdate(n.UFIPayloadSourceType.USER_ACTION,{comments:[qa],actions:[ra]});var sa=null;if(ma.replyid)sa=(m.getComment(ma.replyid)).fbid;p.trySend('/ajax/ufi/add_comment.php',r({ft_ent_identifier:na.entidentifier,comment_text:la,source:ma.source,client_id:pa,reply_fbid:sa,parent_comment_id:ma.replyid,timeline_log_data:ma.timelinelogdata,rootid:ma.rootid,attached_photo_fbid:ma.attachedphoto?ma.attachedphoto.fbid:0,giftoccasion:ma.giftoccasion},oa));});},editComment:function(ja,ka,la,ma){var na=w(ma.target),oa=m.getComment(ja);oa=i.set(oa,{status:n.UFIStatus.PENDING_EDIT,body:{text:ka},timestamp:{time:Date.now(),text:"a few seconds ago"},originalTimestamp:oa.timestamp.time,editnux:null,attachment:null});l.handleUpdate(n.UFIPayloadSourceType.USER_ACTION,{comments:[oa]});p.trySend('/ajax/ufi/edit_comment.php',r({ft_ent_identifier:oa.ftentidentifier,comment_text:la,source:ma.source,comment_id:oa.id,parent_comment_id:oa.parentcommentid},na));},translateComment:function(ja,ka){p.trySend('/ajax/ufi/translate_comment.php',{ft_ent_identifier:ja.ftentidentifier,comment_ids:[ja.id],source:ka.source});},setHideAsSpam:function(ja,ka,la){var ma=w(la.target),na=m.getComment(ja),oa={commentid:ja,actiontype:n.UFIActionType.COMMENT_SET_SPAM,shouldHideAsSpam:ka};l.handleUpdate(n.UFIPayloadSourceType.USER_ACTION,{actions:[oa]});p.trySend('/ajax/ufi/comment_spam.php',r({comment_id:ja,spam_action:ka,ft_ent_identifier:na.ftentidentifier,source:la.source},ma));},removeComment:function(ja,ka){var la=w(ka.target),ma=m.getComment(ja),na={actiontype:n.UFIActionType.DELETE_COMMENT,commentid:ja,oneclick:ka.oneclick};l.handleUpdate(n.UFIPayloadSourceType.USER_ACTION,{actions:[na]});p.trySend('/ajax/ufi/delete_comment.php',r({comment_id:ma.id,comment_legacyid:ma.legacyid,ft_ent_identifier:ma.ftentidentifier,one_click:ka.oneclick,source:ka.source,client_id:h.getNewClientID(),timeline_log_data:ka.timelinelogdata},la));},undoRemoveComment:function(ja,ka,la){var ma=m.getComment(ja);if(!ma.undoData){t.error('noundodata',{comment:ja});return;}var na=w(la.target),oa={actiontype:n.UFIActionType.UNDO_DELETE_COMMENT,commentid:ja};l.handleUpdate(n.UFIPayloadSourceType.USER_ACTION,{actions:[oa]});var pa=ma.undoData;pa.page_admin=ka;var qa=r(na,pa);p.trySend('/ajax/ufi/undo_delete_comment.php',qa);},banUser:function(ja,ka,la,ma){var na=la?u.BAN:u.UNDO_BAN;p.trySend('/ajax/ufi/ban_user.php',{page_id:ka,commenter_id:ja.author,action:na,comment_id:ja.id,client_side:true});},changeLike:function(ja,ka,la){o.getFeedbackTarget(ja,function(ma){var na=w(la.target);if(ma.hasviewerliked!==ka){var oa=ka?1:-1,pa={actiontype:n.UFIActionType.LIKE_ACTION,actorid:ma.actorforpost,hasviewerliked:ka,likecount:ma.likecount+oa,entidentifier:ja,likesentences:{current:ma.likesentences.alternate,alternate:ma.likesentences.current}};l.handleUpdate(n.UFIPayloadSourceType.USER_ACTION,{actions:[pa]});p.trySend('/ajax/ufi/like.php',r({like_action:ka,ft_ent_identifier:ja,source:la.source,client_id:h.getNewClientID(),rootid:la.rootid,giftoccasion:la.giftoccasion},na));}});},changeSubscribe:function(ja,ka,la){o.getFeedbackTarget(ja,function(ma){var na=w(la.target);if(ma.hasviewersubscribed!==ka){var oa={actiontype:n.UFIActionType.SUBSCRIBE_ACTION,actorid:ma.actorforpost,hasviewersubscribed:ka,entidentifier:ja};l.handleUpdate(n.UFIPayloadSourceType.USER_ACTION,{actions:[oa]});p.trySend('/ajax/ufi/subscribe.php',r({subscribe_action:ka,ft_ent_identifier:ja,source:la.source,client_id:h.getNewClientID(),rootid:la.rootid,comment_expand_mode:la.commentexpandmode},na));}});},fetchSpamComments:function(ja,ka,la,ma){p.trySend('/ajax/ufi/id_comment_fetch.php',{ft_ent_identifier:ja,viewas:ma,comment_ids:ka,parent_comment_id:la,source:null});},removePreview:function(ja,ka){var la=w(ka.target),ma={commentid:ja.id,actiontype:n.UFIActionType.REMOVE_PREVIEW};l.handleUpdate(n.UFIPayloadSourceType.USER_ACTION,{actions:[ma]});p.trySend('/ajax/ufi/remove_preview.php',r({comment_id:ja.id,ft_ent_identifier:ja.ftentidentifier,source:ka.source},la));}};function w(ja){if(!ja)return {ft:{}};var ka={ft:q(ja,['ft']).ft};k.addModuleData(ka,ja);return ka;}function x(ja){var ka=ja.request.data;g.defaultErrorHandler(ja);var la=ka.client_id||ka.comment_id,ma=m.getComment(la),na=(ma.status===n.UFIStatus.PENDING_EDIT)?n.UFIStatus.FAILED_EDIT:n.UFIStatus.FAILED_ADD;ma=i.setDeep(ma,{status:na,allowRetry:y(ja),body:{mentionstext:ka.comment_text}});l.handleUpdate(n.UFIPayloadSourceType.USER_ACTION,{comments:[ma]});}function y(ja){var ka=ja.getError();if(ka===1404102)return false;if(ja.silentError)return true;if(ka===1357012||ka===1357006)return false;return true;}function z(ja){var ka=ja.request.data,la=ka.comment_id,ma=m.getComment(la);ma=i.set(ma,{status:ma.priorstatus||null,priorstatus:undefined});l.handleUpdate(n.UFIPayloadSourceType.USER_ACTION,{comments:[ma]});}function aa(ja){var ka=ja.request.data,la=ka.comment_id,ma=m.getComment(la);if(ka.like_action===ma.hasviewerliked){var na=ma.hasviewerliked?-1:1,oa={commentid:la,actiontype:n.UFIActionType.COMMENT_LIKE,viewerliked:!ma.hasviewerliked,likecount:ma.likecount+na};l.handleUpdate(n.UFIPayloadSourceType.USER_ACTION,{actions:[oa]});}g.defaultErrorHandler(ja);}function ba(ja){var ka=ja.request.data,la=ka.ft_ent_identifier;o.getFeedbackTarget(la,function(ma){if(ma.hasviewerliked===ka.like_action){var na=ma.hasviewerliked?-1:1,oa={actiontype:n.UFIActionType.LIKE_ACTION,actorid:ma.actorforpost,hasviewerliked:!ma.hasviewerliked,likecount:ma.likecount+na,entidentifier:la,likesentences:{current:ma.likesentences.alternate,alternate:ma.likesentences.current}};l.handleUpdate(n.UFIPayloadSourceType.USER_ACTION,{actions:[oa]});}});g.defaultErrorHandler(ja);}function ca(ja){var ka=ja.request.data,la=ka.ft_ent_identifier;o.getFeedbackTarget(la,function(ma){if(ma.hasviewersubscribed===ka.subscribe_action){var na={actiontype:n.UFIActionType.SUBSCRIBE_ACTION,actorid:ma.actorforpost,hasviewersubscribed:!ma.hasviewersubscribed,entidentifier:la};l.handleUpdate(n.UFIPayloadSourceType.USER_ACTION,{actions:[na]});}});g.defaultErrorHandler(ja);}var da=function(ja){return l.handleUpdate.bind(l,ja);},ea=n.UFIPayloadSourceType;p.registerEndpoints({'/ajax/ufi/comment_like.php':{mode:p.BATCH_CONDITIONAL,handler:da(ea.ENDPOINT_COMMENT_LIKE),error_handler:aa,batch_if:fa,batch_function:ia},'/ajax/ufi/comment_spam.php':{mode:p.IMMEDIATE,handler:da(ea.ENDPOINT_COMMENT_SPAM),error_handler:z},'/ajax/ufi/add_comment.php':{mode:p.IMMEDIATE,handler:da(ea.ENDPOINT_ADD_COMMENT),error_handler:x},'/ajax/ufi/delete_comment.php':{mode:p.IMMEDIATE,handler:da(ea.ENDPOINT_DELETE_COMMENT),error_handler:z},'/ajax/ufi/undo_delete_comment.php':{mode:p.IMMEDIATE,handler:da(ea.ENDPOINT_UNDO_DELETE_COMMENT),error_handler:z},'/ajax/ufi/ban_user.php':{mode:p.IMMEDIATE,handler:da(ea.ENDPOINT_BAN)},'/ajax/ufi/edit_comment.php':{mode:p.IMMEDIATE,handler:da(ea.ENDPOINT_EDIT_COMMENT),error_handler:x},'/ajax/ufi/like.php':{mode:p.BATCH_CONDITIONAL,handler:da(ea.ENDPOINT_LIKE),error_handler:ba,batch_if:ga,batch_function:ia},'/ajax/ufi/subscribe.php':{mode:p.BATCH_CONDITIONAL,handler:da(ea.ENDPOINT_SUBSCRIBE),error_handler:ca,batch_if:ha,batch_function:ia},'/ajax/ufi/id_comment_fetch.php':{mode:p.IMMEDIATE,handler:da(ea.ENDPOINT_ID_COMMENT_FETCH)},'/ajax/ufi/remove_preview.php':{mode:p.IMMEDIATE,handler:da(ea.ENDPOINT_REMOVE_PREVIEW)},'/ajax/ufi/translate_comment.php':{mode:p.IMMEDIATE,handler:da(ea.ENDPOINT_TRANSLATE_COMMENT)}});function fa(ja,ka){return ja&&ja.ft_ent_identifier==ka.ft_ent_identifier&&ja.comment_id==ka.comment_id;}function ga(ja,ka){return ja&&ja.ft_ent_identifier==ka.ft_ent_identifier;}function ha(ja,ka){return ja&&ja.ft_ent_identifier==ka.ft_ent_identifier;}function ia(ja,ka){return ka;}e.exports=v;});
__d("UFIActionLinkController",["Arbiter","ClickTTIIdentifiers","CSS","DOMQuery","Parent","React","TrackingNodes","UFIBlingBox.react","UFICentralUpdates","UFIComments","UFIConstants","UFIFeedbackTargets","UFILikeLink.react","UFISubscribeLink.react","UFITimelineBlingBox.react","UFIUserActions","copyProperties"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('ClickTTIIdentifiers'),i=b('CSS'),j=b('DOMQuery'),k=b('Parent'),l=b('React'),m=b('TrackingNodes'),n=b('UFIBlingBox.react'),o=b('UFICentralUpdates'),p=b('UFIComments'),q=b('UFIConstants'),r=b('UFIFeedbackTargets'),s=b('UFILikeLink.react'),t=b('UFISubscribeLink.react'),u=b('UFITimelineBlingBox.react'),v=b('UFIUserActions'),w=b('copyProperties');function x(z,aa,ba){if(this._root)throw new Error('UFIActionLinkController attempted to initialize when a root was'+' already present');var ca=j.scry(z,aa)[0];if(ca){var da=document.createElement('span');ca.parentNode.replaceChild(da,ca);da.appendChild(ca);if(typeof ba==="function")ba(da);}else var ea=g.subscribe('PhotoSnowlift.DATA_CHANGE',function(){g.unsubscribe(ea);x(z,aa,ba);},g.SUBSCRIBE_NEW);}var y=function(z,aa,ba){this._id=aa.ftentidentifier;this._ftFBID=ba.targetfbid;this._source=aa.source;this._contextArgs=aa;this._ufiRoot=z;if(this._isSourceProfile(this._contextArgs.source)){this._attemptInitializeTimelineBling();}else this._attemptInitializeBling();if(ba.viewercanlike)this._attemptInitializeLike();if(ba.viewercansubscribetopost)this._attemptInitializeSubscribe();o.subscribe('feedback-updated',function(ca,da){var ea=da.updates;if(this._id in ea)this.render();}.bind(this));o.subscribe('feedback-id-changed',function(ca,da){var ea=da.updates;if(this._id in ea)this._id=ea[this._id];}.bind(this));};w(y.prototype,{_attemptInitializeBling:function(){x(this._ufiRoot,'^form .uiBlingBox',function(z){this._blingRoot=z;if(this._dataReady)this._renderBling();}.bind(this));},_attemptInitializeTimelineBling:function(){if(this._root)throw new Error('UFIActionLinkController attempted to initialize when a root was'+' already present');var z=j.scry(this._ufiRoot,'^form .fbTimelineFeedbackActions span')[0];if(z){i.addClass(z,"UFIBlingBoxTimeline");var aa=j.scry(z,'.fbTimelineFeedbackLikes')[0];this._enableShowLikes=aa?true:false;var ba=j.scry(z,'.fbTimelineFeedbackComments')[0];this._enableShowComments=ba?true:false;}this._blingTimelineRoot=z;if(this._dataReady)this._renderTimelineBling();},_attemptInitializeLike:function(){x(this._ufiRoot,'^form .like_link',function(z){this._likeRoot=z;if(this._dataReady)this._renderLike();}.bind(this));},_attemptInitializeSubscribe:function(){x(this._ufiRoot,'^form .unsub_link',function(z){this._subscribeRoot=z;if(this._dataReady)this._renderSubscribe();}.bind(this));},render:function(){this._dataReady=true;if(this._isSourceProfile(this._contextArgs.source)){this._renderTimelineBling();}else this._renderBling();this._renderLike();this._renderSubscribe();},_renderBling:function(){if(this._blingRoot)r.getFeedbackTarget(this._id,function(z){var aa=function(event){var da=k.byTag(event.target,"form");i.toggleClass(da,"collapsed_comments");i.toggleClass(da,"hidden_add_comment");event.preventDefault();}.bind(this),ba=m.getTrackingInfo(m.types.BLINGBOX),ca=n({likes:z.likecount,comments:p.getDisplayedCommentCount(this._id),reshares:z.sharecount,permalink:z.permalink,contextArgs:this._contextArgs,onClick:aa,'data-ft':ba},null);this._blingBox=l.renderComponent(ca,this._blingRoot);}.bind(this));},_renderTimelineBling:function(){if(this._blingTimelineRoot)r.getFeedbackTarget(this._id,function(z){var aa=m.getTrackingInfo(m.types.BLINGBOX),ba=h.getUserActionID(h.types.TIMELINE_SEE_LIKERS),ca=function(event){var ea=k.byTag(event.target,"form");i.removeClass(ea,"collapsed_comments");var fa=j.scry(ea,'a.UFIPagerLink');if(fa.length)fa[0].click();event.preventDefault();}.bind(this),da=u({comments:p.getDisplayedCommentCount(this._id),commentOnClick:ca,contextArgs:this._contextArgs,'data-ft':aa,'data-gt':ba,enableShowComments:this._enableShowComments,enableShowLikes:this._enableShowLikes,feedbackFBID:this._ftFBID,likes:z.likecount,reshares:z.sharecount},null);l.renderComponent(da,this._blingTimelineRoot);}.bind(this));},_renderLike:function(){if(this._likeRoot)r.getFeedbackTarget(this._id,function(z){var aa=!z.hasviewerliked,ba=function(event){v.changeLike(this._id,aa,{source:this._source,target:event.target,rootid:this._contextArgs.rootid,giftoccasion:this._contextArgs.giftoccasion});event.preventDefault();}.bind(this),ca=s({onClick:ba,likeAction:aa},null);this._likeLink=l.renderComponent(ca,this._likeRoot);}.bind(this));},_renderSubscribe:function(){if(this._subscribeRoot)r.getFeedbackTarget(this._id,function(z){var aa=!z.hasviewersubscribed,ba=function(event){v.changeSubscribe(this._id,aa,{source:this._source,target:event.target,rootid:this._contextArgs.rootid,commentexpandmode:z.commentexpandmode});event.preventDefault();}.bind(this),ca=t({onClick:ba,subscribeAction:aa},null);this._subscribeLink=l.renderComponent(ca,this._subscribeRoot);}.bind(this));},_isSourceProfile:function(z){return z===q.UFIFeedbackSourceType.PROFILE;}});e.exports=y;});
__d("MentionsInputUtils",[],function(a,b,c,d,e,f){var g={generateDataFromTextWithEntities:function(h){var i=h.text,j=[];(h.ranges||[]).forEach(function(l){var m=l.entities[0];if(!m.external)j.push({uid:m.id,text:i.substr(l.offset,l.length),offset:l.offset,length:l.length,weakreference:!!m.weakreference});});var k={value:i,mentions:j};return k;}};e.exports=g;});
__d("ClipboardPhotoUploader",["ArbiterMixin","AsyncRequest","copyProperties"],function(a,b,c,d,e,f){var g=b('ArbiterMixin'),h=b('AsyncRequest'),i=b('copyProperties');function j(k,l){this.uploadURIString=k;this.data=l;}i(j.prototype,g,{handlePaste:function(event){if(!event.clipboardData)return;var k=event.clipboardData.items;if(!k)return;for(var l=0;l<k.length;++l){var m=k[l];if(m.kind==='file'&&m.type.indexOf('image/')!==-1){var n=new FormData();n.append('pasted_file',m.getAsFile());var o=new h();o.setURI(this.uploadURIString).setData(this.data).setRawData(n).setHandler(function(p){this.inform('upload_success',p);}.bind(this)).setErrorHandler(function(p){this.inform('upload_error',p);}.bind(this));this.inform('upload_start');o.send();break;}}}});e.exports=j;});
__d("CloseButton.react",["React","cx"],function(a,b,c,d,e,f){var g=b('React'),h=b('cx'),i=g.createClass({displayName:'CloseButton',render:function(){var j=this.props,k=j.size||'medium',l=j.appearance||'normal',m=k==='small',n=k==='huge',o=l==='dark',p=l==='inverted',q=(("uiCloseButton")+(m?' '+"uiCloseButtonSmall":'')+(n?' '+"uiCloseButtonHuge":'')+(m&&o?' '+"uiCloseButtonSmallDark":'')+(m&&p?' '+"uiCloseButtonSmallInverted":'')+(!m&&o?' '+"uiCloseButtonDark":'')+(!m&&p?' '+"uiCloseButtonInverted":''));return this.transferPropsTo(g.DOM.a({href:"#",role:"button",'aria-label':j.tooltip,'data-hover':j.tooltip&&'tooltip','data-tooltip-alignh':j.tooltip&&'center',className:q},null));}});e.exports=i;});
__d("LoadingIndicator.react",["React","joinClasses","keyMirror","merge"],function(a,b,c,d,e,f){var g=b('React'),h=b('joinClasses'),i=b('keyMirror'),j=b('merge'),k=i({white:true,blue:true,black:true}),l=i({small:true,medium:true,large:true}),m={white:{large:'/images/loaders/indicator_blue_large.gif',medium:'/images/loaders/indicator_blue_medium.gif',small:'/images/loaders/indicator_blue_small.gif'},blue:{large:'/images/loaders/indicator_white_large.gif',small:'/images/loaders/indicator_white_small.gif'},black:{large:'/images/loaders/indicator_black.gif'}},n=g.createClass({displayName:'LoadingIndicator',render:function(){var o=this.props.color,p=this.props.size;if(!m[o])return g.DOM.span(null,null);if(!m[o][p])return g.DOM.span(null,null);var q=((this.props.showonasync?'uiLoadingIndicatorAsync':''));if(this.props.className)q=h(this.props.className,q);var r=m[o][p],s=g.DOM.img({src:r,className:q},null);s.props=j(this.props,s.props);return s;}});n.SIZES=l;n.COLORS=k;e.exports=n;});
__d("LegacyMentionsInput.react",["PlaceholderListener","Bootloader","Event","Keys","React","cx"],function(a,b,c,d,e,f){b('PlaceholderListener');var g=b('Bootloader'),h=b('Event'),i=b('Keys'),j=b('React'),k=b('cx'),l=j.createClass({displayName:'ReactLegacyMentionsInput',componentDidMount:function(m){this.props.initialData&&this._initializeTextarea(m);},hasEnteredText:function(){return !!(this._mentionsInput&&this._mentionsInput.getValue().trim());},_handleKeydown:function(event){var m=event.nativeEvent,n=this.props.onEnterSubmit,o=h.getKeyCode(m)==i.RETURN&&!h.$E(m).getModifiers().any,p=this._mentionsInput&&this._mentionsInput.getTypeahead().getView().getSelection();if(n&&o&&!p){var q=event.target,r=q.value&&q.value.trim();if(r||this.props.acceptEmptyInput){var s={visibleValue:r,encodedValue:r};if(this._mentionsInput){s.encodedValue=this._mentionsInput.getRawValue().trim();this._mentionsInput.reset();}n(s,event);}event.preventDefault();}},_handleFocus:function(){this.props.onFocus&&this.props.onFocus();this._initializeTextarea(this.refs.root.getDOMNode());},_handleBlur:function(){this.props.onBlur&&this.props.onBlur();},_initializeTextarea:function(m){if(this._mentionsInput||this._bootloadingMentions)return;this._bootloadingMentions=true;g.loadModules(['CompactTypeaheadRenderer','ContextualTypeaheadView','InputSelection','MentionsInput','TextAreaControl','Typeahead','TypeaheadAreaCore','TypeaheadBestName','TypeaheadHoistFriends','TypeaheadMetrics','TypingDetector'],function(n,o,p,q,r,s,t,u,v,w,x){var y=this.refs.textarea.getDOMNode();new r(y);if(this.props.onTypingStateChange){var z=new x(y);z.init();z.subscribe('change',this.props.onTypingStateChange);}var aa={autoSelect:true,renderer:n,causalElement:y};if(this.props.viewOptionsTypeObjects)aa.typeObjects=this.props.viewOptionsTypeObjects;if(this.props.viewOptionsTypeObjectsOrder)aa.typeObjectsOrder=this.props.viewOptionsTypeObjectsOrder;var ba=new s(this.props.datasource,{ctor:o,options:aa},{ctor:t},this.refs.typeahead.getDOMNode()),ca=[u,v],da=new w({extraData:{event_name:'mentions'}});s.initNow(ba,ca,da);this._mentionsInput=new q(m,ba,y,{});this._mentionsInput.init({max:6},this.props.initialData);if(this.props.initialData)p.set(y,y.value.length);if(this.props.onPaste)h.listen(y,'paste',this.props.onPaste);this._bootloadingMentions=false;}.bind(this));},focus:function(){try{this.refs.textarea.getDOMNode().focus();}catch(m){}},render:function(){var m=(("textInput")+(' '+"mentionsTextarea")+(' '+"uiTextareaAutogrow")+(' '+"uiTextareaNoResize")+(' '+"UFIAddCommentInput")+(' '+"DOMControl_placeholder"));return (j.DOM.div({ref:"root",className:"uiMentionsInput textBoxContainer ReactLegacyMentionsInput"},[j.DOM.div({className:"highlighter"},j.DOM.div(null,j.DOM.span({className:"highlighterContent hidden_elem"},null))),j.DOM.div({ref:"typeahead",className:"uiTypeahead mentionsTypeahead"},j.DOM.div({className:"wrap"},[j.DOM.input({type:"hidden",autocomplete:"off",className:"hiddenInput"},null),j.DOM.div({className:"innerWrap"},j.DOM.textarea({ref:"textarea",name:"add_comment_text",className:m,title:this.props.placeholder,content:this.props.placeholder,placeholder:this.props.placeholder,onFocus:this._handleFocus.bind(this),onBlur:this._handleBlur.bind(this),onKeyDown:this._handleKeydown.bind(this)},null))])),j.DOM.input({type:"hidden",autocomplete:"off",className:"mentionsHidden",value:""},null)]));}});e.exports=l;});
__d("UFIClassNames",["cx"],function(a,b,c,d,e,f){var g=b('cx');e.exports={ACTOR_IMAGE:"img UFIActorImage _54ru",ROW:"UFIRow",UNSEEN_ITEM:"UFIUnseenItem"};});
__d("LeftRight.react",["React","cx","keyMirror","throwIf"],function(a,b,c,d,e,f){var g=b('React'),h=b('cx'),i=b('keyMirror'),j=b('throwIf'),k=i({left:true,right:true,both:true});function l(n){j(!n.children||n.children.length<1||n.children.length>2,'LeftRight component must have one or two children.');}var m=g.createClass({displayName:'LeftRight',render:function(){l(this.props);var n=this.props.direction||k.both,o=(n===k.both),p=g.DOM.div({className:((o||n===k.left?"lfloat":''))},this.props.children[0]),q=(this.props.children.length<2)?null:g.DOM.div({className:((o||n===k.right?"rfloat":''))},this.props.children[1]),r=(n===k.right&&q)?[q,p]:[p,q];return this.transferPropsTo(g.DOM.div({className:"clearfix"},r));}});m.DIRECTION=k;e.exports=m;});
__d("ImageBlock.react",["LeftRight.react","React","cx","joinClasses","throwIf"],function(a,b,c,d,e,f){var g=b('LeftRight.react'),h=b('React'),i=b('cx'),j=b('joinClasses'),k=b('throwIf');function l(p){k(!p.children||p.children.length>3||p.children.length<1,"ImageBlock requires two or three children.");}function m(p){return (("img")+(' '+"_8o")+(p==='small'?' '+"_8r":'')+(p==='medium'?' '+"_8s":'')+(p==='large'?' '+"_8t":''));}function n(p,q,r){p.props.className=j(m(q),p.props.className,r);}var o=h.createClass({displayName:'ImageBlock',render:function(){l(this.props);var p=this.props.children[0],q=this.props.children[1],r=this.props.children[2],s=this.props.spacing||'small';n(p,s,this.props.imageClassName);var t=j(this.props.contentClassName,(("_42ef")+(s==='small'?' '+"_8u":'')));if(p.tagName=='IMG'){if(p.props.alt===undefined)p.props.alt='';}else if((p.tagName=='A'||p.tagName=='LINK')&&p.props.tabIndex===undefined&&p.props.title===undefined&&p.props['aria-label']===undefined){p.props.tabIndex='-1';p.props['aria-hidden']='true';}var u;if(!r){u=h.DOM.div({className:t},q);}else u=g({className:t,direction:g.DIRECTION.right},[q,r]);return this.transferPropsTo(g({direction:g.DIRECTION.left},[p,u]));}});e.exports=o;});
__d("UFIImageBlock.react",["ImageBlock.react","React","cx"],function(a,b,c,d,e,f){var g=b('ImageBlock.react'),h=b('React'),i=b('cx'),j=h.createClass({displayName:'UFIImageBlock',render:function(){return this.transferPropsTo(g({imageClassName:"UFIImageBlockImage",contentClassName:"UFIImageBlockContent"},this.props.children));}});e.exports=j;});
__d("UFIAddComment.react",["Bootloader","ClipboardPhotoUploader","CloseButton.react","Event","Keys","LoadingIndicator.react","React","LegacyMentionsInput.react","TrackingNodes","Run","UFIClassNames","UFIImageBlock.react","cx","joinClasses","tx"],function(a,b,c,d,e,f){var g=b('Bootloader'),h=b('ClipboardPhotoUploader'),i=b('CloseButton.react'),j=b('Event'),k=b('Keys'),l=b('LoadingIndicator.react'),m=b('React'),n=b('LegacyMentionsInput.react'),o=b('TrackingNodes'),p=b('Run'),q=b('UFIClassNames'),r=b('UFIImageBlock.react'),s=b('cx'),t=b('joinClasses'),u=b('tx'),v="Write a comment...",w="Write a reply...",x="fcg fss UFICommentTip",y=19,z='/ajax/ufi/upload/',aa=m.createClass({displayName:'UFIAddComment',getInitialState:function(){return {attachedPhoto:null,isCommenting:false,isLoadingPhoto:false,isOnBeforeUnloadListenerAdded:false};},_onKeyDown:function(event){if(this.props.isEditing&&j.getKeyCode(event.nativeEvent)===k.ESC)this.props.onCancel();if(!this.state.isOnBeforeUnloadListenerAdded){p.onBeforeUnload(this._handleUnsavedChanges.bind(this));this.setState({isOnBeforeUnloadListenerAdded:true});}},_handleUnsavedChanges:function(){var ba=a.PageTransitions;if(ba){var ca=ba.getNextURI(),da=ba.getMostRecentURI();if(ca.getQueryData().hasOwnProperty('theater')||da.getQueryData().hasOwnProperty('theater'))return;}if(this.refs&&this.refs.mentionsinput&&this.refs.mentionsinput.hasEnteredText())return "You haven't finished your comment yet. Do you want to leave without finishing?";},_blur:function(){if(this.refs.mentionsinput&&this.refs.mentionsinput.hasEnteredText())return;this.setState({isCommenting:false});},_onPaste:m.autoBind(function(event){var ba=new h(z,this._getPhotoUploadData());this._cancelCurrentSubscriptions();this._subscriptions=[ba.subscribe('upload_start',this._prepareForAttachedPhotoPreview.bind(this)),ba.subscribe('upload_error',this._onRemoveAttachedPhotoPreviewClicked.bind(this)),ba.subscribe('upload_success',function(ca,da){this._onPhotoUploadComplete(da);}.bind(this))];ba.handlePaste(event);}),_cancelCurrentSubscriptions:function(){if(this._subscriptions)this._subscriptions.forEach(function(ba){ba.unsubscribe();});},componentWillUnmount:function(){this._cancelCurrentSubscriptions();},focus:function(){if(this.refs&&this.refs.mentionsinput)this.refs.mentionsinput.focus();},render:function(){var ba=!this.props.contextArgs.collapseaddcomment||this.state.isCommenting,ca=null;if(this.props.isEditing){ca=m.DOM.span({className:x},"Press Esc to cancel.");}else if(this.props.showSendOnEnterTip){ca=m.DOM.span({className:x},"Press Enter to post.");}else if(this.props.subtitle)ca=m.DOM.span({className:x},this.props.subtitle);var da=null,ea=this.state.attachedPhoto,fa=null;if(this.props.allowPhotoAttachments){fa=this._onPaste;var ga=m.DOM.input({ref:"PhotoInput",accept:"image/*",className:"_n",name:"file[]",type:"file",multiple:false},null),ha=ea?"UFICommentPhotoAttachedIcon":"UFICommentPhotoIcon",ia="UFIPhotoAttachLinkWrapper _m";da=m.DOM.div({ref:"PhotoInputContainer",className:ia,'data-hover':"tooltip",'data-tooltip-alignh':"center",'aria-label':"Attach a Photo"},[m.DOM.i({ref:"PhotoInputControl",className:ha},null),ga]);}var ja=o.getTrackingInfo(o.types.ADD_COMMENT_BOX),ka=t(q.ACTOR_IMAGE,((!ba?"hidden_elem":''))),la=m.DOM.div({className:"UFIReplyActorPhotoWrapper"},m.DOM.img({className:ka,src:this.props.viewerActor.thumbSrc},null)),ma=t(q.ROW,((this.props.hide?"noDisplay":'')+(' '+"UFIAddComment")+(this.props.allowPhotoAttachments?' '+"UFIAddCommentWithPhotoAttacher":'')+(this.props.withoutSeparator?' '+"UFIAddCommentWithoutSeparator":'')+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":''))),na=!!this.props.replyCommentID?w:v,oa=this.props.contextArgs.entstream?this._blur.bind(this):null,pa=this.props.contextArgs.viewoptionstypeobjects,qa=this.props.contextArgs.viewoptionstypeobjectsorder,ra=null,sa=this.props.onCommentSubmit;if(ea){ra=m.DOM.div({isStatic:true,dangerouslySetInnerHTML:this.state.attachedPhoto.markup},null);ca=null;}else if(this.state.isLoadingPhoto)ra=l({color:"white",className:"UFICommentPhotoAttachedPreviewLoadingIndicator",size:"medium"},null);var ta;if(ra!=null){ta=m.DOM.div({className:"UFICommentPhotoAttachedPreview"},[ra,i({onClick:this._onRemoveAttachedPhotoPreviewClicked.bind(this)},null)]);sa=function(ua,event){this.setState({isLoadingPhoto:false,attachedPhoto:null});this.props.onCommentSubmit(ua,event);}.bind(this);}return (m.DOM.li({className:ma,onKeyDown:this._onKeyDown.bind(this),'data-ft':ja},r({className:"UFIMentionsInputWrap"},[la,m.DOM.div(null,[n({initialData:this.props.initialData,placeholder:na,ref:"mentionsinput",datasource:this.props.mentionsDataSource,acceptEmptyInput:this.props.isEditing||this.props.contextArgs.attachedphoto,onEnterSubmit:sa,onFocus:this.setState.bind(this,{isCommenting:true}),viewOptionsTypeObjects:pa,viewOptionsTypeObjectsOrder:qa,onBlur:oa,onTypingStateChange:this.props.onTypingStateChange,onPaste:fa},null),ca,da,ta])])));},componentDidMount:function(ba){if(!this.props.allowPhotoAttachments)return;var ca=this.refs.PhotoInputContainer.getDOMNode(),da=this.refs.PhotoInputControl.getDOMNode(),ea=this.refs.PhotoInput.getDOMNode(),fa=j.listen(ca,'click',function(event){g.loadModules(['FileInput','FileInputUploader','Input'],function(ga,ha,ia){new ga(ca,da,ea);var ja=new ha(ea).setURI(z).setData(this._getPhotoUploadData());j.listen(ea,'change',function(event){var ka=ia.getValue(event.getTarget());if(ka){this._prepareForAttachedPhotoPreview();ja.send();}}.bind(this));ja.subscribe('success',function(ka,la){this._onPhotoUploadComplete(la.response);}.bind(this));}.bind(this));fa.remove();}.bind(this));},_getPhotoUploadData:function(){return {profile_id:this.props.viewerActor.id,source:y};},_onPhotoUploadComplete:function(ba){if(!this.state.isLoadingPhoto)return;var ca=ba.getPayload();if(ca&&ca.fbid){this.props.contextArgs.attachedphoto=ca;this.setState({attachedPhoto:ca,isLoadingPhoto:false});}},_onRemoveAttachedPhotoPreviewClicked:function(event){this.props.contextArgs.attachedphoto=null;this.setState({attachedPhoto:null,isLoadingPhoto:false});},_prepareForAttachedPhotoPreview:function(){this.props.contextArgs.attachedphoto=null;this.setState({attachedPhoto:null,isLoadingPhoto:true});}});e.exports=aa;});
__d("UFIAddCommentController",["Arbiter","copyProperties","MentionsInputUtils","Parent","UFIAddComment.react","React","ShortProfiles","UFICentralUpdates","UFIComments","UFIFeedbackTargets","UFIInstanceState","UFIUserActions"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('copyProperties'),i=b('MentionsInputUtils'),j=b('Parent'),k=b('UFIAddComment.react'),l=b('React'),m=b('ShortProfiles'),n=b('UFICentralUpdates'),o=b('UFIComments'),p=b('UFIFeedbackTargets'),q=b('UFIInstanceState'),r=b('UFIUserActions');function s(t,u,v,w){this.id=u;this._ufiInstanceID=w.instanceid;this._contextArgs=w;this._replyCommentID=v;if(t){this.root=t;if(!this._contextArgs.rootid)this._contextArgs.rootid=t.id;this.render();n.subscribe('instance-updated',function(x,y){var z=y.updates;if(this._ufiInstanceID in z)this.render();}.bind(this));}n.subscribe('feedback-id-changed',function(x,y){var z=y.updates;if(this.id in z)this.id=z[this.id];}.bind(this));}h(s.prototype,{_onCommentSubmit:function(t,event){r.addComment(this.id,t.visibleValue,t.encodedValue,{source:this._contextArgs.source,ufiinstanceid:this._ufiInstanceID,target:event.target,replyid:this._replyCommentID,timelinelogdata:this._contextArgs.timelinelogdata,rootid:this._contextArgs.rootid,attachedphoto:this._contextArgs.attachedphoto,giftoccasion:this._contextArgs.giftoccasion});this._contextArgs.attachedphoto=null;p.getFeedbackTarget(this.id,function(u){if(u.isranked&&this._replyCommentID===null)q.updateState(this._ufiInstanceID,'scrolloninsert',true);var v=j.byTag(this.root,'form');if(v)g.inform('ufi/comment',{form:v,isranked:u.isranked});}.bind(this));return false;},_onTypingStateChange:function(t,u){},renderAddComment:function(t,u,v,w,x,y,z){var aa=this._contextArgs.logtyping?this._onTypingStateChange.bind(this):null,ba=null,ca=q.getKeyForInstance(this._ufiInstanceID,'isediting')&&!this._replyCommentID;return (k({hide:ca,replyCommentID:this._replyCommentID,viewerActor:t,initialData:ba,ref:w,withoutSeparator:x,onCommentSubmit:this._onCommentSubmit.bind(this),mentionsDataSource:u,onTypingStateChange:aa,showSendOnEnterTip:v,allowPhotoAttachments:y,source:this._contextArgs.source,contextArgs:this._contextArgs,subtitle:z},null));},renderEditComment:function(t,u,v,w,x){var y=o.getComment(u),z=i.generateDataFromTextWithEntities(y.body);return (k({viewerActor:t,initialData:z,onCommentSubmit:w,onCancel:x,mentionsDataSource:v,source:this._contextArgs.source,contextArgs:this._contextArgs,isEditing:true},null));},render:function(){if(!this.root)throw new Error('render called on UFIAddCommentController with no root');p.getFeedbackTarget(this.id,function(t){if(t.cancomment&&t.actorforpost)m.get(t.actorforpost,function(u){var v=this.renderAddComment(u,t.mentionsdatasource,t.showsendonentertip,null,null,t.allowphotoattachments,t.subtitle);this._addComment=l.renderComponent(v,this.root);}.bind(this));}.bind(this));}});e.exports=s;});
__d("Scrollable",["Event","Parent","UserAgent"],function(a,b,c,d,e,f){var g=b('Event'),h=b('Parent'),i=b('UserAgent'),j=function(event){var m=h.byClass(event.getTarget(),'scrollable');if(!m)return;if((typeof event.axis!=='undefined'&&event.axis===event.HORIZONTAL_AXIS)||(event.wheelDeltaX&&!event.wheelDeltaY)||(event.deltaX&&!event.deltaY))return;var n=event.wheelDelta||-event.deltaY||-event.detail,o=m.scrollHeight,p=m.clientHeight;if(o>p){var q=m.scrollTop;if((n>0&&q===0)||(n<0&&q>=o-p)){event.prevent();}else if(i.ie()<9)if(m.currentStyle){var r=m.currentStyle.fontSize;if(r.indexOf('px')<0){var s=document.createElement('div');s.style.fontSize=r;s.style.height='1em';r=s.style.pixelHeight;}else r=parseInt(r,10);m.scrollTop=q-Math.round(n/120*r);event.prevent();}}},k=document.documentElement;if(i.firefox()){var l=('WheelEvent' in window)?'wheel':'DOMMouseScroll';k.addEventListener(l,j,false);}else g.listen(k,'mousewheel',j);});
__d("LegacyScrollableArea.react",["Scrollable","Bootloader","React","Style","cx"],function(a,b,c,d,e,f){b('Scrollable');var g=b('Bootloader'),h=b('React'),i=b('Style'),j=b('cx'),k="uiScrollableArea native",l="uiScrollableAreaWrap scrollable",m="uiScrollableAreaBody",n="uiScrollableAreaContent",o=h.createClass({displayName:'ReactLegacyScrollableArea',render:function(){var p={height:this.props.height?this.props.height+'px':'auto'};return (h.DOM.div({className:k,ref:"root",style:p},h.DOM.div({className:l},h.DOM.div({className:m,ref:"body"},h.DOM.div({className:n},this.props.children)))));},getArea:function(){return this._area;},componentDidMount:function(){g.loadModules(['ScrollableArea'],this._loadScrollableArea.bind(this));},_loadScrollableArea:function(p){this._area=p.fromNative(this.refs.root.getDOMNode(),{fade:this.props.fade,persistent:this.props.persistent});var q=this.refs.body.getDOMNode();i.set(q,'width',this.props.width+'px');this.props.onScroll&&this._area.subscribe('scroll',this.props.onScroll);}});e.exports=o;});
__d("UFIAddCommentLink.react",["React","UFIClassNames","cx","joinClasses","tx"],function(a,b,c,d,e,f){var g=b('React'),h=b('UFIClassNames'),i=b('cx'),j=b('joinClasses'),k=b('tx'),l=g.createClass({displayName:'UFIAddCommentLink',render:function(){var m=j(h.ROW,(("UFIAddCommentLink")+(this.props.isFirstCommentComponent?' '+"UFIFirstCommentComponent":'')+(this.props.isLastCommentComponent?' '+"UFILastCommentComponent":'')+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":''))),n="Write a comment...";return (g.DOM.li({className:m,'data-ft':this.props['data-ft']},g.DOM.a({className:"UFICommentLink",onClick:this.props.onClick,href:"#",role:"button"},n)));}});e.exports=l;});
__d("HovercardLink",["Bootloader","URI"],function(a,b,c,d,e,f){var g=b('Bootloader'),h=b('URI'),i={getBaseURI:function(){return h('/ajax/hovercard/hovercard.php');},constructEndpoint:function(j,k){return i.constructEndpointWithGroupAndLocation(j,k,null);},constructEndpointWithLocation:function(j,k){return i.constructEndpointWithGroupAndLocation(j,null,k);},constructEndpointWithGroupAndLocation:function(j,k,l){g.loadModules(['Hovercard'],function(){});var m=new h(i.getBaseURI()).setQueryData({id:j.id}),n={};if(j.weakreference&&k)n.group_id=k;if(l)n.hc_location=l;m.addQueryData({extragetparams:JSON.stringify(n)});return m;}};e.exports=i;});
__d("UntrustedLink",["DOM","Event","URI","UserAgent","copyProperties"],function(a,b,c,d,e,f){var g=b('DOM'),h=b('Event'),i=b('URI'),j=b('UserAgent'),k=b('copyProperties');function l(m,n,o,p){this.dom=m;this.url=m.href;this.hash=n;this.func_get_params=p||function(){return {};};h.listen(this.dom,'click',this.onclick.bind(this));h.listen(this.dom,'mousedown',this.onmousedown.bind(this));h.listen(this.dom,'mouseup',this.onmouseup.bind(this));h.listen(this.dom,'mouseout',this.onmouseout.bind(this));this.onmousedown(h.$E(o));}l.bootstrap=function(m,n,o,p){if(m.__untrusted)return;m.__untrusted=true;new l(m,n,o,p);};l.prototype.getRewrittenURI=function(){var m=k({u:this.url,h:this.hash},this.func_get_params(this.dom)),n=new i('/l.php');return n.setQueryData(m).setSubdomain('www').setProtocol('http');};l.prototype.onclick=function(){(function(){this.setHref(this.url);}).bind(this).defer(100);this.setHref(this.getRewrittenURI());};l.prototype.onmousedown=function(m){if(m.button==2)this.setHref(this.getRewrittenURI());};l.prototype.onmouseup=function(){this.setHref(this.getRewrittenURI());};l.prototype.onmouseout=function(){this.setHref(this.url);};l.prototype.setHref=function(m){if(j.ie()<9){var n=g.create('span');g.appendContent(this.dom,n);this.dom.href=m;g.remove(n);}else this.dom.href=m;};e.exports=l;});
__d("Link.react",["React","UntrustedLink","$","mergeInto"],function(a,b,c,d,e,f){var g=b('React'),h=b('UntrustedLink'),i=b('$'),j=b('mergeInto'),k=g.createClass({displayName:'Link',_installLinkshimOnMouseDown:function(event){var l=this.props.href;if(l.shimhash)h.bootstrap(i(this._rootNodeID),l.shimhash);this.props.onMouseDown&&this.props.onMouseDown(event);},render:function(){var l=this.props.href,m=g.DOM.a(null,null);j(m.props,this.props);if(l){m.props.href=l.url;var n=!!l.shimhash;if(n){m.props.rel=m.props.rel?(m.props.rel+' nofollow'):'nofollow';m.props.onMouseDown=this._installLinkshimOnMouseDown.bind(this);}}else m.props.href='#';return m;}});e.exports=k;});
__d("HovercardLinkInterpolator",["Bootloader","cx","Event","HovercardLink","Link.react","Parent","React","URI"],function(a,b,c,d,e,f){var g=b('Bootloader'),h=b('cx'),i=b('Event'),j=b('HovercardLink'),k=b('Link.react'),l=b('Parent'),m=b('React'),n=b('URI');function o(p,q,r,s,t){var u=q.entities[0],v=r||(u.external?'_blank':null),w,x=((!u.external?"profileLink":'')+(u.weakreference?' '+"weakReference":''));if(u.hashtag){var y=function(aa){if(i.$E(aa.nativeEvent).isDefaultRequested())return;aa.preventDefault();if(l.byClass(aa.target,"_6kq")){g.loadModules(['EntstreamPubContentOverlay','PubContentTypes'],function(ba,ca){ba.display(ca.HASHTAG,u.id,p);});}else g.loadModules(['AsyncDialog'],function(ba){var ca=new n('/ajax/hashtag/view').setSubdomain('www').setQueryData({id:u.id});ba.bootstrap(ca.toString(),aa.target,'dialog');});},z=new n('/hashtag/view').setSubdomain('www').setQueryData({id:u.id});w=m.DOM.a({className:"_58cn",href:z.toString(),onClick:y,rel:"ignore"},[m.DOM.span({className:"_58cl"},p.substring(0,1)),m.DOM.span({className:"_58cm"},p.substring(1))]);}else if(u.weakreference){w=k({className:x,href:u,target:v},[m.DOM.i({className:"UFIWeakReferenceIcon"},null),p]);}else w=k({className:x,content:p,href:u,target:v},null);if(!u.external&&!u.hashtag)w.props['data-hovercard']=j.constructEndpointWithGroupAndLocation(u,s,t).toString();return w;}e.exports=o;});
__d("LinkButton",["cx","React"],function(a,b,c,d,e,f){var g=b('cx'),h=b('React'),i=function(j){var k=j.name&&j.value?j.name+'['+encodeURIComponent(j.value)+']':null;return (h.DOM.label({className:(("uiLinkButton")+(j.subtle?' '+"uiLinkButtonSubtle":'')+(j.showSaving?' '+"async_throbber":''))},h.DOM.input({type:j.inputType||'button',name:k,value:j.label,className:((j.showSaving?"stat_elem":''))},null)));};e.exports=i;});
__d("Timestamp.react",["LiveTimer","React"],function(a,b,c,d,e,f){var g=b('LiveTimer'),h=b('React'),i=h.createClass({displayName:'Timestamp',render:function(){var j=g.renderRelativeTimeToServer(this.props.time);return this.transferPropsTo(h.DOM.abbr({className:"livetimestamp",title:this.props.verbose,'data-utime':this.props.time,content:j.text||this.props.text},null));}});e.exports=i;});
__d("EmoteTypes",[],function(a,b,c,d,e,f){f.TEXT='text';f.EMOTE='emote';f.EMOTE_FBID='emote_fbid';});
__d("EmoticonsList",[],function(a,b,c,d,e,f){e.exports={emotes:{":)":"smile",":-)":"smile",":]":"smile","=)":"smile",":(":"frown",":-(":"frown",":[":"frown","=(":"frown",":P":"tongue",":-P":"tongue",":-p":"tongue",":p":"tongue","=P":"tongue","=D":"grin",":-D":"grin",":D":"grin",":o":"gasp",":-O":"gasp",":O":"gasp",":-o":"gasp",";)":"wink",";-)":"wink","8)":"glasses","8-)":"glasses","B)":"glasses","B-)":"glasses","B|":"sunglasses","8-|":"sunglasses","8|":"sunglasses","B-|":"sunglasses",">:(":"grumpy",">:-(":"grumpy",":/":"unsure",":-/":"unsure",":\\":"unsure",":-\\":"unsure","=/":"unsure","=\\":"unsure",":'(":"cry","3:)":"devil","3:-)":"devil","O:)":"angel","O:-)":"angel",":*":"kiss",":-*":"kiss","<3":"heart","&lt;3":"heart","♥":"heart","^_^":"kiki","-_-":"squint","o.O":"confused","O.o":"confused_rev",">:o":"upset",">:O":"upset",">:-O":"upset",">:-o":"upset",">_<":"upset",">.<":"upset",":v":"pacman",":|]":"robot",":3":"colonthree","<(\")":"penguin",":putnam:":"putnam","(^^^)":"shark","(y)":"like",":like:":"like","(Y)":"like",":poop:":"poop"},symbols:{smile:":)",frown:":(",tongue:":P",grin:"=D",gasp:":o",wink:";)",glasses:"8)",sunglasses:"B|",grumpy:">:(",unsure:":/",cry:":'(",devil:"3:)",angel:"O:)",kiss:":*",heart:"<3",kiki:"^_^",squint:"-_-",confused:"o.O",confused_rev:"O.o",upset:">:o",pacman:":v",robot:":|]",colonthree:":3",penguin:"<(\")",putnam:":putnam:",shark:"(^^^)",like:"(y)",poop:":poop:"},regexp:/(^|[\s'".])(:\)|:\-\)|:\]|=\)|:\(|:\-\(|:\[|=\(|:P|:\-P|:\-p|:p|=P|=D|:\-D|:D|:o|:\-O|:O|:\-o|;\)|;\-\)|8\)|8\-\)|B\)|B\-\)|B\||8\-\||8\||B\-\||>:\(|>:\-\(|:\/|:\-\/|:\\|:\-\\|=\/|=\\|:'\(|3:\)|3:\-\)|O:\)|O:\-\)|:\*|:\-\*|<3|&lt;3|\u2665|\^_\^|\-_\-|o\.O|O\.o|>:o|>:O|>:\-O|>:\-o|>_<|>\.<|:v|:\|\]|:3|<\("\)|:putnam:|\(\^\^\^\)|\(y\)|:like:|\(Y\)|:poop:)([\s'".,!?]|<br>|$)/};});
__d("createEmoteTokenizer",["EmoteTypes"],function(a,b,c,d,e,f){var g=b('EmoteTypes'),h=40;function i(j){return function(k){var l=k,m=[],n=h;while(n--){var o=j.regexp.exec(l);if(!o||!o.length)break;var p=o[2],q=o.index+o[1].length,r=l.substring(0,q);if(r)m.push({type:g.TEXT,text:r});var s=j.emotes[p];if(s){m.push({type:g.EMOTE,text:p,emote:s});}else m.push({type:g.TEXT,text:p});l=l.substring(q+p.length);}if(l)m.push({type:g.TEXT,text:l});return m;};}e.exports=i;});
__d("emoteFBIDTokenizer",["EmoteTypes"],function(a,b,c,d,e,f){var g=b('EmoteTypes'),h=/\[\[([a-z\d\.]+)\]\]/gi;function i(j){return j.split(h).map(function(k,l){if(l%2===0){return {type:g.TEXT,text:k};}else return {type:g.EMOTE_FBID,text:'[['+k+']]',value:k};});}e.exports=i;});
__d("Emote",["DOM","EmoteTypes","EmoticonsList","createEmoteTokenizer","emoteFBIDTokenizer","flattenArray","htmlize"],function(a,b,c,d,e,f){var g=b('DOM'),h=b('EmoteTypes'),i=b('EmoticonsList'),j=b('createEmoteTokenizer'),k=b('emoteFBIDTokenizer'),l=b('flattenArray'),m=b('htmlize'),n=j(i),o=e.exports={};o.htmlEmoteWithoutFBID=function(p,q){if(typeof q!='function')q=m;return l(n(p).map(function(r){if(r.type===h.TEXT){return q(r.text);}else if(r.type===h.EMOTE)return ['<span class="emoticon_text" aria-hidden="true">',r.text,'</span>',g.create('span',{},g.create('span',{title:r.text,className:'emoticon emoticon_'+r.emote})).innerHTML];})).join('');};o.htmlEmote=function(p,q){if(typeof q!='function')q=m;return l(k(p).map(function(r){if(r.type===h.TEXT){return o.htmlEmoteWithoutFBID(r.text,q);}else if(r.type===h.EMOTE_FBID)return ['<span class="emoticon_text" aria-hidden="true">',r.text,'</span>',g.create('span',{},g.create('img',{alt:r.text,className:'emoticon emoticon_custom',src:window.location.protocol+'//graph.facebook.com/'+encodeURIComponent(r.value)+'/picture'})).innerHTML];})).join('');};});
__d("SupportedEmoji",["cx"],function(a,b,c,d,e,f){var g=b('cx');e.exports={utf16Regex:/[\u203C\u2049\u2100-\u21FF\u2300-\u27FF\u2900-\u29FF\u2B00-\u2BFF\u3000-\u30FF\u3200-\u32FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDEFF]/,emoji:{127744:"_2b_",127746:"_2c0",127754:"_2c1",127769:"_2c2",127775:"_2c3",127793:"_2c4",127796:"_2c5",127797:"_2c6",127799:"_2c7",127800:"_2c8",127801:"_2c9",127802:"_2ca",127803:"_2cb",127806:"_2cc",127808:"_2cd",127809:"_2ce",127810:"_2cf",127811:"_2cg",127818:"_2ch",127822:"_2ci",127827:"_2cj",127828:"_2ck",127864:"_2cl",127866:"_2cm",127873:"_2cn",127875:"_2co",127876:"_2cp",127877:"_2cq",127880:"_2cr",127881:"_2cs",127885:"_2ct",127886:"_2cu",127887:"_2cv",127888:"_2cw",127891:"_2cx",127925:"_2cy",127926:"_2cz",127932:"_2c-",128013:"_2c_",128014:"_2d0",128017:"_2d1",128018:"_2d2",128020:"_2d3",128023:"_2d4",128024:"_2d5",128025:"_2d6",128026:"_2d7",128027:"_2d8",128031:"_2d9",128032:"_2da",128033:"_2db",128037:"_2dc",128038:"_2dd",128039:"_2de",128040:"_2df",128041:"_2dg",128043:"_2dh",128044:"_2di",128045:"_2dj",128046:"_2dk",128047:"_2dl",128048:"_2dm",128049:"_2dn",128051:"_2do",128052:"_2dp",128053:"_2dq",128054:"_491",128055:"_2dr",128056:"_2ds",128057:"_2dt",128058:"_2du",128059:"_2dv",128062:"_2dw",128064:"_2dx",128066:"_2dy",128067:"_2dz",128068:"_2d-",128069:"_2d_",128070:"_2e0",128071:"_2e1",128072:"_2e2",128073:"_2e3",128074:"_2e4",128075:"_2e5",128076:"_2e6",128077:"_2e7",128078:"_2e8",128079:"_2e9",128080:"_2ea",128102:"_2eb",128103:"_2ec",128104:"_2ed",128105:"_2ee",128107:"_2ef",128110:"_2eg",128111:"_2eh",128113:"_2ei",128114:"_2ej",128115:"_2ek",128116:"_2el",128117:"_2em",128118:"_2en",128119:"_2eo",128120:"_2ep",128123:"_2eq",128124:"_2er",128125:"_2es",128126:"_2et",128127:"_2eu",128128:"_2ev",128130:"_2ew",128131:"_2ex",128133:"_2ey",128139:"_2ez",128143:"_2e-",128144:"_2e_",128145:"_2f0",128147:"_2f1",128148:"_2f2",128150:"_2f3",128151:"_2f4",128152:"_2f5",128153:"_2f6",128154:"_2f7",128155:"_2f8",128156:"_2f9",128157:"_2fa",128162:"_2fb",128164:"_2fc",128166:"_2fd",128168:"_2fe",128169:"_2ff",128170:"_2fg",128187:"_2fh",128189:"_2fi",128190:"_2fj",128191:"_2fk",128192:"_2fl",128222:"_2fm",128224:"_2fn",128241:"_2fo",128242:"_2fp",128250:"_2fq",128276:"_2fr",128293:"_492",128513:"_2fs",128514:"_2ft",128515:"_2fu",128516:"_2fv",128518:"_2fw",128521:"_2fx",128523:"_2fy",128524:"_2fz",128525:"_2f-",128527:"_2f_",128530:"_2g0",128531:"_2g1",128532:"_2g2",128534:"_2g3",128536:"_2g4",128538:"_2g5",128540:"_2g6",128541:"_2g7",128542:"_2g8",128544:"_2g9",128545:"_2ga",128546:"_2gb",128547:"_2gc",128548:"_2gd",128549:"_2ge",128552:"_2gf",128553:"_2gg",128554:"_2gh",128555:"_2gi",128557:"_2gj",128560:"_2gk",128561:"_2gl",128562:"_2gm",128563:"_2gn",128565:"_2go",128567:"_2gp",128568:"_2gq",128569:"_2gr",128570:"_2gs",128571:"_2gt",128572:"_2gu",128573:"_2gv",128575:"_2gw",128576:"_2gx",128587:"_2gy",128588:"_2gz",128589:"_2g-",128591:"_2g_",9757:"_2h0",9786:"_2h1",9889:"_2h2",9924:"_2h3",9994:"_2h4",9995:"_2h5",9996:"_2h6",9728:"_2h7",9729:"_2h8",9748:"_2h9",9749:"_2ha",10024:"_2hb",10084:"_2hc"}};});
__d("Utf16",[],function(a,b,c,d,e,f){var g={decode:function(h){switch(h.length){case 1:return h.charCodeAt(0);case 2:return 65536|((h.charCodeAt(0)-55296)*1024)|(h.charCodeAt(1)-56320);}},encode:function(h){if(h<65536){return String.fromCharCode(h);}else return String.fromCharCode(55296+((h-65536)>>10))+String.fromCharCode(56320+(h%1024));}};e.exports=g;});
__d("Emoji",["cx","DOM","Emote","SupportedEmoji","htmlize","Utf16"],function(a,b,c,d,e,f){var g=b('cx'),h=b('DOM'),i=b('Emote'),j=b('SupportedEmoji'),k=b('htmlize'),l=b('Utf16'),m=40,n=e.exports={htmlEmojiAndEmote:function(o,p){return n.htmlEmoji(o,function(q){return i.htmlEmote(q,p);});},htmlEmoji:function(o,p){if(typeof p!='function')p=k;var q=o,r=[],s=m;while(s--){var t=j.utf16Regex.exec(q);if(!t||!t.length)break;var u=t[0],v=t.index;r.push(p(q.substring(0,v)));var w=l.decode(u);if(j.emoji[w]){var x="_1az _1a-"+' '+j.emoji[w],y=h.create('span',{className:x});r.push(h.create('span',{},y).innerHTML);}else r.push(p(u));q=q.substring(v+u.length);}r.push(p(q));return r.join('');}};});
__d("TextWithEmoticons.react",["Emoji","Emote","React"],function(a,b,c,d,e,f){var g=b('Emoji'),h=b('Emote'),i=b('React'),j=i.createClass({displayName:'ReactTextWithEmoticons',render:function(){if(!this.props.renderEmoticons&&!this.props.renderEmoji)return i.DOM.span({content:this.props.text},null);var k;if(this.props.renderEmoticons&&this.props.renderEmoji){k=g.htmlEmoji(this.props.text,h.htmlEmoteWithoutFBID);}else if(this.props.renderEmoticons){k=h.htmlEmoteWithoutFBID(this.props.text);}else k=g.htmlEmoji(this.props.text);return i.DOM.span({dangerouslySetInnerHTML:{__html:k}},null);}});e.exports=j;});
__d("TextWithEntities.react",["Link.react","React","TextWithEmoticons.react"],function(a,b,c,d,e,f){var g=b('Link.react'),h=b('React'),i=b('TextWithEmoticons.react');function j(o){return (o).replace(/<3\b|&hearts;/g,'\u2665');}function k(o,p){return (g({href:p.entities[0]},o));}function l(o,p){return o.offset-p.offset;}var m=/(\r\n|[\r\n])/,n=h.createClass({displayName:'ReactTextWithEntities',_formatStandardText:function(o){var p=o.split(m),q=[];for(var r=0;r<p.length;r++){var s=p[r];if(s)if(m.test(s)){q.push(h.DOM.br(null,null));}else if(this.props.renderEmoticons||this.props.renderEmoji){q.push(i({text:s,renderEmoticons:this.props.renderEmoticons,renderEmoji:this.props.renderEmoji},null));}else q.push(j(s));}return q;},render:function(){var o=0,p=this.props.ranges,q=this.props.aggregatedRanges,r=this.props.text,s=null;if(p){s=q?p.concat(q):p.slice();}else if(q)s=q.slice();if(s)s.sort(l);var t=[],u=s?s.length:0;for(var v=0,w=u;v<w;v++){var x=s[v];if(x.offset<o)continue;if(x.offset>o)t=t.concat(this._formatStandardText(r.substring(o,x.offset)));var y=r.substr(x.offset,x.length);t=t.concat([this.props.interpolator?this.props.interpolator(y,x):k(y,x)]);o=x.offset+x.length;}if(r.length>o)t=t.concat(this._formatStandardText(r.substr(o)));return h.DOM.span(null,t);}});e.exports=n;});
__d("SeeMore.react",["React","tx"],function(a,b,c,d,e,f){var g=b('React'),h=b('tx'),i=g.createClass({displayName:'SeeMore',getInitialState:function(){return {isCollapsed:true};},render:function(){var j=this.state.isCollapsed,k=!j?null:g.DOM.span({content:"..."},null),l=this.props.children[0],m=j?null:g.DOM.span(null,this.props.children[1]),n=!j?null:g.DOM.a({className:"SeeMoreLink fss",onClick:this.setState.bind(this,{isCollapsed:false}),content:"See More",href:"#",role:"button"},null);return (g.DOM.span({className:this.props.className},[l,k,n,m]));}});e.exports=i;});
__d("TruncatedTextWithEntities.react",["React","TextWithEntities.react","SeeMore.react"],function(a,b,c,d,e,f){var g=b('React'),h=b('TextWithEntities.react'),i=b('SeeMore.react');function j(n,o){var p=n.offset+n.length;return o>n.offset&&o<p;}function k(n,o){for(var p=0;p<n.length;p++){var q=n[p];if(j(q,o))return q.offset;}return o;}var l=function(n,o,p){var q=[],r=[],s=k(o,p);for(var t=0;t<o.length;t++){var u=o[t];if(u.offset<s){q.push(u);}else r.push({offset:u.offset-s,length:u.length,entities:u.entities});}return {first:{ranges:q,text:n.substr(0,s)},second:{ranges:r,text:n.substr(s)}};},m=g.createClass({displayName:'TruncatedTextWithEntities',render:function(){var n=this.props.maxLines,o=this.props.maxLength,p=this.props.truncationPercent||.6,q=Math.floor(p*o),r=this.props.text||'',s=this.props.ranges||[],t=r.split('\n'),u=t.length-1,v=o&&r.length>o,w=n&&u>n;if(w)q=Math.min(t.slice(0,n).join('\n').length,q);if(v||w){var x=l(r,s,q);return (g.DOM.span({'data-ft':this.props['data-ft'],dir:this.props.dir},i({className:this.props.className},[h({interpolator:this.props.interpolator,ranges:x.first.ranges,text:x.first.text,renderEmoticons:this.props.renderEmoticons,renderEmoji:this.props.renderEmoji},null),h({interpolator:this.props.interpolator,ranges:x.second.ranges,text:x.second.text,renderEmoticons:this.props.renderEmoticons,renderEmoji:this.props.renderEmoji},null)])));}else return (g.DOM.span({'data-ft':this.props['data-ft'],dir:this.props.dir},h({className:this.props.className,interpolator:this.props.interpolator,ranges:s,text:r,renderEmoticons:this.props.renderEmoticons,renderEmoji:this.props.renderEmoji},null)));}});e.exports=m;});
__d("UFIReplyLink.react",["React","tx"],function(a,b,c,d,e,f){var g=b('React'),h=b('tx'),i=g.createClass({displayName:'UFIReplyLink',render:function(){return (g.DOM.a({className:"UFIReplyLink",href:"#",onClick:this.props.onClick},"Reply"));}});e.exports=i;});
__d("UFISpamCount",["UFISpamCountImpl"],function(a,b,c,d,e,f){e.exports=b('UFISpamCountImpl').module||{enabled:false};});
__d("UFIComment.react",["function-extensions","AbstractEvent","Bootloader","CloseButton.react","Env","Focus","HovercardLink","HovercardLinkInterpolator","LinkButton","NumberFormat","ProfileBrowserLink","ProfileBrowserTypes","React","Timestamp.react","TrackingNodes","TruncatedTextWithEntities.react","UFIClassNames","UFIConfig","UFIConstants","UFIImageBlock.react","UFIInstanceState","UFIReplyLink.react","UFISpamCount","URI","cx","keyMirror","joinClasses","tx"],function(a,b,c,d,e,f){b('function-extensions');var g=b('AbstractEvent'),h=b('Bootloader'),i=b('CloseButton.react'),j=b('Env'),k=b('Focus'),l=b('HovercardLink'),m=b('HovercardLinkInterpolator'),n=b('LinkButton'),o=b('NumberFormat'),p=b('ProfileBrowserLink'),q=b('ProfileBrowserTypes'),r=b('React'),s=b('Timestamp.react'),t=b('TrackingNodes'),u=b('TruncatedTextWithEntities.react'),v=b('UFIClassNames'),w=b('UFIConfig'),x=b('UFIConstants'),y=b('UFIImageBlock.react'),z=b('UFIInstanceState'),aa=b('UFIReplyLink.react'),ba=b('UFISpamCount'),ca=b('URI'),da=b('cx'),ea=b('keyMirror'),fa=b('joinClasses'),ga=b('tx'),ha=x.UFIStatus,ia=' \u00b7 ',ja=ea({edit:true,hide:true,remove:true}),ka="UFICommentBody",la="UFICommentActorName",ma="UFICommentNotSpamLink",na="fsm fwn fcg UFICommentActions",oa="UFIDeletedMessageIcon",pa="UFIDeletedMessage",qa="UFIFailureMessageIcon",ra="UFIFailureMessage",sa="UFICommentLikeButton",ta="UFICommentLikeIcon",ua="UFITranslateLink",va="UFITranslatedText",wa="uiLinkSubtle",xa="stat_elem",ya="pls",za="fcg",ab=27,bb=null,cb=function(kb,lb){var mb=new ca('/ajax/like/tooltip.php').setQueryData({comment_fbid:kb.fbid,comment_from:kb.author,cache_buster:kb.likeconfirmhash||0});if(lb)mb.addQueryData({viewas:lb});return mb;},db=function(kb){var lb=kb.status;return lb===ha.FAILED_ADD||lb===ha.FAILED_EDIT;};function eb(kb){return kb.commenterIsFOF!==undefined&&kb.userIsMinor!==undefined&&kb.reportLink!==undefined;}var fb=r.createClass({displayName:'UFICommentLikeCount',render:function(){var kb=this.props.comment,lb=o.formatIntegerWithDelimiter(kb.likecount||0,this.props.contextArgs.numberdelimiter),mb=q.LIKES,nb={id:kb.fbid},ob=cb(this.props.comment,this.props.viewas),pb=r.DOM.i({className:ta},null),qb=r.DOM.span({content:lb},null);return (r.DOM.a({className:sa,role:"button",rel:"dialog",'data-hover':"tooltip",'data-tooltip-alignh':"center",'data-tooltip-uri':ob.toString(),ajaxify:p.constructDialogURI(mb,nb).toString(),href:p.constructPageURI(mb,nb).toString()},[pb,qb]));}}),gb=r.createClass({displayName:'UFICommentActions',render:function(){var kb=this.props,lb=kb.comment,mb=kb.feedback,nb=kb.markedAsSpamHere,ob=lb.status===ha.SPAM_DISPLAY,pb=this.props.showReplyLink,qb=this.props.hideAsSpamForPageAdmin,rb,sb,tb,ub,vb,wb,xb=!lb.islocal&&lb.status!==ha.LIVE_DELETED;if(xb){if(ob&&!nb){if(kb.viewerCanMarkNotSpam)rb=r.DOM.a({onClick:kb.onMarkAsNotSpam,className:ma,content:"Unhide",href:"#",role:"button"},null);if(qb&&mb.isthreaded&&mb.cancomment&&pb)vb=aa({comment:lb,onClick:kb.onCommentReply,contextArgs:kb.contextArgs},null);}else{if(mb.viewercanlike){var yb=t.getTrackingInfo(lb.hasviewerliked?t.types.UNLIKE_LINK:t.types.LIKE_LINK),zb=lb.hasviewerliked?"Unlike this comment":"Like this comment";sb=r.DOM.a({className:"UFILikeLink",href:"#",role:"button",onClick:kb.onCommentLikeToggle,'data-ft':yb,title:zb,content:lb.hasviewerliked?"Unlike":"Like"},null);}if(mb.isthreaded&&mb.cancomment&&pb)vb=aa({comment:lb,onClick:kb.onCommentReply,contextArgs:kb.contextArgs},null);if(lb.likecount>0)tb=fb({comment:lb,viewas:this.props.viewas,contextArgs:this.props.contextArgs},null);if(lb.spamcount&&ba.enabled)ub=ba({count:lb.spamcount},null);}if(lb.attachment&&lb.canremove)wb=r.DOM.a({onClick:kb.onPreviewRemove,content:"Remove Preview",href:"#",role:"button"},null);}var ac=hb({comment:lb,onRetrySubmit:kb.onRetrySubmit,showPermalink:kb.showPermalink},null),bc;if(kb.contextArgs.entstream){bc=[ac,sb,tb,vb,ub,rb,wb];}else if(mb.isthreaded){bc=[sb,vb,rb,wb,tb,ub,ac];}else bc=[ac,sb,tb,ub,vb,rb,wb];if(lb.status===ha.LIVE_DELETED){var cc=r.DOM.span({className:pa},r.DOM.i({className:oa,'data-hover':"tooltip",'aria-label':"Comment deleted"},null));bc.push(cc);}var dc=[];for(var ec=0;ec<bc.length;ec++)if(bc[ec]){dc.push(ia);dc.push(bc[ec]);}dc.shift();return (r.DOM.div({className:na},dc));}}),hb=r.createClass({displayName:'UFICommentMetadata',render:function(){var kb=this.props.comment,lb=this.props.onRetrySubmit,mb,nb;if(db(kb)){mb=[r.DOM.span({className:ra},[r.DOM.i({className:qa},null),"Unable to post comment."]),kb.allowRetry&&lb?[' ',r.DOM.a({onClick:lb,href:"#",role:"button"},"Try Again")]:null];}else{var ob=this.props.showPermalink?kb.permalink:null,pb=t.getTrackingInfo(t.types.SOURCE),qb=r.DOM.a({className:wa,href:ob,'data-ft':pb},s({time:kb.timestamp.time,text:kb.timestamp.text,verbose:kb.timestamp.verbose},null)),rb;switch(kb.source){case x.UFISourceType.MOBILE:rb=r.DOM.a({className:wa,href:new ca('/mobile/').setSubdomain('www').toString(),content:"mobile"},null);break;case x.UFISourceType.SMS:rb=r.DOM.a({className:wa,href:new ca('/mobile/?v=texts').setSubdomain('www').toString(),content:"text message"},null);break;case x.UFISourceType.EMAIL:rb=n({subtle:true,label:"email",inputType:"submit",name:"email_explain",value:true,className:xa},null);break;}nb=rb?ga._("{time} via {source}",{time:qb,source:rb}):qb;}var sb=null;if(kb.originalTimestamp){var tb=new ca('/ajax/edits/browser/comment').addQueryData({comment_token:kb.id}).toString();sb=[ia,r.DOM.a({ref:"EditLink",href:"#",role:"button",rel:"dialog",className:"uiLinkSubtle",ajaxify:tb,'data-hover':"tooltip",'aria-label':"Show edit history",title:"Show edit history",content:"Edited"},null)];}return (r.DOM.span(null,[nb,mb,sb]));},componentWillUpdate:function(kb){var lb=this.props.comment,mb=kb.comment;if(!lb.editnux&&!!mb.editnux)h.loadModules(['LegacyContextualDialog'],function(nb){var ob=new nb();ob.init(mb.editnux).setContext(this.refs.EditLink.getDOMNode()).setWidth(300).setPosition('below').show();}.bind(this));}}),ib=r.createClass({displayName:'UFISocialContext',render:function(){var kb=this.props.topMutualFriend,lb=this.props.otherMutualCount,mb=this.props.commentAuthor,nb=l.constructEndpoint(kb).toString(),ob=r.DOM.a({href:kb.uri,content:kb.name,'data-hovercard':nb},null),pb=mb.name.length+kb.name.length,qb;if(lb===0){qb=ga._("Friends with {name}",{name:ob});}else if(pb<ab){var rb;if(lb==1){rb="1 other";}else rb=ga._("{count} others",{count:lb});qb=ga._("Friends with {name} and {others}",{name:ob,others:this.getOthersLink(rb,mb,kb)});}else{var sb=ga._("{count} mutual friends",{count:lb+1});qb=this.getOthersLink(sb,mb);}return (r.DOM.span({className:"UFICommentSocialContext"},[ia,qb]));},getOthersLink:function(kb,lb,mb){var nb=q.MUTUAL_FRIENDS,ob={uid:lb.id},pb=new ca('/ajax/mutual_friends/tooltip.php').setQueryData({friend_id:lb.id});if(mb)pb.addQueryData({exclude_id:mb.id});var qb=p.constructDialogURI(nb,ob).toString();return (r.DOM.a({rel:"dialog",'data-hover':"tooltip",'data-tooltip-alignh':"center",'data-tooltip-uri':pb.toString(),ajaxify:qb,href:p.constructPageURI(nb,ob).toString()},kb));}}),jb=r.createClass({displayName:'UFIComment',getInitialState:function(){return {isHighlighting:this.props.comment.highlightcomment,wasHighlighted:this.props.comment.highlightcomment,markedAsSpamHere:false,oneClickRemovedHere:false,isInlinePageDeleted:false,isInlineBanned:false};},_onHideAsSpam:function(event){this.props.onHideAsSpam(event);this.setState({markedAsSpamHere:true});},_onMarkAsNotSpam:function(event){this.props.onMarkAsNotSpam(event);this.setState({markedAsSpamHere:false});},_onDeleteSpam:function(event){this.props.onOneClickRemove(event);this.setState({isInlinePageDeleted:true});},_onUndoDeleteSpam:function(event){this.props.onUndoOneClickRemove(event);this.setState({isInlinePageDeleted:false});},_onInlineBan:function(event){this.props.onInlineBan(event);this.setState({isInlineBanned:true});},_onUndoInlineBan:function(event){this.props.onUndoInlineBan(event);this.setState({isInlineBanned:false});},_onOneClickRemove:function(event){this.props.onOneClickRemove(event);this.setState({oneClickRemovedHere:true});},_onUndoOneClickRemove:function(event){this.props.onUndoOneClickRemove(event);this.setState({oneClickRemovedHere:false});},_onAction:function(event,kb){if(kb===ja.remove){this.props.onRemove(event);}else if(kb===ja.edit){this.props.onEdit(event);}else if(kb===ja.hide)this._onHideAsSpam(event);},_createRemoveReportMenu:function(event){if(this._removeReportMenu)return;var kb=[{label:"Delete Comment...",value:ja.remove},{label:"Hide Comment",value:ja.hide}],lb=g.persistentCloneOf(event),mb=lb.target;h.loadModules(['LegacyMenuUtils'],function(nb){this._removeReportMenu=nb.createAndShowPopoverMenu(mb,kb,this._onAction.bind(this,lb));}.bind(this));},_createEditDeleteMenu:function(event){var kb=g.persistentCloneOf(event);if(this._editDeleteMenu)return;var lb=[{label:"Edit...",value:ja.edit},{label:"Delete...",value:ja.remove}];h.loadModules(['LegacyMenuUtils'],function(mb){this._editDeleteMenu=mb.createAndShowPopoverMenu(kb.target,lb,this._onAction.bind(this,kb));}.bind(this));},_renderCloseButton:function(){var kb=this.props.comment,lb=this.props.feedback,mb=null,nb=null,ob=false;if(kb.canremove&&!this.props.hideAsSpamForPageAdmin){if(this.props.viewerIsAuthor){if(kb.canedit){nb="Edit or Delete";mb=this._createEditDeleteMenu.bind(this);ob=true;}else{nb="Remove";mb=this.props.onRemove;}}else if(lb.canremoveall)if(this.props.showRemoveReportMenu){nb="Remove or Report";mb=this._createRemoveReportMenu.bind(this);}else{nb="Remove";mb=this._onOneClickRemove.bind(this);}}else if(kb.canreport){nb="Hide";mb=this._onHideAsSpam.bind(this);}var pb=(("UFICommentCloseButton")+(ob?' '+"UFIEditButton":'')+(mb===null?' '+"hdn":''));return (i({onClick:mb,tooltip:nb,className:pb},null));},componentDidMount:function(kb){var lb=this.props.comment.ufiinstanceid,mb=z.getKeyForInstance(lb,'scrolloninsert');if(this.state.isHighlighting||mb){h.loadModules(['UFIScrollHighlight'],function(ob){ob.actOn.curry(kb).defer();});this.setState({isHighlighting:false});}var nb=z.getKeyForInstance(lb,'autofocus');if(nb){k.setWithoutOutline(this.refs.AuthorName.getDOMNode());z.updateState(lb,'autofocus',false);}},shouldComponentUpdate:function(kb){var lb=this.props;return (kb.comment!==lb.comment||kb.showReplyLink!==lb.showReplyLink||kb.showReplies!==lb.showReplies||kb.isFirst!==lb.isFirst||kb.isLast!==lb.isLast||kb.isFirstCommentComponent!==lb.isFirstCommentComponent||kb.isLastCommentComponent!==lb.isLastCommentComponent||kb.isFirstComponent!==lb.isFirstComponent||kb.isLastComponent!==lb.isLastComponent||kb.isFeaturedComment!==lb.isFeaturedComment||kb.hasPartialBorder!==lb.hasPartialBorder);},render:function(){var kb=this.props.comment,lb=this.props.feedback,mb=kb.status===ha.DELETED,nb=kb.status===ha.LIVE_DELETED,ob=kb.status===ha.SPAM_DISPLAY,pb=kb.status===ha.PENDING_UNDO_DELETE,qb=this.state.markedAsSpamHere,rb=this.state.oneClickRemovedHere,sb=this.state.isInlinePageDeleted,tb=this.props.hideAsSpamForPageAdmin,ub=this.state.isInlineBanned,vb=eb(kb),wb=!kb.status&&(kb.isunseen||kb.islocal);if(!kb.status&&lb.lastseentime){var xb=kb.originalTimestamp||kb.timestamp.time;wb=wb||xb>lb.lastseentime;}var yb=this.props.contextArgs.markedcomments;if(yb&&yb[kb.legacyid])wb=true;if(vb)if(bb){var zb,ac=null,bc=null,cc=null;if(tb){bc=ub?this._onUndoInlineBan.bind(this):this._onInlineBan.bind(this);if(sb){ac=this._onUndoDeleteSpam.bind(this);var dc=r.DOM.a({href:"#",content:"Undo",onClick:ac},null);zb=ga._("You've deleted this comment so no one can see it. {undo}.",{undo:dc});}else if(qb){zb="Now this is only visible to the person who wrote it and their friends.";cc=this._onDeleteSpam.bind(this);ac=this._onMarkAsNotSpam.bind(this);}}else if(qb){zb="This comment has been hidden.";cc=this._onDeleteSpam.bind(this);ac=this._onMarkAsNotSpam.bind(this);}else if(rb){zb="This comment has been removed.";ac=this._onUndoOneClickRemove.bind(this);}if(zb)return (r.DOM.li({className:fa(v.ROW,"UFIHide")},bb({notice:zb,comment:this.props.comment,authorProfiles:this.props.authorProfiles,onUndo:ac,onBanAction:bc,onDeleteAction:cc,isInlineBanned:ub,hideAsSpamForPageAdmin:tb},null)));}else h.loadModules(['UFICommentRemovalControls.react'],function(gc){bb=gc;this.forceUpdate.bind(this).defer();}.bind(this));var ec=fa(v.ROW,(("UFIComment")+(db(kb)?' '+"UFICommentFailed":'')+(mb||nb||ob||pb?' '+"UFITranslucentComment":'')+(this.state.isHighlighting?' '+"highlightComment":'')+(mb&&!rb?' '+"noDisplay":'')+(this.props.isFirst&&!this.props.isReply?' '+"UFIFirstComment":'')+(this.props.isLast&&!this.props.isReply?' '+"UFILastComment":'')+(this.props.isFirstCommentComponent?' '+"UFIFirstCommentComponent":'')+(this.props.isLastCommentComponent?' '+"UFILastCommentComponent":'')+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":'')+(this.props.isFeatured?' '+"UFIFeaturedComment":'')+(this.props.hasPartialBorder&&!this.props.contextArgs.entstream?' '+"UFIPartialBorder":''))),fc=this.renderComment();if(wb)if(this.props.contextArgs.entstream&&!this.props.isReply){fc=r.DOM.div({className:"_52mp"},[r.DOM.div({className:"_52mq"},null),fc]);}else ec=fa(ec,v.UNSEEN_ITEM);return (r.DOM.li({className:ec,'data-ft':this.props['data-ft']},fc));},renderComment:function(){var kb=this.props,lb=kb.comment,mb=kb.feedback,nb=kb.authorProfiles[lb.author],ob=lb.status===ha.SPAM_DISPLAY,pb=lb.status===ha.LIVE_DELETED,qb=!(ob||pb),rb=mb.canremoveall||lb.hiddenbyviewer,sb=null,tb=null;if(!kb.isLocallyComposed&&!this.state.wasHighlighted&&!lb.fromfetch){tb=x.commentTruncationLength;sb=x.commentTruncationMaxLines;}var ub;if(lb.photo_comment){ub=r.DOM.div({isStatic:true,dangerouslySetInnerHTML:lb.photo_comment.markup},null);}else if(lb.attachment)ub=r.DOM.div({isStatic:true,dangerouslySetInnerHTML:lb.attachment.markup},null);var vb=t.getTrackingInfo(t.types.SMALL_ACTOR_PHOTO),wb=t.getTrackingInfo(t.types.USER_NAME),xb=t.getTrackingInfo(t.types.USER_MESSAGE),yb=null,zb=null;if(lb.istranslatable&&(lb.translatedtext===undefined))yb=r.DOM.a({href:"#",role:"button",title:"Translate this comment",className:ua,onClick:kb.onCommentTranslate,content:"See Translation"},null);if(lb.translatedtext){var ac=new ca('http://bing.com/translator').addQueryData({text:lb.body.text});zb=r.DOM.span({className:va},[lb.translatedtext,r.DOM.span({className:ya},[" (",r.DOM.a({href:ac.toString(),className:za,content:"Translated by Bing"},null),") "])]);}var bc;if(j.rtl&&lb.body.dir==='ltr'){bc='rtl';}else if(!j.rtl&&lb.body.dir==='rtl')bc='ltr';var cc=l.constructEndpointWithLocation(nb,'ufi').toString(),dc=r.DOM.a({ref:"AuthorName",className:la,href:nb.uri,content:nb.name,'data-hovercard':cc,'data-ft':wb,dir:bc},null),ec=function(jc,kc){return m(jc,kc,'_blank',mb.grouporeventid,'ufi');},fc=u({className:ka,interpolator:ec,ranges:lb.body.ranges,text:lb.body.text,truncationPercent:x.commentTruncationPercent,maxLength:tb,maxLines:sb,renderEmoticons:w.renderEmoticons,renderEmoji:w.renderEmoji,'data-ft':xb,dir:lb.body.dir},null),gc;if(lb.socialcontext){var hc=lb.socialcontext,ic=ib({topMutualFriend:kb.authorProfiles[hc.topmutualid],otherMutualCount:hc.othermutualcount,commentAuthor:nb},null);gc=[dc,ic,r.DOM.div(null,fc)];}else gc=[dc,' ',fc];return (y({spacing:"medium"},[r.DOM.a({href:nb.uri,'data-hovercard':cc,'data-ft':vb},r.DOM.img({src:nb.thumbSrc,className:v.ACTOR_IMAGE,alt:""},null)),r.DOM.div(null,[r.DOM.div({className:"UFICommentContent"},[gc,yb,zb,ub]),gb({comment:lb,feedback:mb,onBlingBoxClick:kb.onBlingBoxClick,onCommentLikeToggle:kb.onCommentLikeToggle,onCommentReply:kb.onCommentReply,onPreviewRemove:kb.onPreviewRemove,onRetrySubmit:kb.onRetrySubmit,onMarkAsNotSpam:this._onMarkAsNotSpam.bind(this),viewerCanMarkNotSpam:rb,viewas:kb.contextArgs.viewas,showPermalink:kb.showPermalink,showReplyLink:kb.showReplyLink,showReplies:kb.showReplies,contextArgs:kb.contextArgs,markedAsSpamHere:this.state.markedAsSpamHere,hideAsSpamForPageAdmin:kb.hideAsSpamForPageAdmin},null)]),qb?this._renderCloseButton():null]));}});e.exports=jb;});
__d("UFIContainer.react",["React","TrackingNodes","cx"],function(a,b,c,d,e,f){var g=b('React'),h=b('TrackingNodes'),i=b('cx'),j=g.createClass({displayName:'UFIContainer',render:function(){var k=null;if(this.props.hasNub)k=g.DOM.li({className:"UFIArrow"},g.DOM.i(null,null));var l=((!this.props.isReplyList?"UFIList":'')+(this.props.isReplyList?' '+"UFIReplyList":'')+(this.props.isParentLiveDeleted?' '+"UFITranslucentReplyList":'')+(this.props.isFirstCommentComponent?' '+"UFIFirstCommentComponent":'')+(this.props.isLastCommentComponent?' '+"UFILastCommentComponent":'')+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":''));return (g.DOM.ul({className:l,'data-ft':h.getTrackingInfo(h.types.UFI)},[k,this.props.children]));}});e.exports=j;});
__d("GiftOpportunityLogger",["AsyncRequest","Event"],function(a,b,c,d,e,f){var g=b('AsyncRequest'),h=b('Event'),i={init:function(k,l,m){var n=false;h.listen(k,'click',function(o){if(n)return true;n=true;i.send(l,m);});},send:function(k,l){if(j[k.opportunity_id])return;j[k.opportunity_id]=true;return new g().setURI('/ajax/gifts/log/opportunity').setData({data:k,entry_point:l}).send();}},j={};e.exports=i;});
__d("ReactProps",["createObjectFrom","invariant"],function(a,b,c,d,e,f){var g=b('createObjectFrom'),h=b('invariant'),i={array:k('array'),bool:k('boolean'),func:k('function'),number:k('number'),object:k('object'),string:k('string'),oneOf:l,instanceOf:m},j='<<anonymous>>';function k(o){function p(q,r,s){var t=typeof q;if(t==='object'&&Array.isArray(q))t='array';h(t===o);}return n(p);}function l(o){var p=g(o);function q(r,s,t){h(p[r]);}return n(q);}function m(o){function p(q,r,s){h(q instanceof o);}return n(p);}function n(o){function p(q){function r(s,t,u){var v=s[t];if(v!=null){o(v,t,u||j);}else h(!q);}if(!q)r.isRequired=p(true);return r;}return p(false);}e.exports=i;});
__d("InlineBlock.react",["ReactProps","React","cx","joinClasses"],function(a,b,c,d,e,f){var g=b('ReactProps'),h=b('React'),i=b('cx'),j=b('joinClasses'),k={baseline:null,bottom:"_6d",middle:"_6b",top:"_6e"},l=h.createClass({displayName:'InlineBlock',props:{alignv:g.oneOf(['baseline','bottom','middle','top']),height:g.number},render:function(){var m=k[this.props.alignv||'baseline'],n=h.DOM.div({className:j("_6a",m)},this.props.children);if(this.props.height!=null){var o=h.DOM.div({className:j("_6a",m),style:{height:this.props.height+'px'}},null);n=h.DOM.div({className:"_6a",height:null},[o,n]);}return this.transferPropsTo(n);}});e.exports=l;});
__d("Image.react",["React","invariant","joinClasses"],function(a,b,c,d,e,f){var g=b('React'),h=b('invariant'),i=b('joinClasses'),j=g.createClass({displayName:'ReactImage',props:{src:function(k,l,m){var n=k[l];h(typeof n==='string'||(typeof n==='object'&&((n.sprited&&n.spriteMapCssClass&&n.spriteCssClass)||(!n.sprited&&n.uri))));}},render:function(){var k,l,m=this.props.src,n='img';l=true;if(typeof m==='string'){k=g.DOM.img({className:n,src:m},null);}else if(m.sprited){n=i(n,m.spriteMapCssClass,m.spriteCssClass);k=g.DOM.i({className:n,src:null},null);l=false;}else{k=g.DOM.img({className:n,src:m.uri},null);if(typeof this.props.width==='undefined'&&typeof this.props.height==='undefined'){k.props.width=m.width;k.props.height=m.height;}}if(this.props.alt)if(l){k.props.alt=this.props.alt;}else k.props.children=g.DOM.u(null,this.props.alt);return this.transferPropsTo(k);}});e.exports=j;});
__d("UFIGiftSentence.react",["AsyncRequest","CloseButton.react","GiftOpportunityLogger","ImageBlock.react","InlineBlock.react","LeftRight.react","Link.react","React","Image.react","UFIClassNames","UFIImageBlock.react","URI","DOM","ix","tx"],function(a,b,c,d,e,f){var g=b('AsyncRequest'),h=b('CloseButton.react'),i=b('GiftOpportunityLogger'),j=b('ImageBlock.react'),k=b('InlineBlock.react'),l=b('LeftRight.react'),m=b('Link.react'),n=b('React'),o=b('Image.react'),p=b('UFIClassNames'),q=b('UFIImageBlock.react'),r=b('URI'),s=b('DOM'),t=b('ix'),u=b('tx'),v=n.createClass({displayName:'UFIGiftSentence',_entry_point:'detected_gift_worthy_story_inline',render:function(){var w=this.props.recipient,x=this.props.giftdata,y=x?x.giftproductid:null,z=this._getURI(y).toString();this._log();return (n.DOM.li({className:p.ROW,ref:"UFIGiftSentence"},l({direction:"right"},[x?this._renderGiftSuggestion(z,w,x):this._renderGiftLink(z,w),h({size:"small",onClick:function(){var aa=this.refs.UFIGiftSentence.getDOMNode();s.remove(aa);this._requestClose();}.bind(this)},null)])));},_renderGiftSuggestion:function(w,x,y){return (q(null,[o({src:t('/images/group_gifts/icons/gift_icon_red-13px.png'),alt:"invite"},null),n.DOM.div(null,[n.DOM.span({className:"fwb"},u._("Surprise {name} with a gift",{name:x.firstName})),j({spacing:"medium",className:"mvs"},[m({className:"fwb",rel:"async-post",ajaxify:w,href:{url:'#'}},o({className:"UFIGiftProductImg",src:y.giftproductimgsrc,alt:"product image"},null)),k({alignv:"middle",height:79},[n.DOM.p({className:"mvs"},m({className:"fwb",rel:"async-post",ajaxify:w,href:{url:'#'}},y.giftproductname)),n.DOM.p({className:"mvs fcg"},y.giftproductpricerange),n.DOM.p({className:"mvs"},[m({rel:"async-post",ajaxify:w,href:{url:'#'}},'Give This Gift')," · ",m({rel:"async-post",href:{url:this._getURI().toString()}},'See All Gifts')])])])])]));},_renderGiftLink:function(w,x){return (q(null,[m({className:"UFIGiftIcon",tabIndex:"-1",href:{url:'#'},rel:"async-post",ajaxify:w},o({src:t('/images/group_gifts/icons/gift_icon_red-13px.png'),alt:"invite"},null)),m({rel:"async-post",href:{url:'#'},ajaxify:w},u._("Surprise {name} with a gift",{name:x.firstName}))]));},_log:function(){var w=this.props.giftdata,x={opportunity_id:this.props.contextArgs.ftentidentifier,sender_id:this.props.sender.id,recipient_id:this.props.recipient.id,link_description:'UFIGiftSentence',product_id:w?w.giftproductid:null,custom:{gift_occasion:this.props.contextArgs.giftoccasion,ftentidentifier:this.props.contextArgs.ftentidentifier}};i.send([x],this._entry_point);},_getURI:function(w){return r('/ajax/gifts/send').addQueryData({gift_occasion:this.props.contextArgs.giftoccasion,recipient_id:this.props.recipient.id,entry_point:this._entry_point,product_id:w});},_requestClose:function(){var w=r('/ajax/gifts/moments/close/');new g().setMethod('POST').setReadOnly(false).setURI(w).setData({action:'hide',data:JSON.stringify({type:'detected_moment',friend_id:this.props.recipient.id,ftentidentifier:this.props.contextArgs.ftentidentifier})}).send();}});e.exports=v;});
__d("UFILikeSentenceText.react",["HovercardLinkInterpolator","ProfileBrowserLink","ProfileBrowserTypes","React","TextWithEntities.react","URI"],function(a,b,c,d,e,f){var g=b('HovercardLinkInterpolator'),h=b('ProfileBrowserLink'),i=b('ProfileBrowserTypes'),j=b('React'),k=b('TextWithEntities.react'),l=b('URI');function m(o,p,q,r){if(r.count!=null){var s=i.LIKES,t={id:o.targetfbid},u=[];for(var v=0;v<p.length;v++)if(!p[v].count)u.push(p[v].entities[0].id);var w=new l('/ajax/like/tooltip.php').setQueryData({comment_fbid:o.targetfbid,comment_from:o.actorforpost,seen_user_fbids:u.length?u:true});return (j.DOM.a({rel:"dialog",ajaxify:h.constructDialogURI(s,t).toString(),href:h.constructPageURI(s,t).toString(),'data-hover':"tooltip",'data-tooltip-alignh':"center",'data-tooltip-uri':w.toString()},q));}else return g(q,r,null,null,'ufi');}var n=j.createClass({displayName:'UFILikeSentenceText',render:function(){var o=this.props.feedback,p=this.props.likeSentenceData,q=m.bind(null,o,p.ranges);return (k({interpolator:q,ranges:p.ranges,aggregatedRanges:p.aggregatedranges,text:p.text},null));}});e.exports=n;});
__d("UFILikeSentence.react",["LeftRight.react","ProfileBrowserLink","ProfileBrowserTypes","React","UFIClassNames","UFIImageBlock.react","UFILikeSentenceText.react","URI","cx","joinClasses","tx"],function(a,b,c,d,e,f){var g=b('LeftRight.react'),h=b('ProfileBrowserLink'),i=b('ProfileBrowserTypes'),j=b('React'),k=b('UFIClassNames'),l=b('UFIImageBlock.react'),m=b('UFILikeSentenceText.react'),n=b('URI'),o=b('cx'),p=b('joinClasses'),q=b('tx'),r=j.createClass({displayName:'UFILikeSentence',render:function(){var s=this.props.feedback,t=s.likesentences.current,u=this.props.contextArgs.entstream,v=p(k.ROW,s.likesentences.isunseen?k.UNSEEN_ITEM:'',(("UFILikeSentence")+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":''))),w=null,x=null;if(t.text)x=m({feedback:s,likeSentenceData:t},null);if(x&&!u){w=j.DOM.i({className:"UFILikeIcon"},null);if(s.viewercanlike&&!s.hasviewerliked)w=j.DOM.a({className:"UFILikeThumb",href:"#",tabIndex:"-1",title:"Like this",onClick:this.props.onTargetLikeToggle},w);}var y=null;if(s.seencount>0&&!u){var z=i.GROUP_MESSAGE_VIEWERS,aa={id:s.targetfbid},ba=h.constructDialogURI(z,aa),ca=h.constructPageURI(z,aa),da=new n('/ajax/ufi/seen_tooltip.php').setQueryData({ft_ent_identifier:s.entidentifier,displayed_count:s.seencount}),ea;if(s.seenbyall){ea="Seen by everyone";}else ea=s.seencount==1?"Seen by 1":q._("Seen by {count}",{count:s.seencount});y=j.DOM.a({rel:"dialog",ajaxify:ba.toString(),href:ca.toString(),tabindex:"-1",'data-hover':"tooltip",'data-tooltip-alignh':"left",'data-tooltip-uri':da.toString(),className:(("UFISeenCount")+(!!t.text?' '+"UFISeenCountRight":''))},[j.DOM.span({className:"UFISeenCountIcon"},null),ea]);}var fa=null;if(w&&x){fa=l(null,[w,x,y]);}else if(x&&u){fa=g(null,[x,y]);}else fa=y;return (j.DOM.li({className:v},fa));}});e.exports=r;});
__d("UFIPager.react",["LeftRight.react","React","UFIClassNames","UFIImageBlock.react","cx","joinClasses"],function(a,b,c,d,e,f){var g=b('LeftRight.react'),h=b('React'),i=b('UFIClassNames'),j=b('UFIImageBlock.react'),k=b('cx'),l=b('joinClasses'),m=h.createClass({displayName:'UFIPager',onPagerClick:function(n){!this.props.isLoading&&this.props.onPagerClick&&this.props.onPagerClick();n.nativeEvent.prevent();},render:function(){var n=this.onPagerClick.bind(this),o=((this.props.isLoading?"ufiPagerLoading":'')),p=l(i.ROW,this.props.isUnseen?i.UNSEEN_ITEM:'',(("UFIPagerRow")+(this.props.isFirstCommentComponent?' '+"UFIFirstCommentComponent":'')+(this.props.isLastCommentComponent?' '+"UFILastCommentComponent":'')+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":''))),q=h.DOM.a({className:"UFIPagerLink",onClick:n,href:"#",role:"button"},h.DOM.span({className:o},this.props.pagerLabel)),r=h.DOM.span({className:"fcg"},this.props.countSentence),s;if(this.props.contextArgs.entstream){s=(g({direction:g.DIRECTION.right},[q,r]));}else s=(j(null,[h.DOM.a({className:"UFIPagerIcon",onClick:n,href:"#",role:"button"},null),q,r]));return (h.DOM.li({className:p,'data-ft':this.props['data-ft']},s));}});e.exports=m;});
__d("UFIReplySocialSentence.react",["React","UFIClassNames","UFIImageBlock.react","cx","joinClasses","tx"],function(a,b,c,d,e,f){var g=b('React'),h=b('UFIClassNames'),i=b('UFIImageBlock.react'),j=b('cx'),k=b('joinClasses'),l=b('tx'),m=' \u00b7 ',n=g.createClass({displayName:'UFIReplySocialSentence',render:function(){var o=((this.props.isLoading?"UFIReplySocialSentenceLoading":'')),p=k(h.ROW,(("UFIReplySocialSentenceRow")+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":''))),q;if(this.props.isExpanded){q=this.props.replies>1?l._("Hide {count} Replies",{count:this.props.replies}):"Hide 1 Reply";}else q=this.props.replies>1?l._("{count} Replies",{count:this.props.replies}):"1 Reply";var r=Object.keys(this.props.authors),s=r.length&&!this.props.isExpanded,t,u;if(s){var v=this.props.authors[r[0]];t=g.DOM.img({alt:"",src:v.thumbSrc,className:h.ACTOR_IMAGE},null);u=[l._("{author} replied",{author:v.name}),m,q];}else{t=g.DOM.i({className:((!this.props.isExpanded?"UFIPagerIcon":'')+(this.props.isExpanded?' '+"UFICollapseIcon":''))},null);u=q;}return (g.DOM.li({className:p,'data-ft':this.props['data-ft']},g.DOM.a({className:"UFICommentLink",onClick:this.props.onClick,href:"#",role:"button"},i(null,[g.DOM.div({className:((s?"UFIReplyActorPhotoWrapper":''))},t),g.DOM.span({className:o},u)]))));}});e.exports=n;});
__d("UFIShareRow.react",["NumberFormat","React","UFIClassNames","UFIImageBlock.react","URI","cx","joinClasses","tx"],function(a,b,c,d,e,f){var g=b('NumberFormat'),h=b('React'),i=b('UFIClassNames'),j=b('UFIImageBlock.react'),k=b('URI'),l=b('cx'),m=b('joinClasses'),n=b('tx'),o=h.createClass({displayName:'UFIShareRow',render:function(){var p=new k('/ajax/shares/view').setQueryData({target_fbid:this.props.targetID}),q=new k('/shares/view').setSubdomain('www').setQueryData({id:this.props.targetID}),r;if(this.props.shareCount>1){var s=g.formatIntegerWithDelimiter(this.props.shareCount,this.props.contextArgs.numberdelimiter||',');r=n._("{count} shares",{count:s});}else r="1 share";var t=m(i.ROW,((this.props.isFirstComponent?"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":'')));return (h.DOM.li({className:t},j(null,[h.DOM.a({className:"UFIShareIcon",rel:"dialog",ajaxify:p.toString(),href:q.toString()},null),h.DOM.a({className:"UFIShareLink",rel:"dialog",ajaxify:p.toString(),href:q.toString()},r)])));}});e.exports=o;});
__d("UFISpamPlaceholder.react",["React","UFIClassNames","cx","tx"],function(a,b,c,d,e,f){var g=b('React'),h=b('UFIClassNames'),i=b('cx'),j=b('tx'),k=g.createClass({displayName:'UFISpamPlaceholder',render:function(){var l=(("UFISpamCommentWrapper")+(this.props.isLoading?' '+"UFISpamCommentLoading":''));return (g.DOM.li({className:h.ROW},g.DOM.a({href:"#",role:"button",className:"UFISpamCommentLink",onClick:this.props.onClick},g.DOM.span({'data-hover':"tooltip",'data-tooltip-alignh':"center",'aria-label':j._("{count} hidden",{count:this.props.numHidden}),className:l},g.DOM.i({className:"placeholderIcon"},null)))));}});e.exports=k;});
__d("UFI.react",["NumberFormat","React","LegacyScrollableArea.react","TrackingNodes","UFIAddCommentController","UFIAddCommentLink.react","UFIComment.react","UFIConstants","UFIContainer.react","UFIGiftSentence.react","UFIInstanceState","UFILikeSentence.react","UFIPager.react","UFIReplySocialSentence.react","UFIShareRow.react","UFISpamPlaceholder.react","copyProperties","isEmpty","tx"],function(a,b,c,d,e,f){var g=b('NumberFormat'),h=b('React'),i=b('LegacyScrollableArea.react'),j=b('TrackingNodes'),k=b('UFIAddCommentController'),l=b('UFIAddCommentLink.react'),m=b('UFIComment.react'),n=b('UFIConstants'),o=b('UFIContainer.react'),p=b('UFIGiftSentence.react'),q=b('UFIInstanceState'),r=b('UFILikeSentence.react'),s=b('UFIPager.react'),t=b('UFIReplySocialSentence.react'),u=b('UFIShareRow.react'),v=b('UFISpamPlaceholder.react'),w=b('copyProperties'),x=b('isEmpty'),y=b('tx'),z=h.createClass({displayName:'UFI',getInitialState:function(){return {requestRanges:w({},this.props.availableRanges),instanceShowRepliesMap:{},instanceShowReplySocialSentenceMap:{},loadingSpamIDs:{},isActiveLoading:false,hasPagedToplevel:false};},componentWillReceiveProps:function(aa){if(this.state.isActiveLoading){var ba=this.props.availableRanges[this.props.id],ca=aa.availableRanges[this.props.id];if(ba.offset!=ca.offset||ba.length!=ca.length){var da=(ca.offset<ba.offset)?0:ba.length;if(da<aa.availableComments.length){var ea=aa.availableComments[da].ufiinstanceid;q.updateState(ea,'autofocus',true);}}this.setState({isActiveLoading:false});}},render:function(){var aa=this.props,ba=aa.feedback,ca=aa.contextArgs,da=aa.source!=n.UFIFeedbackSourceType.ADS,ea=(!x(ba.likesentences.current)||(ba.seencount>0&&!ca.entstream))&&da,fa=null;if(ea)fa=r({contextArgs:ca,feedback:ba,onTargetLikeToggle:aa.onTargetLikeToggle},null);var ga=null;if(aa.feedback.hasviewerliked&&this._shouldShowGiftSentence())ga=p({contextArgs:ca,recipient:aa.giftRecipient,sender:aa.authorProfiles[ba.actorforpost],giftdata:aa.feedback.giftdata},null);var ha=aa.availableComments&&aa.availableComments.length&&da,ia=null;if(ha)ia=this.renderCommentMap(aa.availableComments,aa.availableRanges[aa.id].offset);var ja=null,ka=ba.cancomment;if(ka&&ca.showaddcomment&&ba.actorforpost){var la=new k(null,aa.id,null,ca),ma=aa.authorProfiles[ba.actorforpost];ja=la.renderAddComment(ma,ba.mentionsdatasource,ba.showsendonentertip,'toplevelcomposer',null,ba.allowphotoattachments,ba.subtitle);}var na=null,oa=ca.showshares&&ba.sharecount&&da;if(oa&&!ca.entstream)na=u({targetID:ba.targetfbid,shareCount:ba.sharecount,contextArgs:ca},null);var pa=ea||oa||ha||ka,qa=this.renderPagers();this.applyToUFIComponents([qa.topPager],ia,[qa.bottomPager],{isFirstCommentComponent:true},{isLastCommentComponent:true});var ra=ba.commentboxhoisted?ja:null,sa=ba.commentboxhoisted?null:ja,ta=null;if(ka&&ba.hasaddcommentlink&&this.state.hasPagedToplevel)ta=l({onClick:this.onComment.bind(this)},null);this.applyToUFIComponents([fa,na,ra,qa.topPager],ia,[qa.bottomPager,sa,ta],{isFirstComponent:true},{isLastComponent:true});var ua=[qa.topPager,ia,qa.bottomPager];if(ca.scrollcomments&&ca.scrollwidth)ua=h.DOM.li(null,i({width:ca.scrollwidth},h.DOM.ul(null,ua)));return (o({hasNub:ca.shownub&&pa},[fa,ga,na,ra,ua,sa,ta]));},applyToUFIComponents:function(aa,ba,ca,da,ea){var fa=Object.keys(ba||{}).map(function(ha){return ba[ha];}),ga=[].concat(aa,fa,ca);this._applyToFirstComponent(ga,da);ga.reverse();this._applyToFirstComponent(ga,ea);},_applyToFirstComponent:function(aa,ba){for(var ca=0;ca<(aa||[]).length;ca++)if(aa[ca]){w(aa[ca].props,ba);return;}},renderCommentMap:function(aa,ba){var ca=this.props,da={},ea=aa.length;if(!ea)return da;var fa=aa[0].parentcommentid,ga=[],ha=function(){if(ga.length>0){var qa=function(ra,sa){this.state.loadingSpamIDs[ra[0]]=true;this.forceUpdate();ca.onSpamFetch(ra,sa);}.bind(this,ga,fa);da['spam'+ga[0]]=v({onClick:qa,numHidden:ga.length,isLoading:!!this.state.loadingSpamIDs[ga[0]]},null);ga=[];}}.bind(this),ia=ca.instanceid,ja=q.getKeyForInstance(ia,'editcommentid'),ka=!!aa[0].parentcommentid,la=false;for(var ma=0;ma<ea;ma++)if(aa[ma].status==n.UFIStatus.SPAM){ga.push(aa[ma].id);}else{ha();var na=Math.max(ca.loggingOffset-ma-ba,0),oa=aa[ma],pa;if(oa.id==ja){pa=this.renderEditCommentBox(oa);}else{pa=this.renderComment(oa,na);pa.props.isFirst=ma===0;pa.props.isLast=ma===ea-1;if(!ka)pa.props.showReplyLink=true;}da['comment'+oa.id]=pa;if(ca.feedback.actorforpost===oa.author&&!la&&!ca.feedback.hasviewerliked&&this._shouldShowGiftSentence()){da['gift'+oa.id]=p({contextArgs:ca.contextArgs,recipient:ca.giftRecipient,sender:ca.authorProfiles[ca.feedback.actorforpost],giftdata:ca.feedback.giftdata},null);la=true;}if(oa.status!==n.UFIStatus.DELETED)da['replies'+oa.id]=this.renderReplyContainer(oa);}ha();return da;},_shouldShowGiftSentence:function(){var aa=this.props;return aa.contextArgs.giftoccasion&&!aa.contextArgs.entstream;},renderReplyContainer:function(aa){var ba=this.props,ca={};for(var da=0;da<(aa.replyauthors||[]).length;da++){var ea=ba.authorProfiles[aa.replyauthors[da]];if(ea)ca[ea.id]=ea;}var fa=ba.repliesMap&&ba.repliesMap[aa.id]&&this._shouldShowCommentReplies(aa.id),ga,ha=Math.max(aa.replycount-aa.spamreplycount,0);if(ha&&this._shouldShowReplySocialSentence(aa.id)){var ia=this._shouldShowCommentReplies(aa.id)&&(this.isLoadingPrev(aa.id)||this.isLoadingNext(aa.id));ga=t({authors:ca,replies:ha,onClick:this.onToggleReplies.bind(this,aa),isLoading:ia,isExpanded:fa},null);}var ja,ka,la,ma;if(fa){var na=this.renderPagers(aa.id);ja=na.topPager;la=na.bottomPager;ka=this.renderCommentMap(ba.repliesMap[aa.id],ba.availableRanges[aa.id].offset);var oa=Object.keys(ka);for(var pa=0;pa<oa.length;pa++){var qa=ka[oa[pa]];if(qa)qa.props.hasPartialBorder=pa!==0;}if(ba.feedback.cancomment){var ra=false,sa=Object.keys(ka);for(var da=sa.length-1;da>=0;da--){var ta=sa[da];if(ta&&ka[ta]){ra=ka[ta].props.isAuthorReply;break;}}ma=this.renderReplyComposer(aa,!ra);}}var ua;if(ga||ja||ka||la||ma){this.applyToUFIComponents([ga,ja],ka,[la,ma],{isFirstComponent:true},{isLastComponent:true});var va=aa.status===n.UFIStatus.LIVE_DELETED;ua=o({isParentLiveDeleted:va,isReplyList:true},[ga,ja,ka,la,ma]);}return ua;},renderReplyComposer:function(aa,ba){var ca=this.props;return (new k(null,ca.id,aa.id,ca.contextArgs)).renderAddComment(ca.authorProfiles[ca.feedback.actorforpost],ca.feedback.mentionsdatasource,false,'replycomposer-'+aa.id,ba,ca.feedback.allowphotoattachments);},renderEditCommentBox:function(aa){var ba=new k(null,this.props.id,null,{}),ca=ba.renderEditComment(this.props.authorProfiles[this.props.feedback.actorforpost],aa.id,this.props.feedback.mentionsdatasource,this.props.onEditAttempt.bind(null,aa),this.props.onCancelEdit);return ca;},_shouldShowCommentReplies:function(aa){if(aa in this.state.instanceShowRepliesMap){return this.state.instanceShowRepliesMap[aa];}else if(aa in this.props.showRepliesMap)return this.props.showRepliesMap[aa];return false;},_shouldShowReplySocialSentence:function(aa){if(aa in this.state.instanceShowReplySocialSentenceMap){return this.state.instanceShowReplySocialSentenceMap[aa];}else if(aa in this.props.showReplySocialSentenceMap)return this.props.showReplySocialSentenceMap[aa];return false;},renderComment:function(aa,ba){var ca=this.props,da=ca.feedback,ea=da.actorforpost===aa.author,fa=q.getKeyForInstance(this.props.instanceid,'locallycomposed'),ga=aa.islocal||fa&&fa[aa.id],ha=da.showremovemenu||(da.viewerid===aa.author),ia=da.canremoveall&&da.isownerpage&&!ea,ja=ca.source!=n.UFIFeedbackSourceType.INTERN,ka=j.getTrackingInfo(j.types.COMMENT,ba),la=!!aa.parentcommentid,ma=this._shouldShowCommentReplies(aa.id),na=!!aa.isfeatured;return (m({comment:aa,authorProfiles:this.props.authorProfiles,viewerIsAuthor:ea,feedback:da,'data-ft':ka,contextArgs:this.props.contextArgs,hideAsSpamForPageAdmin:ia,isLocallyComposed:ga,isReply:la,isFeatured:na,showPermalink:ja,showRemoveReportMenu:ha,showReplies:ma,onCommentLikeToggle:ca.onCommentLikeToggle.bind(null,aa),onCommentReply:this.onCommentReply.bind(this,aa),onCommentTranslate:ca.onCommentTranslate.bind(null,aa),onEdit:ca.onCommentEdit.bind(null,aa),onHideAsSpam:ca.onCommentHideAsSpam.bind(null,aa),onInlineBan:ca.onCommentInlineBan.bind(null,aa),onMarkAsNotSpam:ca.onCommentMarkAsNotSpam.bind(null,aa),onOneClickRemove:ca.onCommentOneClickRemove.bind(null,aa),onPreviewRemove:ca.onPreviewRemove.bind(null,aa),onRemove:ca.onCommentRemove.bind(null,aa),onRetrySubmit:ca.onRetrySubmit.bind(null,aa),onUndoInlineBan:ca.onCommentUndoInlineBan.bind(null,aa),onUndoOneClickRemove:ca.onCommentUndoOneClickRemove.bind(null,aa)},null));},_updateRepliesState:function(aa,ba,ca){var da=this.state.instanceShowRepliesMap;da[aa]=ba;var ea=this.state.instanceShowReplySocialSentenceMap;ea[aa]=ca;this.setState({instanceShowRepliesMap:da,instanceShowReplySocialSentenceMap:ea});},onToggleReplies:function(aa){var ba=!this._shouldShowCommentReplies(aa.id),ca=this._shouldShowReplySocialSentence(aa.id)&&!(ba&&aa.replycount<=this.props.replySocialSentenceMaxReplies);this._updateRepliesState(aa.id,ba,ca);var da=this.state.requestRanges[aa.id].length-this.props.deletedCounts[aa.id];if(ba&&da===0){var ea=this.props.commentCounts[aa.id],fa=Math.min(ea,this.props.pageSize);this.onPage(aa.id,{offset:ea-fa,length:fa});}},onPage:function(aa,ba){var ca=this.state.requestRanges;ca[aa]=ba;var da=this.state.hasPagedToplevel||aa===this.props.id;this.setState({requestRanges:ca,isActiveLoading:true,hasPagedToplevel:da});this.props.onChangeRange(aa,ba);},isLoadingPrev:function(aa){var ba=this.props;aa=aa||ba.id;if(!this.state.requestRanges[aa])this.state.requestRanges[aa]=ba.availableRanges[aa];var ca=this.state.requestRanges[aa].offset,da=ba.availableRanges[aa].offset;return ca<da;},isLoadingNext:function(aa){var ba=this.props;aa=aa||ba.id;if(!this.state.requestRanges[aa])this.state.requestRanges[aa]=ba.availableRanges[aa];var ca=this.state.requestRanges[aa].offset,da=this.state.requestRanges[aa].length,ea=ba.availableRanges[aa].offset,fa=ba.availableRanges[aa].length;return ca+da>ea+fa;},renderPagers:function(aa){var ba=this.props;aa=aa||ba.id;var ca=ba.availableRanges[aa].offset,da=ba.availableRanges[aa].length,ea=ba.deletedCounts[aa],fa=ba.commentCounts[aa],ga=fa-ea,ha=da-ea,ia=ba.contextArgs.numberdelimiter||',',ja=aa!==ba.id,ka={topPager:null,bottomPager:null};if(ba.source==n.UFIFeedbackSourceType.ADS)return ka;var la=this.isLoadingPrev(aa),ma=this.isLoadingNext(aa);if(da==fa)return ka;var na=(ca+da)==fa;if((fa<ba.pageSize&&na)||ha===0){var oa=Math.min(fa,ba.pageSize),pa=this.onPage.bind(this,aa,{offset:fa-oa,length:oa}),qa,ra;if(ha===0){if(ga==1){qa=ja?"View 1 reply":"View 1 comment";}else{ra=g.formatIntegerWithDelimiter(ga,ia);qa=ja?y._("View all {count} replies",{count:ra}):y._("View all {count} comments",{count:ra});}}else if(ga-ha==1){qa=ja?"View 1 more reply":"View 1 more comment";}else{ra=g.formatIntegerWithDelimiter(ga-ha,ia);qa=ja?y._("View {count} more replies",{count:ra}):y._("View {count} more comments",{count:ra});}var sa=j.getTrackingInfo(j.types.VIEW_ALL_COMMENTS),ta=s({contextArgs:ba.contextArgs,isUnseen:ba.feedback.hasunseencollapsed,isLoading:la,pagerLabel:qa,onPagerClick:pa,'data-ft':sa},null);if(ba.feedback.isranked&&!ja){ka.bottomPager=ta;}else ka.topPager=ta;return ka;}if(ca>0){var ua=Math.max(ca-ba.pageSize,0),oa=ca+da-ua,va=this.onPage.bind(this,aa,{offset:ua,length:oa}),wa=g.formatIntegerWithDelimiter(ha,ia),xa=g.formatIntegerWithDelimiter(ga,ia),ya=y._("{countshown} of {totalcount}",{countshown:wa,totalcount:xa});if(ba.feedback.isranked&&!ja){ka.bottomPager=s({contextArgs:ba.contextArgs,isLoading:la,pagerLabel:"View more comments",onPagerClick:va,countSentence:ya},null);}else{var za=ja?"View previous replies":"View previous comments";ka.topPager=s({contextArgs:ba.contextArgs,isLoading:la,pagerLabel:za,onPagerClick:va,countSentence:ya},null);}}if(ca+da<fa){var ab=Math.min(da+ba.pageSize,fa-ca),bb=this.onPage.bind(this,aa,{offset:ca,length:ab});if(ba.feedback.isranked&&!ja){ka.topPager=s({contextArgs:ba.contextArgs,isLoading:ma,pagerLabel:"View previous comments",onPagerClick:bb},null);}else{var cb=ja?"View more replies":"View more comments";ka.bottomPager=s({contextArgs:ba.contextArgs,isLoading:ma,pagerLabel:cb,onPagerClick:bb},null);}}return ka;},onCommentReply:function(aa){var ba=aa.parentcommentid||aa.id;if(!this._shouldShowCommentReplies(ba))this.onToggleReplies(aa);if(this.refs&&this.refs['replycomposer-'+ba])this.refs['replycomposer-'+ba].focus();},onComment:function(){if(this.refs&&this.refs.toplevelcomposer)this.refs.toplevelcomposer.focus();}});e.exports=z;});
__d("UFIController",["Arbiter","Bootloader","CSS","DOM","DOMQuery","ImmutableObject","LayerRemoveOnHide","LiveTimer","Parent","React","ReactMount","ShortProfiles","UFI.react","UFIActionLinkController","UFICentralUpdates","UFIComments","UFIConstants","UFIFeedbackTargets","UFIInstanceState","UFIUserActions","URI","copyProperties","isEmpty","tx","UFICommentTemplates"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('Bootloader'),i=b('CSS'),j=b('DOM'),k=b('DOMQuery'),l=b('ImmutableObject'),m=b('LayerRemoveOnHide'),n=b('LiveTimer'),o=b('Parent'),p=b('React'),q=b('ReactMount'),r=b('ShortProfiles'),s=b('UFI.react'),t=b('UFIActionLinkController'),u=b('UFICentralUpdates'),v=b('UFIComments'),w=b('UFIConstants'),x=b('UFIFeedbackTargets'),y=b('UFIInstanceState'),z=b('UFIUserActions'),aa=b('URI'),ba=b('copyProperties'),ca=b('isEmpty'),da=b('tx'),ea=b('UFICommentTemplates'),fa=function(ia,ja,ka,la){var ma=ia.offset+ia.length===ja;return {offset:ia.offset,length:(ma&&ga(la))?ka-ia.offset:ia.length};},ga=function(ia){return ia==w.UFIPayloadSourceType.USER_ACTION||ia==w.UFIPayloadSourceType.LIVE_SEND;};function ha(ia,ja,ka){this.root=ia;this.id=ja.ftentidentifier;this.source=ja.source;this._ufiInstanceID=ja.instanceid;this._contextArgs=ja;this._contextArgs.rootid=this.root.id;this._verifiedCommentsExpanded=false;var la=ka.feedbacktargets[0];this.actionLink=new t(ia,this._contextArgs,la);var ma,na;if(ka.commentlists.comments){var oa=la.defaultcommentorderingmode;ma=ka.commentlists.comments[this.id][oa];na=ka.commentlists.replies;}else{ma=ka.commentlists[this.id];na=ka.commentlists;}this.replyRanges={};this.repliesMap={};this.showRepliesMap={};this.showReplySocialSentenceMap={};this.commentcounts={};this.commentcounts[this.id]=v.getCommentCount(this.id);this.range=ba({},ma.range);if(na)for(var pa=0;pa<ma.values.length;pa++){var qa=ma.values[pa],ra=na[qa];if(ra){this.commentcounts[qa]=v.getCommentCount(qa);this.replyRanges[qa]=ba({},ra.range);}}this._loggingOffset=null;this._ufi=null;this.ufiCentralUpdatesSubscriptions=[u.subscribe('feedback-updated',function(sa,ta){var ua=ta.updates,va=ta.payloadSource;if(va!=w.UFIPayloadSourceType.COLLAPSED_UFI&&this.id in ua)this.fetchAndUpdate(this.render.bind(this),va);}.bind(this)),u.subscribe('feedback-id-changed',function(sa,ta){var ua=ta.updates;if(this.id in ua)this.id=ua[this.id];}.bind(this)),u.subscribe('instance-updated',function(sa,ta){var ua=ta.updates;if(this._ufiInstanceID in ua){var va=ua[this._ufiInstanceID];if(va.editcommentid)this.render(ta.payloadSource);}}.bind(this)),u.subscribe('update-comment-lists',function(sa,ta){var ua=ta.commentlists;if(ua&&Object.keys(ua).length){if(ua.replies)ua=ua.replies;for(var va in ua)if(this.id!=va&&ua[va]&&ua[va].ftEntIdentifier==this.id&&!this.replyRanges[va])this.replyRanges[va]=ua[va].range;}}.bind(this))];this.clearPageletSubscription=g.subscribe('pagelet/destroy',this.onPageletDestroy.bind(this));this.clearPageSubscription=g.subscribe('ufi/page_cleared',this._onDestroy.bind(this));u.handleUpdate(w.UFIPayloadSourceType.INITIAL_SERVER,ka);if(this._contextArgs.viewas)this.viewasUFICleanSubscription=g.subscribe('pre_page_transition',function(sa,ta){if(this._contextArgs.viewas!==aa(ta.to).getQueryData('viewas'))v.resetFeedbackTarget(this.id);}.bind(this));h.loadModules(['ScrollAwareDOM'],function(sa){q.scrollMonitor=sa.monitor;});}ba(ha.prototype,{_getParentForm:function(){if(!this._form)this._form=o.byTag(this.root,'form');return this._form;},_onTargetLikeToggle:function(event){var ia=!this.feedback.hasviewerliked;z.changeLike(this.id,ia,{source:this.source,target:event.target,rootid:this._contextArgs.rootid});event.preventDefault();},_onCommentLikeToggle:function(ia,event){var ja=!ia.hasviewerliked;z.changeCommentLike(ia.id,ja,{source:this.source,target:event.target});},_onCommentEdit:function(ia){y.updateState(this._ufiInstanceID,'isediting',true);y.updateState(this._ufiInstanceID,'editcommentid',ia.id);},_onEditAttempt:function(ia,ja,event){if(!ja.visibleValue){this._onCommentRemove(ia,event);}else z.editComment(ia.id,ja.visibleValue,ja.encodedValue,{source:this._contextArgs.source,target:event.target});y.updateStateField(this._ufiInstanceID,'locallycomposed',ia.id,true);this._onEditReset();},_onEditReset:function(){y.updateState(this._ufiInstanceID,'isediting',false);y.updateState(this._ufiInstanceID,'editcommentid',null);},_onCommentRemove:function(ia,event){var ja=ea[':fb:ufi:hide-dialog-template'].build();j.setContent(ja.getNode('body'),"Are you sure you want to delete this comment?");j.setContent(ja.getNode('title'),"Delete Comment");h.loadModules(['DialogX'],function(ka){var la=new ka({modal:true,width:465,addedBehaviors:[m]},ja.getRoot());la.subscribe('confirm',function(){z.removeComment(ia.id,{source:this.source,oneclick:false,target:event.target,timelinelogdata:this._contextArgs.timelinelogdata});la.hide();}.bind(this));la.show();}.bind(this));},_onCommentOneClickRemove:function(ia,event){z.removeComment(ia.id,{source:this.source,oneclick:true,target:event.target,timelinelogdata:this._contextArgs.timelinelogdata});},_onCommentUndoOneClickRemove:function(ia,event){var ja=this.feedback.canremoveall&&this.feedback.isownerpage&&this.feedback.actorforpost!==this.authorProfiles[ia.author];z.undoRemoveComment(ia.id,ja,{source:this.source,target:event.target});},_onCommentHideAsSpam:function(ia,event){z.setHideAsSpam(ia.id,true,{source:this.source,target:event.target});},_onCommentMarkAsNotSpam:function(ia,event){z.setHideAsSpam(ia.id,false,{source:this.source,target:event.target});},_onCommentTranslate:function(ia,event){z.translateComment(ia,{source:this.source,target:event.target});},_onCommentInlineBanChange:function(ia,ja,event){z.banUser(ia,this.feedback.ownerid,ja,{source:this.source,target:event.target});},_onCommentInlineBan:function(ia,event){this._onCommentInlineBanChange(ia,true,event);},_onCommentUndoInlineBan:function(ia,event){this._onCommentInlineBanChange(ia,false,event);},_fetchSpamComments:function(ia,ja){z.fetchSpamComments(this.id,ia,ja,this._contextArgs.viewas);},_removePreview:function(ia,event){z.removePreview(ia,{source:this.source,target:event.target});},_retrySubmit:function(ia){h.loadModules(['UFIRetryActions'],function(ja){ja.retrySubmit(ia,{source:this.source});}.bind(this));},_ensureCommentsExpanded:function(){if(this._verifiedCommentsExpanded)return;var ia=o.byTag(this.root,'form');if(ia){i.removeClass(ia,'collapsed_comments');this._verifiedCommentsExpanded=true;}},render:function(ia){var ja=this.comments.length||!ca(this.feedback.likesentences.current);if(ja&&ga(ia))this._ensureCommentsExpanded();if(this._loggingOffset===null)this._loggingOffset=this.range.offset+this.comments.length-1;var ka=this.feedback.replysocialsentencemaxreplies||-1,la={};la[this.id]=v.getDeletedCount(this.id);this.comments.forEach(function(oa){la[oa.id]=v.getDeletedCount(oa.id);});var ma=ba({},this.replyRanges);ma[this.id]=this.range;ma=new l(ma);var na=s({feedback:this.feedback,id:this.id,onTargetLikeToggle:this._onTargetLikeToggle.bind(this),onCommentLikeToggle:this._onCommentLikeToggle.bind(this),onCommentRemove:this._onCommentRemove.bind(this),onCommentHideAsSpam:this._onCommentHideAsSpam.bind(this),onCommentMarkAsNotSpam:this._onCommentMarkAsNotSpam.bind(this),onCommentEdit:this._onCommentEdit.bind(this),onCommentOneClickRemove:this._onCommentOneClickRemove.bind(this),onCommentUndoOneClickRemove:this._onCommentUndoOneClickRemove.bind(this),onCommentTranslate:this._onCommentTranslate.bind(this),onCommentInlineBan:this._onCommentInlineBan.bind(this),onCommentUndoInlineBan:this._onCommentUndoInlineBan.bind(this),onEditAttempt:this._onEditAttempt.bind(this),onCancelEdit:this._onEditReset.bind(this),onChangeRange:this._changeRange.bind(this),onSpamFetch:this._fetchSpamComments.bind(this),onPreviewRemove:this._removePreview.bind(this),onRetrySubmit:this._retrySubmit.bind(this),contextArgs:this._contextArgs,repliesMap:this.repliesMap,showRepliesMap:this.showRepliesMap,showReplySocialSentenceMap:this.showReplySocialSentenceMap,commentCounts:this.commentcounts,deletedCounts:la,availableComments:this.comments,source:this.source,availableRanges:ma,pageSize:w.defaultPageSize,authorProfiles:this.authorProfiles,instanceid:this._ufiInstanceID,loggingOffset:this._loggingOffset,replySocialSentenceMaxReplies:ka,giftRecipient:this._giftRecipient},null);this._ufi=p.renderComponent(na,this.root);n.updateTimeStamps();if(this._getParentForm())g.inform('ufi/changed',{form:this._getParentForm()});if(ia!=w.UFIPayloadSourceType.INITIAL_SERVER&&ia!=w.UFIPayloadSourceType.COLLAPSED_UFI)g.inform('reflow');},fetchAndUpdate:function(ia,ja){x.getFeedbackTarget(this.id,function(ka){var la=v.getCommentCount(this.id),ma=fa(this.range,this.commentcounts[this.id],la,ja);v.getCommentsInRange(this.id,ma,this._contextArgs.viewas,function(na){var oa=[],pa={},qa={};if(ka.actorforpost)oa.push(ka.actorforpost);for(var ra=0;ra<na.length;ra++){if(na[ra].author)oa.push(na[ra].author);if(na[ra].socialcontext)oa.push(na[ra].socialcontext.topmutualid);if(na[ra].replyauthors&&na[ra].replyauthors.length)for(var sa=0;sa<na[ra].replyauthors.length;sa++)oa.push(na[ra].replyauthors[sa]);if(ka.isthreaded){var ta=na[ra].id,ua=v.getCommentCount(ta),va;if(this.replyRanges[ta]){va=fa(this.replyRanges[ta],this.commentcounts[ta],ua,ja);}else va={offset:0,length:Math.min(ua,2)};pa[ta]=va;qa[ta]=ua;}}v.getRepliesInRanges(this.id,pa,function(wa){for(var xa=0;xa<na.length;xa++){var ya=na[xa].id,za=wa[ya]||[];for(var ab=0;ab<za.length;ab++){if(za[ab].author)oa.push(za[ab].author);if(za[ab].socialcontext)oa.push(za[ab].socialcontext.topmutualid);}}if(this._contextArgs.giftoccasion)oa.push(ka.actorid);r.getMulti(oa,function(bb){if(this._contextArgs.giftoccasion)this._giftRecipient=bb[ka.actorid];this.authorProfiles=bb;this.feedback=ka;this.commentcounts[this.id]=la;this.comments=na;this.range=ma;for(var cb=0;cb<na.length;cb++){var db=na[cb].id,eb=pa[db];this.repliesMap[db]=wa[db];this.replyRanges[db]=eb;this.commentcounts[db]=qa[db];this.showRepliesMap[db]=eb&&eb.length>0;if(this.showReplySocialSentenceMap[db]===undefined&&qa[db]>0)this.showReplySocialSentenceMap[db]=!this.showRepliesMap[db];}ia(ja);if(ja==w.UFIPayloadSourceType.ENDPOINT_COMMENT_FETCH)g.inform('CommentUFI.Pager');}.bind(this));}.bind(this));}.bind(this));}.bind(this));},_changeRange:function(ia,ja){if(ia==this.id){this.range=ja;}else this.replyRanges[ia]=ja;this.fetchAndUpdate(this.render.bind(this),w.UFIPayloadSourceType.USER_ACTION);},onPageletDestroy:function(ia,ja){if(k.contains(ja.root,this.root))this._onDestroy();},_onDestroy:function(){p.unmountAndReleaseReactRootNode(this.root);this.ufiCentralUpdatesSubscriptions.forEach(u.unsubscribe.bind(u));g.unsubscribe(this.clearPageletSubscription);g.unsubscribe(this.clearPageSubscription);this.viewasUFICleanSubscription&&g.unsubscribe(this.viewasUFICleanSubscription);}});e.exports=ha;});
__d("Ease",[],function(a,b,c,d,e,f){var g={makePowerOut:function(h){return function(i){var j=1-Math.pow(1-i,h);return (j*10000|0)/10000;};},makePowerIn:function(h){return function(i){var j=Math.pow(i,h);return (j*10000|0)/10000;};},makePowerInOut:function(h){return function(i){var j=((i*=2)<1)?Math.pow(i,h)*.5:1-Math.abs(Math.pow(2-i,h))*.5;return (j*10000|0)/10000;};},sineOut:function(h){return Math.sin(h*Math.PI*.5);},sineIn:function(h){return 1-Math.cos(h*Math.PI*.5);},sineInOut:function(h){return -.5*(Math.cos(Math.PI*h)-1);},circOut:function(h){return Math.sqrt(1-(--h)*h);},circIn:function(h){return -(Math.sqrt(1-h*h)-1);},circInOut:function(h){return ((h*=2)<1)?-.5*(Math.sqrt(1-h*h)-1):.5*(Math.sqrt(1-(h-=2)*h)+1);},bounceOut:function(h){if(h<1/2.75){return (7.5625*h*h);}else if(h<2/2.75){return (7.5625*(h-=1.5/2.75)*h+.75);}else if(h<2.5/2.75){return (7.5625*(h-=2.25/2.75)*h+.9375);}else return (7.5625*(h-=2.625/2.75)*h+.984375);},bounceIn:function(h){return 1-g.bounceOut(1-h);},bounceInOut:function(h){return (h<.5)?g.bounceIn(h*2)*.5:g.bounceOut(h*2-1)*.5+.5;},makeElasticOut:function(h,i){h<1&&(h=1);var j=Math.PI*2;return function(k){if(k===0||k===1)return k;var l=i/j*Math.asin(1/h);return h*Math.pow(2,-10*k)*Math.sin((k-l)*j/i)+1;};},makeElasticIn:function(h,i){h<1&&(h=1);var j=Math.PI*2;return function(k){if(k===0||k===1)return k;var l=i/j*Math.asin(1/h);return -(h*Math.pow(2,10*(k-=1))*Math.sin((k-l)*j/i));};},makeElasticInOut:function(h,i){h<1&&(h=1);i*=1.5;var j=Math.PI*2;return function(k){var l=i/j*Math.asin(1/h);return ((k*=2)<1)?-.5*h*Math.pow(2,10*(k-=1))*Math.sin((k-l)*j/i):1+.5*h*Math.pow(2,-10*(k-=1))*Math.sin((k-l)*j/i);};},makeBackOut:function(h){return function(i){return (--i*i*((h+1)*i+h)+1);};},makeBackIn:function(h){return function(i){return i*i*((h+1)*i-h);};},makeBackInOut:function(h){h*=1.525;return function(i){return ((i*=2)<1)?.5*(i*i*((h+1)*i-h)):.5*((i-=2)*i*((h+1)*i+h)+2);};},easeOutExpo:function(h){return -Math.pow(2,-10*h)+1;}};g.elasticOut=g.makeElasticOut(1,.3);g.elasticIn=g.makeElasticIn(1,.3);g.elasticInOut=g.makeElasticInOut(1,.3);g.backOut=g.makeBackOut(1.7);g.backIn=g.makeBackIn(1.7);g.backInOut=g.makeBackInOut(1.7);e.exports=g;});
__d("EntstreamCollapsedUFIActions",["React","TrackingNodes","cx","tx"],function(a,b,c,d,e,f){var g=b('React'),h=b('TrackingNodes'),i=b('cx'),j=b('tx'),k=g.createClass({displayName:'EntstreamCollapsedUFIActions',getLikeButton:function(){return this.refs.likeButton.getDOMNode();},getLikeIcon:function(){return this.refs.likeIcon.getDOMNode();},render:function(){var l;if(this.props.shareHref!==null){var m=h.getTrackingInfo(h.types.SHARE_LINK);l=g.DOM.a({ajaxify:this.props.shareHref,className:"_6j_ _6k0",'data-ft':m,href:"#",rel:"dialog",title:"Share this item"},[g.DOM.i({className:"_6k1 _528f"},null),"Share"]);}var n;if(this.props.canComment){var o="_6k2 _6k0",p=h.getTrackingInfo(h.types.COMMENT_LINK);n=g.DOM.a({className:o,'data-ft':p,href:"#",onClick:this.props.onCommentClick,title:"Write a comment..."},[g.DOM.i({className:"_6k4 _528f"},null),"Comment"]);}var q;if(this.props.canLike){var r=((this.props.hasViewerLiked?"_6k5":'')+(' '+"_6k6")+(' '+"_6k0")),s=h.getTrackingInfo(this.props.hasViewerLiked?h.types.UNLIKE_LINK:h.types.LIKE_LINK),t=this.props.hasViewerLiked?"Unlike this":"Like this";q=g.DOM.a({className:r,'data-ft':s,href:"#",onClick:this.props.onLike,onMouseDown:this.props.onLikeMouseDown,ref:"likeButton",title:t},[g.DOM.i({className:"_6k7 _528f",ref:"likeIcon"},null),"Like",g.DOM.div({className:"_55k4"},null)]);}return (g.DOM.div({className:"_6k8"},[q,n,l]));}});e.exports=k;});
__d("EntstreamCollapsedUFISentence",["Bootloader","NumberFormat","ProfileBrowserLink","ProfileBrowserTypes","React","URI","cx","tx"],function(a,b,c,d,e,f){var g=b('Bootloader'),h=b('NumberFormat'),i=b('ProfileBrowserLink'),j=b('ProfileBrowserTypes'),k=b('React'),l=b('URI'),m=b('cx'),n=b('tx'),o=k.createClass({displayName:'EntstreamCollapsedUFISentence',_showShareDialog:function(event){event=event.nativeEvent;if(event.isDefaultRequested())return;g.loadModules(['EntstreamShareOverlay'],function(p){p.display(this.props.feedback.targetfbid,this._getShareString());}.bind(this));event.prevent();},_getShareString:function(){var p=this.props.feedback.sharecount,q=this.props.numberDelimiter||',';if(p===1){return "1 Share";}else if(p>1){var r=h.formatIntegerWithDelimiter(p,q);return n._("{count} Shares",{count:r});}},render:function(){var p=this.props.feedback,q=p.likecount,r=this.props.commentCount,s=p.sharecount,t=p.seencount,u=this.props.hasAttachedUFIExpanded,v=this.props.numberDelimiter||',';if(u){q=0;r=0;}if(!q&&!r&&!s&&!t)return k.DOM.span(null,null);var w;if(q===1){w="1 Like";}else if(q>1){var x=h.formatIntegerWithDelimiter(q,v);w=n._("{count} Likes",{count:x});}var y;if(r===1){y="1 Comment";}else if(r>1){var z=h.formatIntegerWithDelimiter(r,v);y=n._("{count} Comments",{count:z});}var aa=this._getShareString(),ba,ca,da;if(w){ca=new l('/ajax/like/tooltip.php').setQueryData({comment_fbid:p.targetfbid,comment_from:p.actorforpost,seen_user_fbids:true});var ea=((y||aa?"prm":''));ba=j.LIKES;da={id:p.targetfbid};var fa=i.constructDialogURI(ba,da).toString();w=k.DOM.a({ajaxify:fa,className:ea,href:i.constructPageURI(ba,da).toString(),'data-hover':"tooltip",'data-tooltip-alignh':"center",'data-tooltip-uri':ca.toString(),rel:"dialog"},w);}var ga;if(t>0){ba=j.GROUP_MESSAGE_VIEWERS;da={id:p.targetfbid};var ha=i.constructDialogURI(ba,da),ia=i.constructPageURI(ba,da);ca=new l('/ajax/ufi/seen_tooltip.php').setQueryData({ft_ent_identifier:p.entidentifier,displayed_count:t});var ja=h.formatIntegerWithDelimiter(t,v);if(p.seenbyall){ga="Seen by everyone";}else ga=ja==1?"Seen by 1":n._("Seen by {count}",{count:ja});ga=k.DOM.a({ajaxify:ha.toString(),'data-hover':"tooltip",'data-tooltip-alignh':"center",'data-tooltip-uri':ca.toString(),href:ia.toString(),rel:"dialog",tabindex:"-1"},ga);}if(y){var ka=((aa?"prm":''));y=k.DOM.a({className:ka,onClick:this.props.onCommentClick},y);}if(aa){var la=new l('/shares/view').setSubdomain('www').setQueryData({id:p.targetfbid});aa=k.DOM.a({href:la.toString(),onClick:this._showShareDialog.bind(this),rel:"ignore"},aa);}return (k.DOM.span({className:"_4nek"},[w,y,aa,ga]));}});e.exports=o;});
__d("EntstreamCollapsedUFI",["Event","Animation","BrowserSupport","CSS","DOM","Ease","EntstreamCollapsedUFIActions","EntstreamCollapsedUFISentence","React","TrackingNodes","Vector","cx","queryThenMutateDOM"],function(a,b,c,d,e,f){var g=b('Event'),h=b('Animation'),i=b('BrowserSupport'),j=b('CSS'),k=b('DOM'),l=b('Ease'),m=b('EntstreamCollapsedUFIActions'),n=b('EntstreamCollapsedUFISentence'),o=b('React'),p=b('TrackingNodes'),q=b('Vector'),r=b('cx'),s=b('queryThenMutateDOM'),t=16,u=o.createClass({displayName:'EntstreamCollapsedUFI',_animate:function(v,w,x,y){if(!i.hasCSSTransforms())return;var z=this.refs.icons.getLikeIcon();this._animation&&this._animation.stop();this._animation=new h(z).from('scaleX',v).from('scaleY',v).to('scaleX',w).to('scaleY',w).duration(x);y&&this._animation.ease(y);this._animation.go();},bounceLike:function(){this._animate(1.35,1,750,l.bounceOut);},shrinkLike:function(){this._animate(1,.85,150);this._mouseUpListener=g.listen(document.body,'mouseup',this._onMouseUp.bind(this));},_onMouseUp:function(event){this._mouseUpListener.remove();if(!k.contains(this.refs.icons.getLikeButton(),event.getTarget()))this._animate(.85,1,150);},render:function(){var v=this.props.feedback,w=p.getTrackingInfo(p.types.BLINGBOX);return (o.DOM.div({className:"clearfix"},[m({canLike:v.viewercanlike,canComment:v.cancomment,hasViewerLiked:v.hasviewerliked,onCommentClick:this.props.onCommentClick,onLike:this.props.onLike,onLikeMouseDown:this.props.onLikeMouseDown,ref:"icons",shareHref:this.props.shareHref},null),o.DOM.div({className:"_6j-",'data-ft':w,ref:"sentence"},n({commentCount:this.props.commentCount,feedback:v,hasAttachedUFIExpanded:this.props.hasAttachedUFIExpanded,numberDelimiter:this.props.numberDelimiter,onCommentClick:this.props.onCommentClick},null))]));},componentDidMount:function(v){var w=this.refs.icons.getDOMNode(),x=this.refs.sentence.getDOMNode(),y,z,aa;s(function(){y=q.getElementDimensions(v).x;z=q.getElementDimensions(w).x;aa=q.getElementDimensions(x).x;},function(){if(z+aa>y+t)j.addClass(v,"_4nej");});}});e.exports=u;});
__d("EntstreamCollapsedUFIController",["Bootloader","CommentPrelude","CSS","DOM","EntstreamCollapsedUFI","React","ReactMount","UFICentralUpdates","UFIComments","UFIConstants","UFIFeedbackTargets","UFIUserActions","copyProperties","cx"],function(a,b,c,d,e,f){var g=b('Bootloader'),h=b('CommentPrelude'),i=b('CSS'),j=b('DOM'),k=b('EntstreamCollapsedUFI'),l=b('React'),m=b('ReactMount'),n=b('UFICentralUpdates'),o=b('UFIComments'),p=b('UFIConstants'),q=b('UFIFeedbackTargets'),r=b('UFIUserActions'),s=b('copyProperties'),t=b('cx'),u=p.UFIPayloadSourceType;function v(w,x,y){this._root=w;this._id=y.ftentidentifier;this._contextArgs=y;this._ufiVisible=y.hasattachedufiexpanded;n.subscribe('feedback-updated',function(z,aa){if(aa.payloadSource!=u.INITIAL_SERVER&&this._id in aa.updates)this.render();}.bind(this));n.handleUpdate(p.UFIPayloadSourceType.COLLAPSED_UFI,x);g.loadModules(['ScrollAwareDOM'],function(z){m.scrollMonitor=z.monitor;});}s(v.prototype,{_onLike:function(event){q.getFeedbackTarget(this._id,function(w){r.changeLike(this._id,!w.hasviewerliked,{source:this._contextArgs.source,target:event.target,rootid:j.getID(this._root)});}.bind(this));this._ufi.bounceLike();event.preventDefault();},_onLikeMouseDown:function(event){this._ufi.shrinkLike();event.preventDefault();},_onCommentClick:function(event){if(!this._ufiVisible){this._ufiVisible=true;i.addClass(this._root,"_6ka");}h.click(this._root);event.preventDefault();},render:function(){q.getFeedbackTarget(this._id,function(w){var x=k({commentCount:o.getCommentCount(this._id),feedback:w,hasAttachedUFIExpanded:this._contextArgs.hasattachedufiexpanded,numberDelimiter:this._contextArgs.numberdelimiter,onCommentClick:this._onCommentClick.bind(this),onLike:this._onLike.bind(this),onLikeMouseDown:this._onLikeMouseDown.bind(this),shareHref:this._contextArgs.sharehref},null);l.renderComponent(x,this._root);this._ufi=this._ufi||x;}.bind(this));}});e.exports=v;});
__d("TypeaheadUtil",["repeatString"],function(a,b,c,d,e,f){var g=b('repeatString'),h=/[ ]+/g,i=/[^ ]+/g,j=/[.,+*?$|#{}()\^\-\[\]\\\/!@%'"~=<>_:;\u2010\u2011\u2012\u2013\u2014\u2015\u30fb\uff1a]/g,k={},l={a:"\u0430 \u00e0 \u00e1 \u00e2 \u00e3 \u00e4 \u00e5",b:"\u0431",c:"\u0446 \u00e7 \u010d",d:"\u0434 \u00f0 \u010f \u0111",e:"\u044d \u0435 \u00e8 \u00e9 \u00ea \u00eb \u011b",f:"\u0444",g:"\u0433 \u011f",h:"\u0445 \u0127",i:"\u0438 \u00ec \u00ed \u00ee \u00ef \u0131",j:"\u0439",k:"\u043a \u0138",l:"\u043b \u013e \u013a \u0140 \u0142",m:"\u043c",n:"\u043d \u00f1 \u0148 \u0149 \u014b",o:"\u043e \u00f8 \u00f6 \u00f5 \u00f4 \u00f3 \u00f2",p:"\u043f",r:"\u0440 \u0159 \u0155",s:"\u0441 \u015f \u0161 \u017f",t:"\u0442 \u0165 \u0167 \u00fe",u:"\u0443 \u044e \u00fc \u00fb \u00fa \u00f9 \u016f",v:"\u0432",y:"\u044b \u00ff \u00fd",z:"\u0437 \u017e",ae:"\u00e6",oe:"\u0153",ts:"\u0446",ch:"\u0447",ij:"\u0133",sh:"\u0448",ss:"\u00df",ya:"\u044f"};for(var m in l){var n=l[m].split(' ');for(var o=0;o<n.length;o++)k[n[o]]=m;}var p={};function q(w){return w?w.replace(j,' '):'';}function r(w){w=(''+w).toLowerCase();var x='',y='';for(var z=w.length;z--;){y=w.charAt(z);x=(k[y]||y)+x;}return x.replace(h,' ');}function s(w){var x=[],y=i.exec(w);while(y){y=y[0];x.push(y);y=i.exec(w);}return x;}function t(w,x){w=''+w;if(!p.hasOwnProperty(w)){var y=r(w),z=q(y);p[w]={value:w,flatValue:y,tokens:s(z),isPrefixQuery:z&&z[z.length-1]!=' '};}if(x&&typeof p[w].sortedTokens=='undefined'){p[w].sortedTokens=p[w].tokens.slice();p[w].sortedTokens.sort(function(aa,ba){return ba.length-aa.length;});}return p[w];}function u(w,x,y){var z=t(x,w=='prefix'),aa=w=='prefix'?z.sortedTokens:z.tokens,ba=t(y).tokens,ca={},da=z.isPrefixQuery&&w=='query'?aa.length-1:null,ea=function(fa,ga){for(var ha=0;ha<ba.length;++ha){var ia=ba[ha];if(!ca[ha]&&(ia==fa||((w=='query'&&ga===da||w=='prefix')&&ia.indexOf(fa)===0)))return (ca[ha]=true);}return false;};return Boolean(aa.length&&aa.every(ea));}var v={flatten:r,parse:t,isExactMatch:u.bind(null,'exact'),isQueryMatch:u.bind(null,'query'),isPrefixMatch:u.bind(null,'prefix')};e.exports=v;});
__d("KanaUtils",[],function(a,b,c,d,e,f){var g=12353,h=12436,i=96,j={normalizeHiragana:function(k){if(k!==null){var l=[];for(var m=0;m<k.length;m++){var n=k.charCodeAt(m);if(n<g||n>h){l.push(k.charAt(m));}else{var o=n+i;l.push(String.fromCharCode(o));}}return l.join("");}else return null;}};e.exports=j;});
__d("DataSource",["ArbiterMixin","AsyncRequest","TypeaheadUtil","copyProperties","createArrayFrom","createObjectFrom","emptyFunction","KanaUtils"],function(a,b,c,d,e,f){var g=b('ArbiterMixin'),h=b('AsyncRequest'),i=b('TypeaheadUtil'),j=b('copyProperties'),k=b('createArrayFrom'),l=b('createObjectFrom'),m=b('emptyFunction'),n=b('KanaUtils');function o(p){this._maxResults=p.maxResults||10;this.token=p.token;this.queryData=p.queryData||{};this.queryEndpoint=p.queryEndpoint||'';this.bootstrapData=p.bootstrapData||{};this.bootstrapEndpoint=p.bootstrapEndpoint||'';this._exclusions=p.exclusions||[];this._indexedFields=p.indexedFields||['text','tokens'];this._titleFields=p.titleFields||[];this._alwaysPrefixMatch=p.alwaysPrefixMatch||false;this._deduplicationKey=p.deduplicationKey||null;this._enabledQueryCache=p.enabledQueryCache||true;this._queryExactMatch=p.queryExactMatch||false;this._acrossTransitions=p.acrossTransitions||false;this._kanaNormalization=p.kanaNormalization||false;this._minQueryLength=p.minQueryLength||-1;this._minExactMatchLength=4;this._filters=[];}j(o.prototype,g,{events:['bootstrap','query','respond'],init:function(){this.init=m;this._fields=l(this._indexedFields);this._activeQueries=0;this.dirty();},dirty:function(){this.value='';this._bootstrapped=false;this._bootstrapping=false;this._data={};this.localCache={};this.queryCache={};this.inform('dirty',{});return this;},bootstrap:function(){if(this._bootstrapped)return;this.bootstrapWithoutToken();this._bootstrapped=true;this._bootstrapping=true;this.inform('bootstrap',{bootstrapping:true});},bootstrapWithoutToken:function(){this.fetch(this.bootstrapEndpoint,this.bootstrapData,{bootstrap:true,token:this.token});},bootstrapWithToken:function(){var p=j({},this.bootstrapData);p.token=this.token;this.fetch(this.bootstrapEndpoint,p,{bootstrap:true,replaceCache:true});},query:function(p,q,r,s){this.inform('beforeQuery',{value:p,local_only:q,exclusions:r,time_waited:s});if(!this._enabledQueryCache)this.queryCache={};var t=this.buildUids(p,[],r),u=this.respond(p,t);this.value=p;this.inform('query',{value:p,results:u});var v=this._normalizeString(p).flatValue;if(q||!v||(v.length<this._minQueryLength)||!this.queryEndpoint||this.getQueryCache().hasOwnProperty(v)||!this.shouldFetchMoreResults(u))return false;this.inform('queryEndpoint',{value:p});this.fetch(this.queryEndpoint,this.getQueryData(p,t),{value:p,exclusions:r});return true;},_normalizeString:function(p,q){var r=p;if(this._kanaNormalization)r=n.normalizeHiragana(p);return i.parse(r,q);},shouldFetchMoreResults:function(p){return p.length<this._maxResults;},getQueryData:function(p,q){var r=j({value:p},this.queryData||{});q=q||[];if(q.length)r.existing_ids=q.join(',');if(this._bootstrapping)r.bsp=true;return r;},setQueryData:function(p,q){if(q)this.queryData={};j(this.queryData,p);return this;},setBootstrapData:function(p,q){if(q)this.bootstrapData={};j(this.bootstrapData,p);return this;},getExclusions:function(){return k(this._exclusions);},setExclusions:function(p){this._exclusions=p||[];},addFilter:function(p){var q=this._filters;q.push(p);return {remove:function(){q.splice(q.indexOf(p),1);}};},clearFilters:function(){this._filters=[];},respond:function(p,q,r){var s=this.buildData(q);this.inform('respond',{value:p,results:s,isAsync:!!r});return s;},asyncErrorHandler:m,fetch:function(p,q,r){if(!p)return;var s=new h().setURI(p).setData(q).setMethod('GET').setReadOnly(true).setAllowCrossPageTransition(this._acrossTransitions).setHandler(function(t){this.fetchHandler(t,r||{});}.bind(this));if(p===this.queryEndpoint)s.setFinallyHandler(function(){this._activeQueries--;if(!this._activeQueries)this.inform('activity',{activity:false});}.bind(this));s.setErrorHandler(this.asyncErrorHandler);this.inform('beforeFetch',{request:s,fetch_context:r});s.send();if(p===this.queryEndpoint){if(!this._activeQueries)this.inform('activity',{activity:true});this._activeQueries++;}},fetchHandler:function(p,q){var r=q.value,s=q.exclusions;if(!r&&q.replaceCache)this.localCache={};this.inform('buildQueryCache',{});var t=p.getPayload().entries;this.addEntries(t,r);this.inform('fetchComplete',{entries:t,response:p,value:r,fetch_context:q});var u=(!r&&this.value)?this.value:r;this.respond(u,this.buildUids(u,[],s),true);if(!r){if(this._bootstrapping){this._bootstrapping=false;this.inform('bootstrap',{bootstrapping:false});}if(q.token&&p.getPayload().token!==q.token)this.bootstrapWithToken();}},addEntries:function(p,q){var r=this.processEntries(k(p||[]),q),s=this.buildUids(q,r);if(q){var t=this.getQueryCache();t[this._normalizeString(q).flatValue]=s;}else this.fillCache(s);},processEntries:function(p,q){return p.map(function(r,s){var t=(r.uid=r.uid+''),u=this.getEntry(t);if(!u){u=r;u.query=q;this.setEntry(t,u);}else j(u,r);u.index===undefined&&(u.index=s);return t;},this);},getAllEntries:function(){return this._data||{};},getEntry:function(p){return this._data[p]||null;},setEntry:function(p,q){this._data[p]=q;},fillCache:function(p){var q=this.localCache;p.forEach(function(r){var s=this.getEntry(r);if(!s)return;s.bootstrapped=true;var t=this._normalizeString(this.getTextToIndex(s)).tokens;for(var u=0,v=t.length;u<v;++u){var w=t[u];if(!q.hasOwnProperty(w))q[w]={};q[w][r]=true;}},this);},getTextToIndex:function(p){if(p.textToIndex&&!p.needs_update)return p.textToIndex;p.needs_update=false;p.textToIndex=this.getTextToIndexFromFields(p,this._indexedFields);return p.textToIndex;},getTextToIndexFromFields:function(p,q){var r=[];for(var s=0;s<q.length;++s){var t=p[q[s]];if(t)r.push(t.join?t.join(' '):t);}return r.join(' ');},mergeUids:function(p,q,r,s){this.inform('mergeUids',{local_uids:p,query_uids:q,new_uids:r,value:s});var t=function(u,v){var w=this.getEntry(u),x=this.getEntry(v);if(w.extended_match!==x.extended_match)return w.extended_match?1:-1;if(w.index!==x.index)return w.index-x.index;if(w.text.length!==x.text.length)return w.text.length-x.text.length;return w.uid<x.uid;}.bind(this);this._checkExtendedMatch(s,p);return this.deduplicateByKey(p.sort(t).concat(q,r));},_checkExtendedMatch:function(p,q){var r=this._alwaysPrefixMatch?i.isPrefixMatch:i.isQueryMatch;for(var s=0;s<q.length;++s){var t=this.getEntry(q[s]);t.extended_match=t.tokens?!r(p,t.text):false;}},buildUids:function(p,q,r){if(!q)q=[];if(!p)return q;if(!r)r=[];var s=this.buildCacheResults(p,this.localCache),t=this.buildQueryResults(p),u=this.mergeUids(s,t,q,p),v=l(r.concat(this._exclusions)),w=u.filter(function(x){if(v.hasOwnProperty(x)||!this.getEntry(x))return false;for(var y=0;y<this._filters.length;++y)if(!this._filters[y](this.getEntry(x),p))return false;return (v[x]=true);},this);return this.uidsIncludingExact(p,w,v);},uidsIncludingExact:function(p,q,r){var s=q.length;if(p.length<this._minExactMatchLength||s<=this._maxResults)return q;for(var t=0;t<s;++t){var u=this.getEntry(q[t]);u.text_lower||(u.text_lower=u.text.toLowerCase());if(u.text_lower===this._normalizeString(p).flatValue){if(t>=this._maxResults){var v=q.splice(t,1);q.splice(this._maxResults-1,0,v);}break;}}return q;},buildData:function(p){var q=[],r=Math.min(p.length,this._maxResults);for(var s=0;s<r;++s)q.push(this.getEntry(p[s]));return q;},findQueryCache:function(p){var q=0,r=null,s=this.getQueryCache();if(this._queryExactMatch)return s[p]||[];for(var t in s)if(p.indexOf(t)===0&&t.length>q){q=t.length;r=t;}return s[r]||[];},buildQueryResults:function(p){var q=this._normalizeString(p).flatValue,r=this.findQueryCache(q);if(this.getQueryCache().hasOwnProperty(q))return r;return this.filterQueryResults(p,r);},filterQueryResults:function(p,q){var r=this._alwaysPrefixMatch?i.isPrefixMatch:i.isQueryMatch;return q.filter(function(s){return r(p,this.getTextToIndex(this.getEntry(s)));},this);},buildCacheResults:function(p,q){var r=this._normalizeString(p,this._alwaysPrefixMatch),s=this._alwaysPrefixMatch?r.sortedTokens:r.tokens,t=s.length,u=r.isPrefixQuery?t-1:null,v={},w={},x={},y=[],z=false,aa={},ba=0;for(var ca=0;ca<t;++ca){var da=s[ca];if(!aa.hasOwnProperty(da)){ba++;aa[da]=true;}else continue;for(var ea in q)if((!v.hasOwnProperty(ea)&&ea===da)||((this._alwaysPrefixMatch||u===ca)&&ea.indexOf(da)===0)){if(ea===da){if(w.hasOwnProperty(ea))z=true;v[ea]=true;}else{if(v.hasOwnProperty(ea)||w.hasOwnProperty(ea))z=true;w[ea]=true;}for(var fa in q[ea])if(ca===0||(x.hasOwnProperty(fa)&&x[fa]==ba-1))x[fa]=ba;}}for(var ga in x)if(x[ga]==ba)y.push(ga);if(z||ba<t)y=this.filterQueryResults(p,y);if(this._titleFields&&this._titleFields.length>0)y=this.filterNonTitleMatchQueryResults(p,y);return y;},filterNonTitleMatchQueryResults:function(p,q){return q.filter(function(r){var s=this._normalizeString(p),t=s.tokens.length;if(t===0)return true;var u=this.getTitleTerms(this.getEntry(r)),v=s.tokens[0];return ((t===1)||this._alwaysPrefixMatch)?i.isPrefixMatch(v,u):i.isQueryMatch(v,u);},this);},getTitleTerms:function(p){if(!p.titleToIndex)p.titleToIndex=this.getTextToIndexFromFields(p,this._titleFields);return p.titleToIndex;},deduplicateByKey:function(p){if(!this._deduplicationKey)return p;var q=l(p.map(this._getDeduplicationKey.bind(this)),p);return p.filter(function(r){return q[this._getDeduplicationKey(r)]==r;}.bind(this));},_getDeduplicationKey:function(p){var q=this.getEntry(p);return q[this._deduplicationKey]||'__'+p+'__';},getQueryCache:function(){return this.queryCache;},setMaxResults:function(p){this._maxResults=p;this.value&&this.respond(this.value,this.buildUids(this.value));},updateToken:function(p){this.token=p;this.dirty();return this;}});e.exports=o;});
__d("MultiBootstrapDataSource",["Class","DataSource"],function(a,b,c,d,e,f){var g=b('Class'),h=b('DataSource');function i(j){this._bootstrapEndpoints=j.bootstrapEndpoints;this.parent.construct(this,j);}g.extend(i,h);i.prototype.bootstrapWithoutToken=function(){for(var j=0;j<this._bootstrapEndpoints.length;j++)this.fetch(this._bootstrapEndpoints[j].endpoint,this._bootstrapEndpoints[j].data||{},{bootstrap:true});};e.exports=i;});
__d("XHPTemplate",["DataStore","DOM","HTML","copyProperties"],function(a,b,c,d,e,f){var g=b('DataStore'),h=b('DOM'),i=b('HTML'),j=b('copyProperties');function k(m){this._model=m;}j(k.prototype,{render:function(){if(i.isHTML(this._model))this._model=h.setContent(document.createDocumentFragment(),this._model)[0];return this._model.cloneNode(true);},build:function(){return new l(this.render());}});j(k,{getNode:function(m,n){return k.getNodes(m)[n];},getNodes:function(m){var n=g.get(m,'XHPTemplate:nodes');if(!n){n={};var o=h.scry(m,'[data-jsid]');o.push(m);var p=o.length;while(p--){var q=o[p];n[q.getAttribute('data-jsid')]=q;q.removeAttribute('data-jsid');}g.set(m,'XHPTemplate:nodes',n);}return n;}});function l(m){this._root=m;this._populateNodes();}j(l.prototype,{_populateNodes:function(){this._nodes={};this._leaves={};var m=this._root.getElementsByTagName('*');for(var n=0,o=m.length;n<o;n++){var p=m[n],q=p.getAttribute('data-jsid');if(q){p.removeAttribute('data-jsid');this._nodes[q]=p;this._leaves[q]=!p.childNodes.length;}}},getRoot:function(){return this._root;},getNode:function(m){return this._nodes[m];},setNodeProperty:function(m,n,o){this.getNode(m)[n]=o;return this;},setNodeContent:function(m,n){if(!this._leaves[m])throw new Error("Can't setContent on non-leaf node: "+m);h.setContent(this.getNode(m),n);return this;}});e.exports=k;});
__d("TabIsolation",["Event","DOMQuery","Focus","Keys","TabbableElements","copyProperties"],function(a,b,c,d,e,f){var g=b('Event'),h=b('DOMQuery'),i=b('Focus'),j=b('Keys'),k=b('TabbableElements'),l=b('copyProperties'),m=[],n=0;function o(p){this._root=p;this._eventHandler=null;this._identifier=n++;}l(o.prototype,{enable:function(){m.unshift(this._identifier);this._eventHandler=g.listen(window,'keydown',function(p){if(m[0]===this._identifier)this._tabHandler(p);}.bind(this),g.Priority.URGENT);},disable:function(){var p;if(this._eventHandler){p=m.indexOf(this._identifier);if(p>-1)m.splice(p,1);this._eventHandler.remove();this._eventHandler=null;}},_tabHandler:function(p){if(g.getKeyCode(p)!==j.TAB)return;var q=p.getTarget();if(!q)return;var r=k.find(this._root),s=r[0],t=r[r.length-1],u=p.getModifiers().shift;if(u&&q===s){p.preventDefault();i.set(t);}else if((!u&&q===t)||!h.contains(this._root,q)){p.preventDefault();i.set(s);}}});e.exports=o;});
__d("LayerTabIsolation",["TabIsolation","copyProperties"],function(a,b,c,d,e,f){var g=b('TabIsolation'),h=b('copyProperties');function i(j){this._layer=j;this._tabIsolation=null;}h(i.prototype,{_subscriptions:[],enable:function(){this._tabIsolation=new g(this._layer.getRoot());this._subscriptions=[this._layer.subscribe('show',this._tabIsolation.enable.bind(this._tabIsolation)),this._layer.subscribe('hide',this._tabIsolation.disable.bind(this._tabIsolation))];},disable:function(){while(this._subscriptions.length)this._subscriptions.pop().unsubscribe();this._tabIsolation.disable();this._tabIsolation=null;}});e.exports=i;});